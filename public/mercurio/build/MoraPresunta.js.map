{"version":3,"file":"MoraPresunta.js","sources":["../../src/Common/Region.js","../../src/Componentes/Views/Loading.js","../../src/Utils.js","../../src/App.js","../../src/Common/ModelView.js","../../src/Common/ErrorHandler.js","../../src/Common/Logger.js","../../src/Mercurio/MoraPresunta/views/MoraPresuntaView.js","../../src/Common/Layout.js","../../src/Mercurio/MoraPresunta/views/MoraLayout.js","../../src/Common/CollectionView.js","../../src/Mercurio/MoraPresunta/MoraPresuntaApp.js","../../src/Mercurio/MoraPresunta/RouterMoraPresunta.js","../../src/Mercurio/MoraPresunta/main.js"],"sourcesContent":["export class Region {\n\t#currentView = null;\n\t#currentViews = null;\n\t#$el = null;\n\n\tconstructor(options = {}) {\n\t\t_.extend(this, options);\n\t\tthis.currentViews = new Array();\n\t\tthis.el = options.el;\n\t}\n\n\t// Closes any active view and render a new one\n\tshow(view) {\n\t\tthis.closeView(this.currentView);\n\t\tthis.currentView = view;\n\t\tthis.openView(view);\n\t}\n\n\thtml(el) {\n\t\tif (this.$el) this.$el.html(el);\n\t}\n\n\tappend(view) {\n\t\tthis.currentViews.push(view);\n\t\tthis.ensureEl();\n\t\tview.render();\n\t\tthis.$el.append(view.el);\n\t\tif (view.onShow) view.onShow();\n\t}\n\n\tcloseView(view) {\n\t\t// Only remove the view when the remove function\n\t\t// is available\n\t\tif (view && view.remove) {\n\t\t\tview.remove();\n\t\t}\n\t}\n\n\topenView(view) {\n\t\t// Be sure that this.$el exists\n\t\tthis.ensureEl();\n\n\t\t// Render the view on the this.$el element\n\t\tview.render();\n\t\tthis.$el.html(view.el);\n\n\t\t// Callback when the view is in the DOM\n\t\tif (view.onShow) view.onShow();\n\t}\n\n\t// Create the this.$el attribute if do not exists\n\tensureEl() {\n\t\tif (this.$el) return;\n\t\tthis.$el = $(this.el);\n\t}\n\n\t// Close the Region and any view on it\n\tremove() {\n\t\tif (this.currentViews.length > 0) {\n\t\t\tthis.currentViews.forEach((view) => {\n\t\t\t\tthis.closeView(view);\n\t\t\t});\n\t\t}\n\t\tthis.closeView(this.currentView);\n\t}\n}\n","const loading = (() => {\n\tlet status,\n\t\telement,\n\t\tloader,\n\t\ttemplate = void 0;\n\n\tconst show = (out = false, options) => {\n\t\tif (out) {\n\t\t\telement = document.createElement('div');\n\t\t\telement.setAttribute('id', 'loading_msj');\n\t\t\t$(element).html(\n\t\t\t\t\"<div class='loading_msj'><p class='text-warning'>Procesando datos de busqueda...</p></div>\",\n\t\t\t);\n\t\t\tdocument.getElementById('app').appendChild(element);\n\t\t}\n\t\tif (!status) {\n\t\t\ttemplate = _.template($('#tmp_loader').html());\n\t\t\tloader = document.createElement('div');\n\t\t\tloader.setAttribute('class', 'loader');\n\t\t\tloader.setAttribute('id', 'loader');\n\t\t\t$(loader).append(template());\n\t\t\tdocument.body.appendChild(loader);\n\t\t\tloader.setAttribute('style', 'display:block');\n\t\t\tif (_.isObject(options) === true) {\n\t\t\t\tif (options.addClass) {\n\t\t\t\t\t$('.loader').addClass(options.addClass);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tstatus = true;\n\t};\n\n\tconst hide = (out = false) => {\n\t\tif (out) {\n\t\t\telement.remove();\n\t\t}\n\t\tif (status) {\n\t\t\tloader.remove();\n\t\t}\n\t\tstatus = void 0;\n\t};\n\n\treturn {\n\t\thide,\n\t\tshow,\n\t};\n})();\n\nexport default loading;\n","const CSRF = $(\"[name='csrf-token']\");\nconst $Kumbia = {\n    path: CSRF.attr('path'),\n    app: CSRF.attr('app'),\n};\n\nclass Utils {\n    static getKumbiaURL(url) {\n        if (typeof url == 'undefined') url = '';\n        return $Kumbia.path + url;\n    }\n\n    static getAppURL(url) {\n        if (typeof url == 'undefined') url = '';\n        return $Kumbia.path + url;\n    }\n\n    static getURL(url) {\n        if (typeof url == 'undefined') {\n            return $Kumbia.path;\n        } else {\n            return $Kumbia.path + url;\n        }\n    }\n\n    static redirectParentToAction(url) {\n        new Utils.redirectToAction(url, window.parent);\n    }\n\n    static redirectOpenerToAction(url) {\n        new Utils.redirectToAction(url, window.opener);\n    }\n\n    static redirectToAction(url, win) {\n        win = win ? win : window;\n        win.location.href = Utils.getKumbiaURL() + url;\n    }\n\n    static upperCaseFirst(str) {\n        let first = str.substring(0, 1).toUpperCase();\n        return first + str.substr(1, str.length - 1);\n    }\n\n    static numberFormat(number = 0, decimals = 0, dec_point = undefined, thousands_sep = undefined) {\n        let n = !isFinite(+number) ? 0 : +number;\n        let prec = !isFinite(+decimals) ? 0 : Math.abs(decimals);\n        let sep = typeof thousands_sep === 'undefined' ? ',' : thousands_sep;\n        let dec = typeof dec_point === 'undefined' ? '.' : dec_point;\n        let s = undefined;\n\n        const toFixedFix = (n, prec) => {\n            let k = Math.pow(10, prec);\n            return '' + Math.round(n * k) / k;\n        };\n\n        s = (prec ? toFixedFix(n, prec) : '' + Math.round(n)).split('.');\n        if (s[0].length > 3) {\n            s[0] = s[0].replace(/\\B(?=(?:\\d{3})+(?!\\d))/g, sep);\n        }\n        if ((s[1] || '').length < prec) {\n            s[1] = s[1] || '';\n            s[1] += new Array(prec - s[1].length + 1).join('0');\n        }\n        return s.join(dec);\n    }\n\n    static validOnlyLetter(evt) {\n        evt = evt ? evt : window.event ? window.event : null;\n        let kc = evt.keyCode;\n        let ev = (kc >= 65 && kc <= 90) || kc == 8 || kc == 9 || kc == 32;\n        if (ev == false) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            evt.stopped = true;\n        }\n    }\n}\n\nclass Messages {\n    static display(message, type, timeout = 8000) {\n        new Noty({\n            text: message,\n            layout: 'topRight',\n            theme: 'relax',\n            type: type,\n            timeout: timeout,\n        }).show();\n    }\n}\n\nexport { $Kumbia, Messages, Utils };\n","import { Region } from '@/Common/Region';\nimport loading from '@/Componentes/Views/Loading';\nimport { $Kumbia } from '@/Utils';\n\nconst $App = {\n    Models: {},\n    Collections: {},\n    router: null,\n    currentSubapp: null,\n    Modal: null,\n    layout: null,\n    el: null,\n    mainRegion: null,\n    startApp(RouterModule, ruta = '', el = '') {\n        this.el = el;\n        if (this.el === '') {\n            this.el = '#contentView';\n        }\n        this.initialize();\n        this.router = new RouterModule();\n        if (!Backbone.history.start()) {\n            this.router.navigate(ruta, { trigger: true });\n        }\n    },\n    initialize() {\n        _.extend(this, Backbone.Events);\n\n        const alertTypes = ['error', 'warning', 'success', 'info'];\n\n        alertTypes.forEach((type) => {\n            this.listenTo(this, `noty:${type}`, (message) => this.notify(type, message));\n            this.listenTo(this, `alert:${type}`, (transfer) => this.alert(type, transfer));\n        });\n\n        this.listenTo(this, 'confirma', this.confirmaApp);\n        this.listenTo(this, 'syncro', this.syncroRequest);\n        this.listenTo(this, 'ajax', this.ajaxKumbia);\n        this.listenTo(this, 'show:modal', this.renderModal);\n        this.listenTo(this, 'hide:modal', this.closeModal);\n        this.listenTo(this, 'down', this.downLoadFile);\n        this.listenTo(this, 'upload', this.uploadFile);\n    },\n    notify(type, message) {\n        this.showNoty(type, message.toString(), type === 'error' ? 10000 : 6000);\n    },\n    alert(type, transfer) {\n        const { title = 'Notificación', message = 'Nota no hay respuesta de la solicitud', timer = 8200 } = transfer;\n        this.showAlert(title, message, type, timer);\n    },\n    showNoty(type, message, timeout) {\n        new Noty({\n            text: message,\n            layout: 'topRight',\n            theme: 'relax',\n            type: type,\n            timeout: timeout,\n        }).show();\n    },\n    showAlert(title = '', text = '', icon = '', timer) {\n        Swal.fire({\n            title,\n            html: text,\n            icon,\n            showConfirmButton: false,\n            confirmButtonText: 'Continuar',\n            timer,\n        });\n    },\n    startSubApplication(SubApplication, __services, options = {}) {\n        let services = [];\n\n        if (typeof __services != 'string') {\n            if (_.isArray(__services) === true) {\n                _.each(__services, (ser) => {\n                    services[ser.name] = new ser.inyectar();\n                });\n            } else if (_.isObject(__services) === true) {\n                services[__services.name] = new __services.inyectar();\n            } else {\n                services.push(__services);\n            }\n        }\n\n        this.mainRegion = new Region({ el: this.el, ...options });\n        this.currentSubapp = new SubApplication({\n            region: this.mainRegion,\n            services: services,\n            App: this,\n        });\n        return this.currentSubapp;\n    },\n    confirmaApp(transfer) {\n        const { message, callback, title = '¿Confirmar?', icon = 'warning' } = transfer;\n        Swal.fire({\n            title: title,\n            text: message,\n            icon: icon,\n            showCancelButton: true,\n            confirmButtonColor: '#2dce89',\n            cancelButtonColor: '#fc8c72',\n            confirmButtonText: 'SI, Continuar!',\n        }).then((result) => {\n            callback(result.isConfirmed);\n        });\n    },\n    syncroRequest(transfer) {\n        const { url, data = {}, callback, silent = false } = transfer;\n        const csrf = document.querySelector(\"[name='csrf-token']\").getAttribute('content');\n\n        Backbone.ajax({\n            type: 'POST',\n            dataType: 'json',\n            url: url,\n            data: data,\n            cache: false,\n            contentType: 'application/x-www-form-urlencoded',\n            processData: true,\n            timeout: 52400,\n            beforeSend: (xhr) => {\n                if (silent == false) loading.show();\n                xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n                if (csrf.length > 0) {\n                    xhr.setRequestHeader('Authorization', 'Bearer ' + csrf);\n                }\n            },\n            success: (response) => {\n                if (silent == false) loading.hide();\n                return callback(response);\n            },\n            error: (err) => {\n                const keys = _.keys(err);\n                if (silent == false) loading.hide();\n                if (_.indexOf(keys, 'responseText') !== -1) {\n                    console.log(err.responseText);\n                    this.trigger('alert:error', { message: err.responseText });\n                } else {\n                    console.log(err);\n                    this.trigger('alert:error', { message: err });\n                }\n                return callback(false);\n            },\n        });\n    },\n    renderModal(transfer = {}) {\n        const { title, view, options = false } = transfer;\n        const targetModal = $('#modalComponent');\n        if (!this.Modal) {\n            this.Modal = new bootstrap.Modal(document.getElementById('modalComponent'), {\n                keyboard: true,\n                backdrop: 'static',\n            });\n        }\n        targetModal.find('#mdl_set_title').text(title);\n        targetModal.find('#mdl_set_footer').css('display', 'none');\n        if (options) {\n            targetModal.find('.modal-dialog').addClass(options.bootstrapSize);\n        }\n        targetModal.find('#mdl_set_body').html(view.render().$el);\n        this.Modal.show();\n        if (options) {\n            this.Modal.on('hidden.bs.modal', (event) => view.remove());\n            targetModal.find('.close').addClass('d-none');\n        }\n    },\n    closeModal(view) {\n        if (this.Modal) {\n            this.Modal.hide();\n            this.Modal = null;\n        }\n        if (view) {\n            view.remove();\n        }\n    },\n    url(method = '', controller = undefined) {\n        return this.kumbiaURL((controller ?? '') + '/' + method);\n    },\n    kumbiaURL: (url) => {\n        if (_.isUndefined(url) === true) url = '';\n        return $Kumbia.path + url;\n    },\n    ajaxKumbia(transfer = {}) {\n        const { url, data = {}, callback, silent = false } = transfer;\n        // eslint-disable-next-line quotes\n        const csrf = document.querySelector(\"[name='csrf-token']\").getAttribute('content');\n\n        $.ajax({\n            type: 'POST',\n            data: data,\n            url: this.kumbiaURL(url),\n            dataType: 'html',\n            processData: true,\n            contentType: 'application/x-www-form-urlencoded',\n            cache: false,\n            beforeSend: (xhr) => {\n                if (silent == false) loading.show();\n                xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n                if (csrf.length > 0) {\n                    xhr.setRequestHeader('Authorization', 'Bearer ' + csrf);\n                }\n            },\n        })\n            .done((response) => {\n                if (silent == false) loading.hide();\n                return callback(response);\n            })\n            .fail((err) => {\n                if (silent == false) loading.hide();\n                this.trigger('alert:error', { message: err.responseText });\n                return callback(false);\n            })\n            .always(() => {\n                if (silent == false) loading.hide();\n            });\n    },\n    downLoadFile(transfer) {\n        const { url, filename } = transfer;\n        const link = document.createElement('a');\n        link.href = this.kumbiaURL(url + '/' + filename);\n        link.download = filename;\n        console.log(link);\n        link.click();\n    },\n    uploadFile(transfer) {\n        const { url, data, callback, silent = false } = transfer;\n        let formData;\n        if (data instanceof FormData) {\n            formData = data;\n        } else {\n            formData = new FormData();\n            formData.append(data.name, data.file);\n        }\n        // eslint-disable-next-line quotes\n        const csrf = document.querySelector(\"[name='csrf-token']\").getAttribute('content');\n        Backbone.ajax({\n            url: url,\n            type: 'POST',\n            dataType: 'json',\n            data: formData,\n            cache: false,\n            contentType: false,\n            processData: false,\n            beforeSend: (xhr) => {\n                if (silent == false) loading.show();\n                xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n                if (csrf.length > 0) {\n                    xhr.setRequestHeader('Authorization', 'Bearer ' + csrf);\n                }\n            },\n            success: (response) => {\n                if (silent == false) loading.hide();\n                return callback(response);\n            },\n            error: (err) => {\n                const keys = _.keys(err);\n                console.log(err);\n                if (silent == false) loading.hide();\n                if (_.indexOf(keys, 'responseText') !== -1) {\n                    this.trigger('alert:error', { message: err.responseText });\n                } else {\n                    this.trigger('alert:error', { message: err });\n                }\n                return callback(false);\n            },\n        });\n    },\n};\n\nexport { $App };\n","export class ModelView extends Backbone.View {\n\tmodelDOM = null;\n\n\tconstructor(options = { modelDOM: null, onRender: null }) {\n\t\tsuper(options);\n\t\tthis.modelDOM = options.modelDOM || Backbone.Model;\n\t\tthis.template = null;\n\t\t_.extend(this, options);\n\t\tthis.onRender = _.isFunction(this.onRender) ? this.onRender : null;\n\t}\n\n\t/**\n\t * @override\n\t */\n\trender() {\n\t\tconst data = this.serializeData();\n\t\tlet renderedHtml;\n\n\t\tif (_.isFunction(this.template)) {\n\t\t\trenderedHtml = this.template(data);\n\t\t} else if (_.isString(this.template)) {\n\t\t\tconst compiledTemplate = this.compileTemplate();\n\t\t\trenderedHtml = compiledTemplate(data);\n\t\t}\n\n\t\tthis.$el.html(renderedHtml);\n\t\tif (this.onRender) this.onRender(this.$el);\n\t\treturn this;\n\t}\n\n\tcompileTemplate() {\n\t\tif (_.isString(this.template) === true) {\n\t\t\tconst _el = document.querySelector(this.template);\n\t\t\treturn _.template(_el.innerHTML);\n\t\t}\n\t\treturn false;\n\t}\n\n\t// Transform Model into JSON representation\n\tserializeData() {\n\t\tlet data = null;\n\n\t\t// Only when model is available\n\t\tif (this.modelDOM !== null) {\n\t\t\tif (this.model instanceof this.modelDOM) {\n\t\t\t\tdata = this.model.toJSON();\n\t\t\t} else {\n\t\t\t\tif (typeof this.model == 'object') {\n\t\t\t\t\tdata = this.model;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof this.model == 'object') {\n\t\t\t\tdata = this.model;\n\t\t\t}\n\t\t}\n\t\treturn data ? data : {};\n\t}\n\n\tgetInput(selector) {\n\t\treturn this.$el.find(`[name='${selector}']`).val();\n\t}\n\n\tgetInputById(id) {\n\t\treturn this.$el.find('#' + id).val();\n\t}\n\n\tsetInput(selector, val) {\n\t\treturn this.$el.find(`[name='${selector}']`).val(val ?? '');\n\t}\n\n\tgetInputByTag(tag, key) {\n\t\treturn this.$el.find(`[${tag}='${key}']`).val();\n\t}\n\n\tgetCheck(selector) {\n\t\treturn this.$el.find(`[name='${selector}']:checked`).length;\n\t}\n\n\tgetInputFile(id) {\n\t\treturn this.$el.find('#' + id).files[0];\n\t}\n}\n","// utils/ErrorHandler.js - Manejador de errores\nexport default class ErrorHandler {\n\t#logErrors = true;\n\t#showUserMessages = true;\n\n\tconstructor(options = {}) {\n\t\tthis.#logErrors = options.logErrors ?? true;\n\t\tthis.#showUserMessages = options.showUserMessages ?? true;\n\t}\n\n\thandleError(error, context = 'Error desconocido') {\n\t\tif (this.#logErrors) {\n\t\t\tconsole.error(`[${context}]:`, error);\n\t\t}\n\n\t\tif (this.#showUserMessages) {\n\t\t\tthis.#showErrorMessage(this.#getUserFriendlyMessage(error, context));\n\t\t}\n\t}\n\n\t#getUserFriendlyMessage(error, context) {\n\t\tif (error instanceof TypeError) {\n\t\t\treturn 'Error de tipo de datos. Por favor, verifica que los datos sean válidos.';\n\t\t}\n\n\t\tif (error instanceof ReferenceError) {\n\t\t\treturn 'Error de referencia. Algunos elementos de la página no se encontraron.';\n\t\t}\n\n\t\tif (error.message?.includes('fetch')) {\n\t\t\treturn 'Error de conexión. Por favor, verifica tu conexión a internet.';\n\t\t}\n\n\t\treturn `${context}. Si el problema persiste, recarga la página.`;\n\t}\n\n\t#showErrorMessage(message) {\n\t\tconst tableBody = document.querySelector('#table-body');\n\t\tif (tableBody) {\n\t\t\ttableBody.innerHTML = `\n          <tr>\n            <td colspan=\"8\" class=\"text-center text-danger\">\n              <i class=\"fas fa-exclamation-triangle me-2\"></i>\n              ${message}\n            </td>\n          </tr>\n        `;\n\t\t} else {\n\t\t\t// Fallback a alert si no hay tabla disponible\n\t\t\talert(message);\n\t\t}\n\t}\n}\n","export default class Logger {\n\tstatic #instance;\n\t#logs = [];\n\t#maxLogs = 1000;\n\n\tconstructor() {\n\t\tif (Logger.#instance) {\n\t\t\treturn Logger.#instance;\n\t\t}\n\t\tLogger.#instance = this;\n\t}\n\n\tlog(level, message, data = null) {\n\t\tconst logEntry = {\n\t\t\ttimestamp: new Date().toISOString(),\n\t\t\tlevel,\n\t\t\tmessage,\n\t\t\tdata: data ? this.structuredClone(data) : null,\n\t\t};\n\n\t\tthis.#logs.push(logEntry);\n\n\t\t// Mantener solo los últimos logs\n\t\tif (this.#logs.length > this.#maxLogs) {\n\t\t\tthis.#logs = this.#logs.slice(-this.#maxLogs);\n\t\t}\n\n\t\tconsole.log(message, data);\n\t}\n\n\tinfo(message, data) {\n\t\tthis.log('info', message, data);\n\t}\n\twarn(message, data) {\n\t\tthis.log('warn', message, data);\n\t}\n\terror(message, data) {\n\t\tthis.log('error', message, data);\n\t}\n\tdebug(message, data) {\n\t\tthis.log('debug', message, data);\n\t}\n\n\tgetLogs(level = null) {\n\t\treturn level ? this.#logs.filter((log) => log.level === level) : [...this.#logs];\n\t}\n\n\tclear() {\n\t\tthis.#logs = [];\n\t}\n\n\tstructuredClone(data) {\n\t\treturn JSON.parse(JSON.stringify(data));\n\t}\n}\n","import { ModelView } from '@/Common/ModelView';\nimport ErrorHandler from '@/Common/ErrorHandler';\nimport Logger from '@/Common/Logger';\n\nexport default class MoraPresuntaView extends ModelView {\n\t#errorHandler;\n\tlogger;\n\n\tconstructor(options = {}) {\n\t\tsuper({\n\t\t\t...options,\n\t\t\tmodelDOM: Backbone.Model,\n\t\t});\n\n\t\tthis.logger = new Logger();\n\t\tthis.#errorHandler = options.errorHandler || new ErrorHandler();\n\t\tthis.template = _.template(document.getElementById('tmp_mora_presunta').innerHTML);\n\t}\n}\n","import { ModelView } from '@/Common/ModelView';\nimport { Region } from './Region';\n\nexport class Layout extends ModelView {\n\ttagRegions = {};\n\tregionsLayout = {};\n\n\tconstructor(options = {}) {\n\t\tsuper(options);\n\t\t_.extend(this, options);\n\t}\n\n\t/**\n\t * @override\n\t */\n\trender() {\n\t\tthis.closeRegions();\n\t\tconst result = ModelView.prototype.render.call(this);\n\t\tthis.configureRegions();\n\t\treturn result;\n\t}\n\n\tconfigureRegions() {\n\t\tconst regionDefinitions = this.tagRegions || {};\n\t\tif (!this.regionsLayout) this.regionsLayout = {};\n\n\t\t_.each(regionDefinitions, (__selector, name) => {\n\t\t\tlet $el = this.$(__selector);\n\t\t\tthis.regionsLayout[name] = new Region({ el: $el });\n\t\t});\n\t}\n\n\t// Get a Region instance for a named region\n\tgetRegion(regionName) {\n\t\tif (!this.regionsLayout) return false;\n\t\treturn this.regionsLayout[regionName];\n\t}\n\n\t/**\n\t * @override\n\t */\n\tremove(options = {}) {\n\t\tthis.stopListening();\n\t\tthis.closeRegions();\n\t\tModelView.prototype.remove.call(this, options);\n\t}\n\n\tcloseRegions() {\n\t\tif (!this.regionsLayout) return false;\n\t\t_.each(this.regionsLayout, (region) => {\n\t\t\tif (region && region.remove) region.remove();\n\t\t});\n\t}\n}\n","import { Layout } from '@/Common/Layout';\n\nexport default class MoraLayout extends Layout {\n\tconstructor(options = {}) {\n\t\tsuper({\n\t\t\t...options,\n\t\t\ttemplate: '#tmp_layout',\n\t\t\tclassName: 'tab-content',\n\t\t\ttagRegions: {\n\t\t\t\tperiodos: '#periodo-list',\n\t\t\t\tsucursales: '#sucursal-tabs',\n\t\t\t\ttable: '#data-table',\n\t\t\t},\n\t\t});\n\t}\n}\n","export class CollectionView extends Backbone.View {\n\t/**\n\t * @override\n\t */\n\tinitialize() {\n\t\t// Keep track of rendered items\n\t\tthis.children = {};\n\n\t\t// Bind collection events to automatically insert\n\t\t// and remove items in the view\n\t\tthis.listenTo(this.collection, 'add', this.modelAdded);\n\t\tthis.listenTo(this.collection, 'remove', this.modelRemoved);\n\t\tthis.listenTo(this.collection, 'reset', this.render);\n\t}\n\n\t// Render a model when is added to the collection\n\tmodelAdded(model) {\n\t\tconst view = this.renderModel(model);\n\t\tthis.$el.append(view.$el);\n\t}\n\n\t// Close view of model when is removed from the collection\n\tmodelRemoved(model) {\n\t\tif (!model) return;\n\n\t\tconst view = this.children[model.cid];\n\t\tthis.closeChildView(view);\n\t}\n\n\t/**\n\t * @override\n\t */\n\trender() {\n\t\t// Clean up any previous elements rendered\n\t\tthis.closeChildren();\n\n\t\t// Render a view for each model in the collection\n\t\tconst html = this.collection.map((model) => {\n\t\t\tlet view = this.renderModel(model);\n\t\t\treturn view.$el;\n\t\t});\n\n\t\t// Put the rendered items in the DOM\n\t\tthis.$el.html(html);\n\t\treturn this;\n\t}\n\n\trenderModel(model) {\n\t\t// Create a new view instance, modelView should be\n\t\t// redefined as a subclass of Backbone.View\n\t\tconst view = new this.modelView({ model: model });\n\n\t\t// Keep track of which view belongs to a model\n\t\tthis.children[model.cid] = view;\n\n\t\t// Re-trigger all events in the children views, so that\n\t\t// you can listen events of the children views from the\n\t\t// collection view\n\t\tthis.listenTo(view, 'all', (eventName) => {\n\t\t\tthis.trigger('item:' + eventName, view, model);\n\t\t});\n\n\t\tview.render();\n\t\treturn view;\n\t}\n\n\t/**\n\t * @override\n\t */\n\tremove() {\n\t\tBackbone.View.prototype.remove.call(this);\n\t\tthis.closeChildren();\n\t}\n\n\t// Close all the live childrens\n\tcloseChildren() {\n\t\tconst children = this.children || {};\n\t\t_.each(children, (child) => this.closeChildView(child));\n\t}\n\n\t// Close a single children at time\n\tcloseChildView(view) {\n\t\t// Ignore if view is not valid\n\t\tif (!view) return;\n\n\t\t// Call the remove function only if available\n\t\tif (_.isFunction(view.remove)) {\n\t\t\tview.remove();\n\t\t}\n\n\t\t// Remove event hanlders for the view\n\t\tthis.stopListening(view);\n\n\t\t// Stop tracking the model-view relationship for the\n\t\t// closed view\n\t\tif (view.model) {\n\t\t\tthis.children[view.model.cid] = undefined;\n\t\t}\n\t}\n}\n","import { $App } from '@/App';\nimport { Region } from '@/Common/Region';\nimport MoraPresuntaView from './views/MoraPresuntaView';\nimport ErrorHandler from '@/Common/ErrorHandler';\nimport Logger from '@/Common/Logger';\nimport MoraLayout from './views/MoraLayout';\nimport { CollectionView } from '@/Common/CollectionView';\nimport { ModelView } from '@/Common/ModelView';\n\nclass SucursalButton extends ModelView {\n\tconstructor(options = {}) {\n\t\tsuper(options);\n\t\tthis.template = _.template(\n\t\t\t'<button data-codsuc=\"<%= codsuc %>\" class=\"btn btn-primary btn-sucursal <%= (isActive) ? \"active\" : \"\" %>\"><%= codsuc %></button>',\n\t\t);\n\t}\n}\n\nclass SucursalesView extends CollectionView {\n\tconstructor(options = {}) {\n\t\tsuper(options);\n\t\tthis.modelView = SucursalButton;\n\t}\n\n\tget events() {\n\t\treturn {\n\t\t\t'click .btn-sucursal': 'changeSucursal',\n\t\t};\n\t}\n\n\tchangeSucursal(e) {\n\t\te.preventDefault();\n\t\tconst sucursalId = e.currentTarget.dataset.codsuc;\n\t\tif (!sucursalId) return;\n\t\tthis.trigger('change:sucursal', sucursalId);\n\t}\n}\n\nclass Sucursal extends Backbone.Model {}\n\nclass Sucursales extends Backbone.Collection {\n\tconstructor(options = {}) {\n\t\tsuper(options);\n\t}\n\n\tget model() {\n\t\treturn Sucursal;\n\t}\n}\n\nclass PeriodosView extends Backbone.View {\n\tconstructor(options = {}) {\n\t\tsuper({ ...options, className: 'list-group' });\n\t}\n\n\trender() {\n\t\tlet html = '';\n\t\tfor (const key in this.collection) {\n\t\t\tconst element = this.collection[key];\n\t\t\thtml += `<a data-periodo=\"${element}\" class='list-group-item list-group-item-action'>${element}</a>`;\n\t\t}\n\t\tthis.$el.append(html);\n\t\tthis.$(`.list-group-item[data-periodo=\"${this.collection.at(0)}\"]`).addClass(\n\t\t\t'active',\n\t\t);\n\t\treturn this;\n\t}\n\n\tget events() {\n\t\treturn {\n\t\t\t'click .list-group-item': 'changePeriodo',\n\t\t};\n\t}\n\n\tchangePeriodo(e) {\n\t\te.preventDefault();\n\t\tconst periodo = e.currentTarget.dataset.periodo;\n\t\tif (!periodo) return;\n\t\tthis.$(e.currentTarget).addClass('active').siblings().removeClass('active');\n\t\tthis.trigger('change:periodo', periodo);\n\t}\n}\n\nclass MoraPresuntaApp {\n\t#dataManager;\n\t#errorHandler;\n\t#viewMora;\n\t#logger;\n\t#layout;\n\t#sucursalId;\n\t#collectionPeriodos;\n\t#periodo;\n\t#collectionSucursales;\n\n\tconstructor() {\n\t\t_.extend(this, Backbone.Events);\n\t\tthis.#errorHandler = new ErrorHandler();\n\t\tthis.#logger = new Logger();\n\t\tthis.#layout = new MoraLayout();\n\t}\n\n\tsetDataManager(dataManager) {\n\t\tthis.#dataManager = dataManager;\n\t}\n\n\texecute(sucursalId = null, periodo = null) {\n\t\tthis.#initialize();\n\t\tif (sucursalId) this.#sucursalId = sucursalId;\n\t\tif (periodo) this.#periodo = periodo;\n\t}\n\n\t#initialize() {\n\t\ttry {\n\t\t\tthis.#initializeView();\n\t\t} catch (error) {\n\t\t\tthis.#handleError(error, 'Error al inicializar la aplicación');\n\t\t}\n\t}\n\n\t#initializeView() {\n\t\tconst region = new Region({ el: '#boneLayout' });\n\t\tregion.show(this.#layout);\n\n\t\tthis.#renderSucursales();\n\t\tthis.#renderPeriodos();\n\t\tthis.#updateView();\n\t\tthis.#updateTitle();\n\t}\n\n\t#updateView() {\n\t\tif (this.#viewMora) this.#viewMora.remove();\n\t\tthis.#viewMora = new MoraPresuntaView({\n\t\t\tmodel: {\n\t\t\t\tcodsuc: this.#sucursalId,\n\t\t\t\tcartera: this.#dataManager.cartera[this.#sucursalId][this.#periodo],\n\t\t\t\tperiodos: this.#dataManager.periodos,\n\t\t\t\tsucursales: this.#dataManager.sucursales,\n\t\t\t},\n\t\t\terrorHandler: this.#errorHandler,\n\t\t});\n\t\tthis.#layout.getRegion('table').show(this.#viewMora);\n\t}\n\n\t#handleError(error, message) {\n\t\tthis.#logger.error(message, error);\n\t\tthis.#errorHandler.handleError(error, message);\n\t\t$App.trigger('alert:error', {\n\t\t\tmessage: `${message}: ${error.message || 'Error desconocido'}`,\n\t\t});\n\t}\n\n\t#renderSucursales() {\n\t\tlet dataSucursales;\n\t\tif (this.#sucursalId) {\n\t\t\tdataSucursales = _.map(this.#dataManager.sucursales, (sucursal) => {\n\t\t\t\tsucursal.isActive = sucursal.codsuc == this.#sucursalId ? true : false;\n\t\t\t\treturn sucursal;\n\t\t\t});\n\t\t} else {\n\t\t\tdataSucursales = _.map(this.#dataManager.sucursales, (sucursal) => {\n\t\t\t\tsucursal.isActive = false;\n\t\t\t\treturn sucursal;\n\t\t\t});\n\t\t\tthis.#sucursalId = dataSucursales[0].codsuc;\n\t\t}\n\t\tconst collection = new Sucursales(dataSucursales);\n\t\tconst container = this.#layout.getRegion('sucursales');\n\t\tthis.#collectionSucursales = new SucursalesView({\n\t\t\tcollection: collection,\n\t\t});\n\n\t\tthis.listenTo(this.#collectionSucursales, 'change:sucursal', (sucursalId) => {\n\t\t\tif (this.#sucursalId == sucursalId) return;\n\t\t\tthis.destroy();\n\t\t\tsetTimeout(() => {\n\t\t\t\t$App.router.navigate(`list/${sucursalId}`, { trigger: true });\n\t\t\t}, 50);\n\t\t});\n\n\t\tcontainer.show(this.#collectionSucursales);\n\t}\n\n\t#renderPeriodos() {\n\t\tconst container = this.#layout.getRegion('periodos');\n\t\tconst segmentPeriods = _.filter(this.#dataManager.cartera, (periodo, codsuc) => {\n\t\t\treturn codsuc == this.#sucursalId ? periodo : null;\n\t\t});\n\n\t\tconst dataPeriodos = _.map(segmentPeriods, (periodo) => {\n\t\t\treturn Object.keys(periodo);\n\t\t});\n\n\t\tif (!this.#periodo) this.#periodo = dataPeriodos[0][0];\n\t\tthis.#collectionPeriodos = new PeriodosView({\n\t\t\tcollection: dataPeriodos[0],\n\t\t});\n\n\t\tthis.listenTo(this.#collectionPeriodos, 'change:periodo', (periodo) => {\n\t\t\tif (this.#periodo == periodo) return;\n\t\t\tthis.#periodo = periodo;\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.#updateView();\n\t\t\t\tthis.#updateTitle();\n\t\t\t}, 50);\n\t\t});\n\n\t\tcontainer.show(this.#collectionPeriodos);\n\t}\n\n\t#updateTitle() {\n\t\tconst titleElement = $('#view_mora_title');\n\t\tlet title;\n\t\tif (this.#periodo) {\n\t\t\ttitle = `Sucursal: ${this.#sucursalId} - Periodo: ${this.#formatPeriodo(\n\t\t\t\tthis.#periodo,\n\t\t\t)}`;\n\t\t} else {\n\t\t\ttitle = `Sucursal: ${this.#sucursalId}`;\n\t\t}\n\t\ttitleElement.text(title);\n\t}\n\n\t#formatPeriodo(periodo) {\n\t\tif (!periodo || periodo.length !== 6) return periodo;\n\t\treturn `${periodo.substring(4, 6)}/${periodo.substring(0, 4)}`;\n\t}\n\n\tdestroy() {\n\t\tthis.#collectionPeriodos.remove();\n\t\tthis.#collectionSucursales.remove();\n\t\tthis.#viewMora.remove();\n\t\tthis.stopListening();\n\t}\n}\n\nexport default MoraPresuntaApp;\n","import { $App } from '@/App';\nimport MoraPresuntaApp from './MoraPresuntaApp';\n\nclass RouterMoraPresunta extends Backbone.Router {\n\t#dataManager;\n\n\tconstructor(options = {}) {\n\t\tsuper({\n\t\t\t...options,\n\t\t\troutes: {\n\t\t\t\tlist: 'renderDefault',\n\t\t\t\t'list/:sucursal': 'renderBySucursal',\n\t\t\t\t'list/:sucursal/:periodo': 'renderBySucursalPeriodo',\n\t\t\t},\n\t\t});\n\n\t\tthis.currentApp = $App.startSubApplication(MoraPresuntaApp);\n\t\tthis._bindRoutes();\n\t}\n\n\tasync renderBySucursalPeriodo(sucursalId, periodo) {\n\t\tawait this.#loadData();\n\t\tthis.currentApp.execute(sucursalId, periodo);\n\t}\n\n\tasync renderBySucursal(sucursalId) {\n\t\tawait this.#loadData();\n\t\tthis.currentApp.execute(sucursalId);\n\t}\n\n\tasync renderDefault() {\n\t\tawait this.#loadData();\n\t\tthis.currentApp.execute();\n\t}\n\n\tasync #loadData() {\n\t\ttry {\n\t\t\tif (!this.#dataManager) {\n\t\t\t\tconst response = await this.#fetchData();\n\t\t\t\tthis.#dataManager = response.data;\n\t\t\t}\n\t\t\tthis.currentApp.setDataManager(this.#dataManager);\n\t\t} catch (error) {\n\t\t\tthis.#handleError(error, 'Error al cargar los datos');\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\t#handleError(error, message) {\n\t\t$App.trigger('alert:error', { message: `${message}: ${error.message}` });\n\t}\n\n\t#fetchData() {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t$App.trigger('syncro', {\n\t\t\t\turl: $App.url('mora_presunta'),\n\t\t\t\tdata: {},\n\t\t\t\tcallback: (response) => resolve(response),\n\t\t\t\terror: (error) => reject(error.message),\n\t\t\t});\n\t\t});\n\t}\n}\n\nexport { RouterMoraPresunta };\n","import { $App } from '@/App';\nimport { RouterMoraPresunta } from './RouterMoraPresunta';\n\n// Inicializar la aplicación cuando el DOM esté listo\n$(() => {\n\t$App.startApp(RouterMoraPresunta, 'list', '#boneLayout');\n});\n"],"names":["_currentView","_currentViews","_$el","Region","options","__privateAdd","view","el","loading","status","element","loader","template","out","CSRF","$Kumbia","$App","RouterModule","ruta","type","message","transfer","title","timer","timeout","text","icon","SubApplication","__services","services","ser","callback","result","url","data","silent","csrf","xhr","response","err","keys","targetModal","event","method","controller","filename","link","formData","ModelView","__publicField","renderedHtml","_el","selector","id","val","tag","key","_logErrors","_showUserMessages","_ErrorHandler_instances","getUserFriendlyMessage_fn","showErrorMessage_fn","ErrorHandler","__privateSet","error","context","__privateGet","__privateMethod","_a","tableBody","_instance","_logs","_maxLogs","_Logger","level","logEntry","log","Logger","_errorHandler","MoraPresuntaView","Layout","regionDefinitions","__selector","name","$el","regionName","region","MoraLayout","CollectionView","model","html","eventName","children","child","SucursalButton","SucursalesView","sucursalId","Sucursal","Sucursales","PeriodosView","periodo","_dataManager","_viewMora","_logger","_layout","_sucursalId","_collectionPeriodos","_periodo","_collectionSucursales","_MoraPresuntaApp_instances","initialize_fn","initializeView_fn","updateView_fn","handleError_fn","renderSucursales_fn","renderPeriodos_fn","updateTitle_fn","formatPeriodo_fn","MoraPresuntaApp","dataManager","dataSucursales","sucursal","collection","container","segmentPeriods","codsuc","dataPeriodos","titleElement","_RouterMoraPresunta_instances","loadData_fn","fetchData_fn","RouterMoraPresunta","resolve","reject"],"mappings":"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"}