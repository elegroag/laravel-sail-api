var ft=Object.defineProperty;var pt=i=>{throw TypeError(i)};var mt=(i,e,t)=>e in i?ft(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var j=(i,e,t)=>mt(i,typeof e!="symbol"?e+"":e,t);var oe=(i,e,t)=>e.has(i)?pt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t);var we,Se,Ie,Je;let Ze=(Je=class{constructor(e={}){oe(this,we,null);oe(this,Se,null);oe(this,Ie,null);_.extend(this,e),this.currentViews=new Array,this.el=e.el}show(e){this.closeView(this.currentView),this.currentView=e,this.openView(e)}html(e){this.$el&&this.$el.html(e)}append(e){this.currentViews.push(e),this.ensureEl(),e.render(),this.$el.append(e.el),e.onShow&&e.onShow()}closeView(e){e&&e.remove&&e.remove()}openView(e){this.ensureEl(),e.render(),this.$el.html(e.el),e.onShow&&e.onShow()}ensureEl(){this.$el||(this.$el=$(this.el))}remove(){this.currentViews.length>0&&this.currentViews.forEach(e=>{this.closeView(e)}),this.closeView(this.currentView)}},we=new WeakMap,Se=new WeakMap,Ie=new WeakMap,Je);const k=(()=>{let i,e,t,s;return{hide:(o=!1)=>{o&&e.remove(),i&&t.remove(),i=void 0},show:(o=!1,a)=>{o&&(e=document.createElement("div"),e.setAttribute("id","loading_msj"),$(e).html("<div class='loading_msj'><p class='text-warning'>Procesando datos de busqueda...</p></div>"),document.getElementById("app").appendChild(e)),i||(s=_.template($("#tmp_loader").html()),t=document.createElement("div"),t.setAttribute("class","loader"),t.setAttribute("id","loader"),$(t).append(s()),document.body.appendChild(t),t.setAttribute("style","display:block"),_.isObject(a)===!0&&a.addClass&&$(".loader").addClass(a.addClass)),i=!0}}})(),Me=$("[name='csrf-token']"),gt={path:Me.attr("path"),app:Me.attr("app")},E={Models:{},Collections:{},router:null,currentSubapp:null,Modal:null,layout:null,el:null,mainRegion:null,startApp(i,e="",t=""){this.el=t,this.el===""&&(this.el="#contentView"),this.initialize(),this.router=new i,Backbone.history.start()||this.router.navigate(e,{trigger:!0})},initialize(){_.extend(this,Backbone.Events),["error","warning","success","info"].forEach(e=>{this.listenTo(this,`noty:${e}`,t=>this.notify(e,t)),this.listenTo(this,`alert:${e}`,t=>this.alert(e,t))}),this.listenTo(this,"confirma",this.confirmaApp),this.listenTo(this,"syncro",this.syncroRequest),this.listenTo(this,"ajax",this.ajaxKumbia),this.listenTo(this,"show:modal",this.renderModal),this.listenTo(this,"hide:modal",this.closeModal),this.listenTo(this,"down",this.downLoadFile),this.listenTo(this,"upload",this.uploadFile)},notify(i,e){this.showNoty(i,e.toString(),i==="error"?1e4:6e3)},alert(i,e){const{title:t="Notificación",message:s="Nota no hay respuesta de la solicitud",timer:r=8200}=e;this.showAlert(t,s,i,r)},showNoty(i,e,t){new Noty({text:e,layout:"topRight",theme:"relax",type:i,timeout:t}).show()},showAlert(i="",e="",t="",s){Swal.fire({title:i,html:e,icon:t,showConfirmButton:!1,confirmButtonText:"Continuar",timer:s})},startSubApplication(i,e,t={}){let s=[];return typeof e!="string"&&(_.isArray(e)===!0?_.each(e,r=>{s[r.name]=new r.inyectar}):_.isObject(e)===!0?s[e.name]=new e.inyectar:s.push(e)),this.mainRegion=new Ze({el:this.el,...t}),this.currentSubapp=new i({region:this.mainRegion,services:s,App:this}),this.currentSubapp},confirmaApp(i){const{message:e,callback:t,title:s="¿Confirmar?",icon:r="warning"}=i;Swal.fire({title:s,text:e,icon:r,showCancelButton:!0,confirmButtonColor:"#2dce89",cancelButtonColor:"#fc8c72",confirmButtonText:"SI, Continuar!"}).then(n=>{t(n.isConfirmed)})},syncroRequest(i){const{url:e,data:t={},callback:s,silent:r=!1}=i,n=document.querySelector("[name='csrf-token']").getAttribute("content");Backbone.ajax({type:"POST",dataType:"json",url:e,data:t,cache:!1,contentType:"application/x-www-form-urlencoded",processData:!0,timeout:52400,beforeSend:o=>{r==!1&&k.show(),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.length>0&&o.setRequestHeader("Authorization","Bearer "+n)},success:o=>(r==!1&&k.hide(),s(o)),error:o=>{const a=_.keys(o);return r==!1&&k.hide(),_.indexOf(a,"responseText")!==-1?(console.log(o.responseText),this.trigger("alert:error",{message:o.responseText})):(console.log(o),this.trigger("alert:error",{message:o})),s(!1)}})},renderModal(i={}){const{title:e,view:t,options:s=!1}=i,r=$("#modalComponent");this.Modal||(this.Modal=new bootstrap.Modal(document.getElementById("modalComponent"),{keyboard:!0,backdrop:"static"})),r.find("#mdl_set_title").text(e),r.find("#mdl_set_footer").css("display","none"),s&&r.find(".modal-dialog").addClass(s.bootstrapSize),r.find("#mdl_set_body").html(t.render().$el),this.Modal.show(),s&&(this.Modal.on("hidden.bs.modal",n=>t.remove()),r.find(".close").addClass("d-none"))},closeModal(i){this.Modal&&(this.Modal.hide(),this.Modal=null),i&&i.remove()},url(i="",e=void 0){return this.kumbiaURL((e??"")+"/"+i)},kumbiaURL:i=>(_.isUndefined(i)===!0&&(i=""),gt.path+i),ajaxKumbia(i={}){const{url:e,data:t={},callback:s,silent:r=!1}=i,n=document.querySelector("[name='csrf-token']").getAttribute("content");$.ajax({type:"POST",data:t,url:this.kumbiaURL(e),dataType:"html",processData:!0,contentType:"application/x-www-form-urlencoded",cache:!1,beforeSend:o=>{r==!1&&k.show(),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.length>0&&o.setRequestHeader("Authorization","Bearer "+n)}}).done(o=>(r==!1&&k.hide(),s(o))).fail(o=>(r==!1&&k.hide(),this.trigger("alert:error",{message:o.responseText}),s(!1))).always(()=>{r==!1&&k.hide()})},downLoadFile(i){const{url:e,filename:t}=i,s=document.createElement("a");s.href=this.kumbiaURL(e+"/"+t),s.download=t,console.log(s),s.click()},uploadFile(i){const{url:e,data:t,callback:s,silent:r=!1}=i;let n;t instanceof FormData?n=t:(n=new FormData,n.append(t.name,t.file));const o=document.querySelector("[name='csrf-token']").getAttribute("content");Backbone.ajax({url:e,type:"POST",dataType:"json",data:n,cache:!1,contentType:!1,processData:!1,beforeSend:a=>{r==!1&&k.show(),a.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.length>0&&a.setRequestHeader("Authorization","Bearer "+o)},success:a=>(r==!1&&k.hide(),s(a)),error:a=>{const l=_.keys(a);return console.log(a),r==!1&&k.hide(),_.indexOf(l,"responseText")!==-1?this.trigger("alert:error",{message:a.responseText}):this.trigger("alert:error",{message:a}),s(!1)}})}};class vt{constructor(e){j(this,"App",null);j(this,"currentController",null);j(this,"region",null);j(this,"layout",null);this.currentController=void 0,this.region=e.region,this.App=e.App}startController(e){return this.currentController&&this.currentController instanceof e?this.currentController:(this.currentController&&this.currentController.destroy&&this.currentController.destroy(),this.currentController=new e({region:this.region,App:this.App}),this.currentController)}}const _t={name:null,type:"text",info:void 0,label:void 0,placeholder:void 0,disabled:!1,readonly:!1,order:1,form:"inputText",grupo:1,target:-1,valor:"",event:void 0,data:void 0,datemax:"",searchType:!1,search:"",className:""};class bt extends Backbone.Model{constructor(e={}){super(e)}get idAttribute(){return"name"}get defaults(){return{..._t}}}/*! choices.js v11.1.0 | © 2025 Josh Johnson | https://github.com/jshjohnson/Choices#readme */var ge=function(i,e){return ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r])},ge(i,e)};function Qe(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ge(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var x=function(){return x=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++){t=arguments[s];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},x.apply(this,arguments)};function yt(i,e,t){for(var s=0,r=e.length,n;s<r;s++)(n||!(s in e))&&(n||(n=Array.prototype.slice.call(e,0,s)),n[s]=e[s]);return i.concat(n||Array.prototype.slice.call(e))}var C={ADD_CHOICE:"ADD_CHOICE",REMOVE_CHOICE:"REMOVE_CHOICE",FILTER_CHOICES:"FILTER_CHOICES",ACTIVATE_CHOICES:"ACTIVATE_CHOICES",CLEAR_CHOICES:"CLEAR_CHOICES",ADD_GROUP:"ADD_GROUP",ADD_ITEM:"ADD_ITEM",REMOVE_ITEM:"REMOVE_ITEM",HIGHLIGHT_ITEM:"HIGHLIGHT_ITEM"},O={showDropdown:"showDropdown",hideDropdown:"hideDropdown",change:"change",choice:"choice",search:"search",addItem:"addItem",removeItem:"removeItem",highlightItem:"highlightItem",highlightChoice:"highlightChoice",unhighlightItem:"unhighlightItem"},A={TAB_KEY:9,SHIFT_KEY:16,BACK_KEY:46,DELETE_KEY:8,ENTER_KEY:13,A_KEY:65,ESC_KEY:27,UP_KEY:38,DOWN_KEY:40,PAGE_UP_KEY:33,PAGE_DOWN_KEY:34},Et=["fuseOptions","classNames"],U={Text:"text",SelectOne:"select-one",SelectMultiple:"select-multiple"},Le=function(i){return{type:C.ADD_CHOICE,choice:i}},Ct=function(i){return{type:C.REMOVE_CHOICE,choice:i}},wt=function(i){return{type:C.FILTER_CHOICES,results:i}},St=function(i){return{type:C.ACTIVATE_CHOICES,active:i}},It=function(i){return{type:C.ADD_GROUP,group:i}},De=function(i){return{type:C.ADD_ITEM,item:i}},ke=function(i){return{type:C.REMOVE_ITEM,item:i}},ae=function(i,e){return{type:C.HIGHLIGHT_ITEM,item:i,highlighted:e}},At=function(i,e){return Math.floor(Math.random()*(e-i)+i)},Ne=function(i){return Array.from({length:i},function(){return At(0,36).toString(36)}).join("")},Tt=function(i,e){var t=i.id||i.name&&"".concat(i.name,"-").concat(Ne(2))||Ne(4);return t=t.replace(/(:|\.|\[|\]|,)/g,""),t="".concat(e,"-").concat(t),t},Ot=function(i,e,t){t===void 0&&(t=1);for(var s="".concat(t>0?"next":"previous","ElementSibling"),r=i[s];r;){if(r.matches(e))return r;r=r[s]}return null},xt=function(i,e,t){t===void 0&&(t=1);var s;return t>0?s=e.scrollTop+e.offsetHeight>=i.offsetTop+i.offsetHeight:s=i.offsetTop>=e.scrollTop,s},he=function(i){if(typeof i!="string"){if(i==null)return"";if(typeof i=="object"){if("raw"in i)return he(i.raw);if("trusted"in i)return i.trusted}return i}return i.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;")},Mt=(function(){var i=document.createElement("div");return function(e){i.innerHTML=e.trim();for(var t=i.children[0];i.firstChild;)i.removeChild(i.firstChild);return t}})(),se=function(i,e){return typeof i=="function"?i(he(e),e):i},Pe=function(i){return typeof i=="function"?i():i},Y=function(i){if(typeof i=="string")return i;if(typeof i=="object"){if("trusted"in i)return i.trusted;if("raw"in i)return i.raw}return""},et=function(i){if(typeof i=="string")return i;if(typeof i=="object"){if("escaped"in i)return i.escaped;if("trusted"in i)return i.trusted}return""},Ae=function(i,e){return i?et(e):he(e)},B=function(i,e,t){i.innerHTML=Ae(e,t)},Lt=function(i,e){var t=i.value,s=i.label,r=s===void 0?t:s,n=e.value,o=e.label,a=o===void 0?n:o;return Y(r).localeCompare(Y(a),[],{sensitivity:"base",ignorePunctuation:!0,numeric:!0})},Dt=function(i,e){return i.rank-e.rank},kt=function(i,e,t){t===void 0&&(t=null);var s=new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0});return i.dispatchEvent(s)},Nt=function(i,e){var t=Object.keys(i).sort(),s=Object.keys(e).sort();return t.filter(function(r){return s.indexOf(r)<0})},ue=function(i){return Array.isArray(i)?i:[i]},ee=function(i){return i&&Array.isArray(i)?i.map(function(e){return".".concat(e)}).join(""):".".concat(i)},v=function(i,e){var t;(t=i.classList).add.apply(t,ue(e))},P=function(i,e){var t;(t=i.classList).remove.apply(t,ue(e))},Pt=function(i){if(typeof i<"u")try{return JSON.parse(i)}catch{return i}return{}},Rt=function(i,e,t){var s=i.itemEl;s&&(P(s,t),v(s,e))},$t=(function(){function i(e){var t=e.element,s=e.type,r=e.classNames;this.element=t,this.classNames=r,this.type=s,this.isActive=!1}return i.prototype.show=function(){return v(this.element,this.classNames.activeState),this.element.setAttribute("aria-expanded","true"),this.isActive=!0,this},i.prototype.hide=function(){return P(this.element,this.classNames.activeState),this.element.setAttribute("aria-expanded","false"),this.isActive=!1,this},i})(),Re=(function(){function i(e){var t=e.element,s=e.type,r=e.classNames,n=e.position;this.element=t,this.classNames=r,this.type=s,this.position=n,this.isOpen=!1,this.isFlipped=!1,this.isDisabled=!1,this.isLoading=!1}return i.prototype.shouldFlip=function(e,t){var s=!1;return this.position==="auto"?s=this.element.getBoundingClientRect().top-t>=0&&!window.matchMedia("(min-height: ".concat(e+1,"px)")).matches:this.position==="top"&&(s=!0),s},i.prototype.setActiveDescendant=function(e){this.element.setAttribute("aria-activedescendant",e)},i.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")},i.prototype.open=function(e,t){v(this.element,this.classNames.openState),this.element.setAttribute("aria-expanded","true"),this.isOpen=!0,this.shouldFlip(e,t)&&(v(this.element,this.classNames.flippedState),this.isFlipped=!0)},i.prototype.close=function(){P(this.element,this.classNames.openState),this.element.setAttribute("aria-expanded","false"),this.removeActiveDescendant(),this.isOpen=!1,this.isFlipped&&(P(this.element,this.classNames.flippedState),this.isFlipped=!1)},i.prototype.addFocusState=function(){v(this.element,this.classNames.focusState)},i.prototype.removeFocusState=function(){P(this.element,this.classNames.focusState)},i.prototype.enable=function(){P(this.element,this.classNames.disabledState),this.element.removeAttribute("aria-disabled"),this.type===U.SelectOne&&this.element.setAttribute("tabindex","0"),this.isDisabled=!1},i.prototype.disable=function(){v(this.element,this.classNames.disabledState),this.element.setAttribute("aria-disabled","true"),this.type===U.SelectOne&&this.element.setAttribute("tabindex","-1"),this.isDisabled=!0},i.prototype.wrap=function(e){var t=this.element,s=e.parentNode;s&&(e.nextSibling?s.insertBefore(t,e.nextSibling):s.appendChild(t)),t.appendChild(e)},i.prototype.unwrap=function(e){var t=this.element,s=t.parentNode;s&&(s.insertBefore(e,t),s.removeChild(t))},i.prototype.addLoadingState=function(){v(this.element,this.classNames.loadingState),this.element.setAttribute("aria-busy","true"),this.isLoading=!0},i.prototype.removeLoadingState=function(){P(this.element,this.classNames.loadingState),this.element.removeAttribute("aria-busy"),this.isLoading=!1},i})(),Ft=(function(){function i(e){var t=e.element,s=e.type,r=e.classNames,n=e.preventPaste;this.element=t,this.type=s,this.classNames=r,this.preventPaste=n,this.isFocussed=this.element.isEqualNode(document.activeElement),this.isDisabled=t.disabled,this._onPaste=this._onPaste.bind(this),this._onInput=this._onInput.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}return Object.defineProperty(i.prototype,"placeholder",{set:function(e){this.element.placeholder=e},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this.element.value},set:function(e){this.element.value=e},enumerable:!1,configurable:!0}),i.prototype.addEventListeners=function(){var e=this.element;e.addEventListener("paste",this._onPaste),e.addEventListener("input",this._onInput,{passive:!0}),e.addEventListener("focus",this._onFocus,{passive:!0}),e.addEventListener("blur",this._onBlur,{passive:!0})},i.prototype.removeEventListeners=function(){var e=this.element;e.removeEventListener("input",this._onInput),e.removeEventListener("paste",this._onPaste),e.removeEventListener("focus",this._onFocus),e.removeEventListener("blur",this._onBlur)},i.prototype.enable=function(){var e=this.element;e.removeAttribute("disabled"),this.isDisabled=!1},i.prototype.disable=function(){var e=this.element;e.setAttribute("disabled",""),this.isDisabled=!0},i.prototype.focus=function(){this.isFocussed||this.element.focus()},i.prototype.blur=function(){this.isFocussed&&this.element.blur()},i.prototype.clear=function(e){return e===void 0&&(e=!0),this.element.value="",e&&this.setWidth(),this},i.prototype.setWidth=function(){var e=this.element;e.style.minWidth="".concat(e.placeholder.length+1,"ch"),e.style.width="".concat(e.value.length+1,"ch")},i.prototype.setActiveDescendant=function(e){this.element.setAttribute("aria-activedescendant",e)},i.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")},i.prototype._onInput=function(){this.type!==U.SelectOne&&this.setWidth()},i.prototype._onPaste=function(e){this.preventPaste&&e.preventDefault()},i.prototype._onFocus=function(){this.isFocussed=!0},i.prototype._onBlur=function(){this.isFocussed=!1},i})(),Ht=4,$e=(function(){function i(e){var t=e.element;this.element=t,this.scrollPos=this.element.scrollTop,this.height=this.element.offsetHeight}return i.prototype.prepend=function(e){var t=this.element.firstElementChild;t?this.element.insertBefore(e,t):this.element.append(e)},i.prototype.scrollToTop=function(){this.element.scrollTop=0},i.prototype.scrollToChildElement=function(e,t){var s=this;if(e){var r=this.element.offsetHeight,n=this.element.scrollTop+r,o=e.offsetHeight,a=e.offsetTop+o,l=t>0?this.element.scrollTop+a-n:e.offsetTop;requestAnimationFrame(function(){s._animateScroll(l,t)})}},i.prototype._scrollDown=function(e,t,s){var r=(s-e)/t,n=r>1?r:1;this.element.scrollTop=e+n},i.prototype._scrollUp=function(e,t,s){var r=(e-s)/t,n=r>1?r:1;this.element.scrollTop=e-n},i.prototype._animateScroll=function(e,t){var s=this,r=Ht,n=this.element.scrollTop,o=!1;t>0?(this._scrollDown(n,r,e),n<e&&(o=!0)):(this._scrollUp(n,r,e),n>e&&(o=!0)),o&&requestAnimationFrame(function(){s._animateScroll(e,t)})},i})(),tt=(function(){function i(e){var t=e.element,s=e.classNames;this.element=t,this.classNames=s,this.isDisabled=!1}return Object.defineProperty(i.prototype,"isActive",{get:function(){return this.element.dataset.choice==="active"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dir",{get:function(){return this.element.dir},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this.element.value},set:function(e){this.element.setAttribute("value",e),this.element.value=e},enumerable:!1,configurable:!0}),i.prototype.conceal=function(){var e=this.element;v(e,this.classNames.input),e.hidden=!0,e.tabIndex=-1;var t=e.getAttribute("style");t&&e.setAttribute("data-choice-orig-style",t),e.setAttribute("data-choice","active")},i.prototype.reveal=function(){var e=this.element;P(e,this.classNames.input),e.hidden=!1,e.removeAttribute("tabindex");var t=e.getAttribute("data-choice-orig-style");t?(e.removeAttribute("data-choice-orig-style"),e.setAttribute("style",t)):e.removeAttribute("style"),e.removeAttribute("data-choice")},i.prototype.enable=function(){this.element.removeAttribute("disabled"),this.element.disabled=!1,this.isDisabled=!1},i.prototype.disable=function(){this.element.setAttribute("disabled",""),this.element.disabled=!0,this.isDisabled=!0},i.prototype.triggerEvent=function(e,t){kt(this.element,e,t||{})},i})(),jt=(function(i){Qe(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e})(tt),ie=function(i,e){return e===void 0&&(e=!0),typeof i>"u"?e:!!i},it=function(i){if(typeof i=="string"&&(i=i.split(" ").filter(function(e){return e.length})),Array.isArray(i)&&i.length)return i},N=function(i,e,t){if(t===void 0&&(t=!0),typeof i=="string"){var s=he(i),r=t||s===i?i:{escaped:s,raw:i},n=N({value:i,label:r,selected:!0},!1);return n}var o=i;if("choices"in o){if(!e)throw new TypeError("optGroup is not allowed");var a=o,l=a.choices.map(function(f){return N(f,!1)}),u={id:0,label:Y(a.label)||a.value,active:!!l.length,disabled:!!a.disabled,choices:l};return u}var c=o,h={id:0,group:null,score:0,rank:0,value:c.value,label:c.label||c.value,active:ie(c.active),selected:ie(c.selected,!1),disabled:ie(c.disabled,!1),placeholder:ie(c.placeholder,!1),highlighted:!1,labelClass:it(c.labelClass),labelDescription:c.labelDescription,customProperties:c.customProperties};return h},Bt=function(i){return i.tagName==="INPUT"},st=function(i){return i.tagName==="SELECT"},Kt=function(i){return i.tagName==="OPTION"},Vt=function(i){return i.tagName==="OPTGROUP"},qt=(function(i){Qe(e,i);function e(t){var s=t.element,r=t.classNames,n=t.template,o=t.extractPlaceholder,a=i.call(this,{element:s,classNames:r})||this;return a.template=n,a.extractPlaceholder=o,a}return Object.defineProperty(e.prototype,"placeholderOption",{get:function(){return this.element.querySelector('option[value=""]')||this.element.querySelector("option[placeholder]")},enumerable:!1,configurable:!0}),e.prototype.addOptions=function(t){var s=this,r=document.createDocumentFragment();t.forEach(function(n){var o=n;if(!o.element){var a=s.template(o);r.appendChild(a),o.element=a}}),this.element.appendChild(r)},e.prototype.optionsAsChoices=function(){var t=this,s=[];return this.element.querySelectorAll(":scope > option, :scope > optgroup").forEach(function(r){Kt(r)?s.push(t._optionToChoice(r)):Vt(r)&&s.push(t._optgroupToChoice(r))}),s},e.prototype._optionToChoice=function(t){return!t.hasAttribute("value")&&t.hasAttribute("placeholder")&&(t.setAttribute("value",""),t.value=""),{id:0,group:null,score:0,rank:0,value:t.value,label:t.label,element:t,active:!0,selected:this.extractPlaceholder?t.selected:t.hasAttribute("selected"),disabled:t.disabled,highlighted:!1,placeholder:this.extractPlaceholder&&(!t.value||t.hasAttribute("placeholder")),labelClass:typeof t.dataset.labelClass<"u"?it(t.dataset.labelClass):void 0,labelDescription:typeof t.dataset.labelDescription<"u"?t.dataset.labelDescription:void 0,customProperties:Pt(t.dataset.customProperties)}},e.prototype._optgroupToChoice=function(t){var s=this,r=t.querySelectorAll("option"),n=Array.from(r).map(function(o){return s._optionToChoice(o)});return{id:0,label:t.label||"",element:t,active:!!n.length,disabled:t.disabled,choices:n}},e})(tt),Ut={containerOuter:["choices"],containerInner:["choices__inner"],input:["choices__input"],inputCloned:["choices__input--cloned"],list:["choices__list"],listItems:["choices__list--multiple"],listSingle:["choices__list--single"],listDropdown:["choices__list--dropdown"],item:["choices__item"],itemSelectable:["choices__item--selectable"],itemDisabled:["choices__item--disabled"],itemChoice:["choices__item--choice"],description:["choices__description"],placeholder:["choices__placeholder"],group:["choices__group"],groupHeading:["choices__heading"],button:["choices__button"],activeState:["is-active"],focusState:["is-focused"],openState:["is-open"],disabledState:["is-disabled"],highlightedState:["is-highlighted"],selectedState:["is-selected"],flippedState:["is-flipped"],loadingState:["is-loading"],notice:["choices__notice"],addChoice:["choices__item--selectable","add-choice"],noResults:["has-no-results"],noChoices:["has-no-choices"]},Fe={items:[],choices:[],silent:!1,renderChoiceLimit:-1,maxItemCount:-1,closeDropdownOnSelect:"auto",singleModeForMultiSelect:!1,addChoices:!1,addItems:!0,addItemFilter:function(i){return!!i&&i!==""},removeItems:!0,removeItemButton:!1,removeItemButtonAlignLeft:!1,editItems:!1,allowHTML:!1,allowHtmlUserInput:!1,duplicateItemsAllowed:!0,delimiter:",",paste:!0,searchEnabled:!0,searchChoices:!0,searchFloor:1,searchResultLimit:4,searchFields:["label","value"],position:"auto",resetScrollPosition:!0,shouldSort:!0,shouldSortItems:!1,sorter:Lt,shadowRoot:null,placeholder:!0,placeholderValue:null,searchPlaceholderValue:null,prependValue:null,appendValue:null,renderSelectedChoices:"auto",loadingText:"Loading...",noResultsText:"No results found",noChoicesText:"No choices to choose from",itemSelectText:"Press to select",uniqueItemText:"Only unique values can be added",customAddItemText:"Only values matching specific conditions can be added",addItemText:function(i){return'Press Enter to add <b>"'.concat(i,'"</b>')},removeItemIconText:function(){return"Remove item"},removeItemLabelText:function(i){return"Remove item: ".concat(i)},maxItemText:function(i){return"Only ".concat(i," values can be added")},valueComparer:function(i,e){return i===e},fuseOptions:{includeScore:!0},labelId:"",callbackOnInit:null,callbackOnCreateTemplates:null,classNames:Ut,appendGroupInSearch:!1},He=function(i){var e=i.itemEl;e&&(e.remove(),i.itemEl=void 0)};function zt(i,e,t){var s=i,r=!0;switch(e.type){case C.ADD_ITEM:{e.item.selected=!0;var n=e.item.element;n&&(n.selected=!0,n.setAttribute("selected","")),s.push(e.item);break}case C.REMOVE_ITEM:{e.item.selected=!1;var n=e.item.element;if(n){n.selected=!1,n.removeAttribute("selected");var o=n.parentElement;o&&st(o)&&o.type===U.SelectOne&&(o.value="")}He(e.item),s=s.filter(function(c){return c.id!==e.item.id});break}case C.REMOVE_CHOICE:{He(e.choice),s=s.filter(function(u){return u.id!==e.choice.id});break}case C.HIGHLIGHT_ITEM:{var a=e.highlighted,l=s.find(function(u){return u.id===e.item.id});l&&l.highlighted!==a&&(l.highlighted=a,t&&Rt(l,a?t.classNames.highlightedState:t.classNames.selectedState,a?t.classNames.selectedState:t.classNames.highlightedState));break}default:{r=!1;break}}return{state:s,update:r}}function Gt(i,e){var t=i,s=!0;switch(e.type){case C.ADD_GROUP:{t.push(e.group);break}case C.CLEAR_CHOICES:{t=[];break}default:{s=!1;break}}return{state:t,update:s}}function Wt(i,e,t){var s=i,r=!0;switch(e.type){case C.ADD_CHOICE:{s.push(e.choice);break}case C.REMOVE_CHOICE:{e.choice.choiceEl=void 0,e.choice.group&&(e.choice.group.choices=e.choice.group.choices.filter(function(o){return o.id!==e.choice.id})),s=s.filter(function(o){return o.id!==e.choice.id});break}case C.ADD_ITEM:case C.REMOVE_ITEM:{e.item.choiceEl=void 0;break}case C.FILTER_CHOICES:{var n=[];e.results.forEach(function(o){n[o.item.id]=o}),s.forEach(function(o){var a=n[o.id];a!==void 0?(o.score=a.score,o.rank=a.rank,o.active=!0):(o.score=0,o.rank=0,o.active=!1),t&&t.appendGroupInSearch&&(o.choiceEl=void 0)});break}case C.ACTIVATE_CHOICES:{s.forEach(function(o){o.active=e.active,t&&t.appendGroupInSearch&&(o.choiceEl=void 0)});break}case C.CLEAR_CHOICES:{s=[];break}default:{r=!1;break}}return{state:s,update:r}}var je={groups:Gt,items:zt,choices:Wt},Yt=(function(){function i(e){this._state=this.defaultState,this._listeners=[],this._txn=0,this._context=e}return Object.defineProperty(i.prototype,"defaultState",{get:function(){return{groups:[],items:[],choices:[]}},enumerable:!1,configurable:!0}),i.prototype.changeSet=function(e){return{groups:e,items:e,choices:e}},i.prototype.reset=function(){this._state=this.defaultState;var e=this.changeSet(!0);this._txn?this._changeSet=e:this._listeners.forEach(function(t){return t(e)})},i.prototype.subscribe=function(e){return this._listeners.push(e),this},i.prototype.dispatch=function(e){var t=this,s=this._state,r=!1,n=this._changeSet||this.changeSet(!1);Object.keys(je).forEach(function(o){var a=je[o](s[o],e,t._context);a.update&&(r=!0,n[o]=!0,s[o]=a.state)}),r&&(this._txn?this._changeSet=n:this._listeners.forEach(function(o){return o(n)}))},i.prototype.withTxn=function(e){this._txn++;try{e()}finally{if(this._txn=Math.max(0,this._txn-1),!this._txn){var t=this._changeSet;t&&(this._changeSet=void 0,this._listeners.forEach(function(s){return s(t)}))}}},Object.defineProperty(i.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this.state.items},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"highlightedActiveItems",{get:function(){return this.items.filter(function(e){return e.active&&e.highlighted})},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"choices",{get:function(){return this.state.choices},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"activeChoices",{get:function(){return this.choices.filter(function(e){return e.active})},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"searchableChoices",{get:function(){return this.choices.filter(function(e){return!e.disabled&&!e.placeholder})},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groups",{get:function(){return this.state.groups},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"activeGroups",{get:function(){var e=this;return this.state.groups.filter(function(t){var s=t.active&&!t.disabled,r=e.state.choices.some(function(n){return n.active&&!n.disabled});return s&&r},[])},enumerable:!1,configurable:!0}),i.prototype.inTxn=function(){return this._txn>0},i.prototype.getChoiceById=function(e){return this.activeChoices.find(function(t){return t.id===e})},i.prototype.getGroupById=function(e){return this.groups.find(function(t){return t.id===e})},i})(),I={noChoices:"no-choices",noResults:"no-results",addChoice:"add-choice",generic:""};function Xt(i,e,t){return(e=Zt(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Be(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,s)}return t}function Z(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Be(Object(t),!0).forEach(function(s){Xt(i,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Be(Object(t)).forEach(function(s){Object.defineProperty(i,s,Object.getOwnPropertyDescriptor(t,s))})}return i}function Jt(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var s=t.call(i,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function Zt(i){var e=Jt(i,"string");return typeof e=="symbol"?e:e+""}function K(i){return Array.isArray?Array.isArray(i):ot(i)==="[object Array]"}function Qt(i){if(typeof i=="string")return i;let e=i+"";return e=="0"&&1/i==-1/0?"-0":e}function ei(i){return i==null?"":Qt(i)}function R(i){return typeof i=="string"}function rt(i){return typeof i=="number"}function ti(i){return i===!0||i===!1||ii(i)&&ot(i)=="[object Boolean]"}function nt(i){return typeof i=="object"}function ii(i){return nt(i)&&i!==null}function M(i){return i!=null}function fe(i){return!i.trim().length}function ot(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}const si="Incorrect 'index' type",ri=i=>`Invalid value for key ${i}`,ni=i=>`Pattern length exceeds max of ${i}.`,oi=i=>`Missing ${i} property in key`,ai=i=>`Property 'weight' in key '${i}' must be a positive integer`,Ke=Object.prototype.hasOwnProperty;class li{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(s=>{let r=at(s);this._keys.push(r),this._keyMap[r.id]=r,t+=r.weight}),this._keys.forEach(s=>{s.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function at(i){let e=null,t=null,s=null,r=1,n=null;if(R(i)||K(i))s=i,e=Ve(i),t=ve(i);else{if(!Ke.call(i,"name"))throw new Error(oi("name"));const o=i.name;if(s=o,Ke.call(i,"weight")&&(r=i.weight,r<=0))throw new Error(ai(o));e=Ve(o),t=ve(o),n=i.getFn}return{path:e,id:t,weight:r,src:s,getFn:n}}function Ve(i){return K(i)?i:i.split(".")}function ve(i){return K(i)?i.join("."):i}function ci(i,e){let t=[],s=!1;const r=(n,o,a)=>{if(M(n))if(!o[a])t.push(n);else{let l=o[a];const u=n[l];if(!M(u))return;if(a===o.length-1&&(R(u)||rt(u)||ti(u)))t.push(ei(u));else if(K(u)){s=!0;for(let c=0,h=u.length;c<h;c+=1)r(u[c],o,a+1)}else o.length&&r(u,o,a+1)}};return r(i,R(e)?e.split("."):e,0),s?t:t[0]}const hi={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ui={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(i,e)=>i.score===e.score?i.idx<e.idx?-1:1:i.score<e.score?-1:1},di={location:0,threshold:.6,distance:100},fi={useExtendedSearch:!1,getFn:ci,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var g=Z(Z(Z(Z({},ui),hi),di),fi);const pi=/[^ ]+/g;function mi(i=1,e=3){const t=new Map,s=Math.pow(10,e);return{get(r){const n=r.match(pi).length;if(t.has(n))return t.get(n);const o=1/Math.pow(n,.5*i),a=parseFloat(Math.round(o*s)/s);return t.set(n,a),a},clear(){t.clear()}}}class Te{constructor({getFn:e=g.getFn,fieldNormWeight:t=g.fieldNormWeight}={}){this.norm=mi(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,s)=>{this._keysMap[t.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,R(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();R(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,s=this.size();t<s;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!M(e)||fe(e))return;let s={v:e,i:t,n:this.norm.get(e)};this.records.push(s)}_addObject(e,t){let s={i:t,$:{}};this.keys.forEach((r,n)=>{let o=r.getFn?r.getFn(e):this.getFn(e,r.path);if(M(o)){if(K(o)){let a=[];const l=[{nestedArrIndex:-1,value:o}];for(;l.length;){const{nestedArrIndex:u,value:c}=l.pop();if(M(c))if(R(c)&&!fe(c)){let h={v:c,i:u,n:this.norm.get(c)};a.push(h)}else K(c)&&c.forEach((h,f)=>{l.push({nestedArrIndex:f,value:h})})}s.$[n]=a}else if(R(o)&&!fe(o)){let a={v:o,n:this.norm.get(o)};s.$[n]=a}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function lt(i,e,{getFn:t=g.getFn,fieldNormWeight:s=g.fieldNormWeight}={}){const r=new Te({getFn:t,fieldNormWeight:s});return r.setKeys(i.map(at)),r.setSources(e),r.create(),r}function gi(i,{getFn:e=g.getFn,fieldNormWeight:t=g.fieldNormWeight}={}){const{keys:s,records:r}=i,n=new Te({getFn:e,fieldNormWeight:t});return n.setKeys(s),n.setIndexRecords(r),n}function le(i,{errors:e=0,currentLocation:t=0,expectedLocation:s=0,distance:r=g.distance,ignoreLocation:n=g.ignoreLocation}={}){const o=e/i.length;if(n)return o;const a=Math.abs(s-t);return r?o+a/r:a?1:o}function vi(i=[],e=g.minMatchCharLength){let t=[],s=-1,r=-1,n=0;for(let o=i.length;n<o;n+=1){let a=i[n];a&&s===-1?s=n:!a&&s!==-1&&(r=n-1,r-s+1>=e&&t.push([s,r]),s=-1)}return i[n-1]&&n-s>=e&&t.push([s,n-1]),t}const W=32;function _i(i,e,t,{location:s=g.location,distance:r=g.distance,threshold:n=g.threshold,findAllMatches:o=g.findAllMatches,minMatchCharLength:a=g.minMatchCharLength,includeMatches:l=g.includeMatches,ignoreLocation:u=g.ignoreLocation}={}){if(e.length>W)throw new Error(ni(W));const c=e.length,h=i.length,f=Math.max(0,Math.min(s,h));let p=n,d=f;const m=a>1||l,y=m?Array(h):[];let b;for(;(b=i.indexOf(e,d))>-1;){let T=le(e,{currentLocation:b,expectedLocation:f,distance:r,ignoreLocation:u});if(p=Math.min(T,p),d=b+c,m){let V=0;for(;V<c;)y[b+V]=1,V+=1}}d=-1;let S=[],w=1,L=c+h;const F=1<<c-1;for(let T=0;T<c;T+=1){let V=0,q=L;for(;V<q;)le(e,{errors:T,currentLocation:f+q,expectedLocation:f,distance:r,ignoreLocation:u})<=p?V=q:L=q,q=Math.floor((L-V)/2+V);L=q;let Oe=Math.max(1,f-q+1),de=o?h:Math.min(f+q,h)+c,J=Array(de+2);J[de+1]=(1<<T)-1;for(let D=de;D>=Oe;D-=1){let ne=D-1,xe=t[i.charAt(ne)];if(m&&(y[ne]=+!!xe),J[D]=(J[D+1]<<1|1)&xe,T&&(J[D]|=(S[D+1]|S[D])<<1|1|S[D+1]),J[D]&F&&(w=le(e,{errors:T,currentLocation:ne,expectedLocation:f,distance:r,ignoreLocation:u}),w<=p)){if(p=w,d=ne,d<=f)break;Oe=Math.max(1,2*f-d)}}if(le(e,{errors:T+1,currentLocation:f,expectedLocation:f,distance:r,ignoreLocation:u})>p)break;S=J}const H={isMatch:d>=0,score:Math.max(.001,w)};if(m){const T=vi(y,a);T.length?l&&(H.indices=T):H.isMatch=!1}return H}function bi(i){let e={};for(let t=0,s=i.length;t<s;t+=1){const r=i.charAt(t);e[r]=(e[r]||0)|1<<s-t-1}return e}class ct{constructor(e,{location:t=g.location,threshold:s=g.threshold,distance:r=g.distance,includeMatches:n=g.includeMatches,findAllMatches:o=g.findAllMatches,minMatchCharLength:a=g.minMatchCharLength,isCaseSensitive:l=g.isCaseSensitive,ignoreLocation:u=g.ignoreLocation}={}){if(this.options={location:t,threshold:s,distance:r,includeMatches:n,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u},this.pattern=l?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(f,p)=>{this.chunks.push({pattern:f,alphabet:bi(f),startIndex:p})},h=this.pattern.length;if(h>W){let f=0;const p=h%W,d=h-p;for(;f<d;)c(this.pattern.substr(f,W),f),f+=W;if(p){const m=h-W;c(this.pattern.substr(m),m)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:s}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let d={isMatch:!0,score:0};return s&&(d.indices=[[0,e.length-1]]),d}const{location:r,distance:n,threshold:o,findAllMatches:a,minMatchCharLength:l,ignoreLocation:u}=this.options;let c=[],h=0,f=!1;this.chunks.forEach(({pattern:d,alphabet:m,startIndex:y})=>{const{isMatch:b,score:S,indices:w}=_i(e,d,m,{location:r+y,distance:n,threshold:o,findAllMatches:a,minMatchCharLength:l,includeMatches:s,ignoreLocation:u});b&&(f=!0),h+=S,b&&w&&(c=[...c,...w])});let p={isMatch:f,score:f?h/this.chunks.length:1};return f&&s&&(p.indices=c),p}}class z{constructor(e){this.pattern=e}static isMultiMatch(e){return qe(e,this.multiRegex)}static isSingleMatch(e){return qe(e,this.singleRegex)}search(){}}function qe(i,e){const t=i.match(e);return t?t[1]:null}class yi extends z{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class Ei extends z{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const s=e.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class Ci extends z{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class wi extends z{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Si extends z{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Ii extends z{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class ht extends z{constructor(e,{location:t=g.location,threshold:s=g.threshold,distance:r=g.distance,includeMatches:n=g.includeMatches,findAllMatches:o=g.findAllMatches,minMatchCharLength:a=g.minMatchCharLength,isCaseSensitive:l=g.isCaseSensitive,ignoreLocation:u=g.ignoreLocation}={}){super(e),this._bitapSearch=new ct(e,{location:t,threshold:s,distance:r,includeMatches:n,findAllMatches:o,minMatchCharLength:a,isCaseSensitive:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class ut extends z{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,s;const r=[],n=this.pattern.length;for(;(s=e.indexOf(this.pattern,t))>-1;)t=s+n,r.push([s,t-1]);const o=!!r.length;return{isMatch:o,score:o?0:1,indices:r}}}const _e=[yi,ut,Ci,wi,Ii,Si,Ei,ht],Ue=_e.length,Ai=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Ti="|";function Oi(i,e={}){return i.split(Ti).map(t=>{let s=t.trim().split(Ai).filter(n=>n&&!!n.trim()),r=[];for(let n=0,o=s.length;n<o;n+=1){const a=s[n];let l=!1,u=-1;for(;!l&&++u<Ue;){const c=_e[u];let h=c.isMultiMatch(a);h&&(r.push(new c(h,e)),l=!0)}if(!l)for(u=-1;++u<Ue;){const c=_e[u];let h=c.isSingleMatch(a);if(h){r.push(new c(h,e));break}}}return r})}const xi=new Set([ht.type,ut.type]);class Mi{constructor(e,{isCaseSensitive:t=g.isCaseSensitive,includeMatches:s=g.includeMatches,minMatchCharLength:r=g.minMatchCharLength,ignoreLocation:n=g.ignoreLocation,findAllMatches:o=g.findAllMatches,location:a=g.location,threshold:l=g.threshold,distance:u=g.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:s,minMatchCharLength:r,findAllMatches:o,ignoreLocation:n,location:a,threshold:l,distance:u},this.pattern=t?e:e.toLowerCase(),this.query=Oi(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:r}=this.options;e=r?e:e.toLowerCase();let n=0,o=[],a=0;for(let l=0,u=t.length;l<u;l+=1){const c=t[l];o.length=0,n=0;for(let h=0,f=c.length;h<f;h+=1){const p=c[h],{isMatch:d,indices:m,score:y}=p.search(e);if(d){if(n+=1,a+=y,s){const b=p.constructor.type;xi.has(b)?o=[...o,...m]:o.push(m)}}else{a=0,n=0,o.length=0;break}}if(n){let h={isMatch:!0,score:a/n};return s&&(h.indices=o),h}}return{isMatch:!1,score:1}}}const be=[];function Li(...i){be.push(...i)}function ye(i,e){for(let t=0,s=be.length;t<s;t+=1){let r=be[t];if(r.condition(i,e))return new r(i,e)}return new ct(i,e)}const ce={AND:"$and",OR:"$or"},Ee={PATH:"$path",PATTERN:"$val"},Ce=i=>!!(i[ce.AND]||i[ce.OR]),Di=i=>!!i[Ee.PATH],ki=i=>!K(i)&&nt(i)&&!Ce(i),ze=i=>({[ce.AND]:Object.keys(i).map(e=>({[e]:i[e]}))});function dt(i,e,{auto:t=!0}={}){const s=r=>{let n=Object.keys(r);const o=Di(r);if(!o&&n.length>1&&!Ce(r))return s(ze(r));if(ki(r)){const l=o?r[Ee.PATH]:n[0],u=o?r[Ee.PATTERN]:r[l];if(!R(u))throw new Error(ri(l));const c={keyId:ve(l),pattern:u};return t&&(c.searcher=ye(u,e)),c}let a={children:[],operator:n[0]};return n.forEach(l=>{const u=r[l];K(u)&&u.forEach(c=>{a.children.push(s(c))})}),a};return Ce(i)||(i=ze(i)),s(i)}function Ni(i,{ignoreFieldNorm:e=g.ignoreFieldNorm}){i.forEach(t=>{let s=1;t.matches.forEach(({key:r,norm:n,score:o})=>{const a=r?r.weight:null;s*=Math.pow(o===0&&a?Number.EPSILON:o,(a||1)*(e?1:n))}),t.score=s})}function Pi(i,e){const t=i.matches;e.matches=[],M(t)&&t.forEach(s=>{if(!M(s.indices)||!s.indices.length)return;const{indices:r,value:n}=s;let o={indices:r,value:n};s.key&&(o.key=s.key.src),s.idx>-1&&(o.refIndex=s.idx),e.matches.push(o)})}function Ri(i,e){e.score=i.score}function $i(i,e,{includeMatches:t=g.includeMatches,includeScore:s=g.includeScore}={}){const r=[];return t&&r.push(Pi),s&&r.push(Ri),i.map(n=>{const{idx:o}=n,a={item:e[o],refIndex:o};return r.length&&r.forEach(l=>{l(n,a)}),a})}class Q{constructor(e,t={},s){this.options=Z(Z({},g),t),this.options.useExtendedSearch,this._keyStore=new li(this.options.keys),this.setCollection(e,s)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof Te))throw new Error(si);this._myIndex=t||lt(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){M(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let s=0,r=this._docs.length;s<r;s+=1){const n=this._docs[s];e(n,s)&&(this.removeAt(s),s-=1,r-=1,t.push(n))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:s,includeScore:r,shouldSort:n,sortFn:o,ignoreFieldNorm:a}=this.options;let l=R(e)?R(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Ni(l,{ignoreFieldNorm:a}),n&&l.sort(o),rt(t)&&t>-1&&(l=l.slice(0,t)),$i(l,this._docs,{includeMatches:s,includeScore:r})}_searchStringList(e){const t=ye(e,this.options),{records:s}=this._myIndex,r=[];return s.forEach(({v:n,i:o,n:a})=>{if(!M(n))return;const{isMatch:l,score:u,indices:c}=t.searchIn(n);l&&r.push({item:n,idx:o,matches:[{score:u,value:n,norm:a,indices:c}]})}),r}_searchLogical(e){const t=dt(e,this.options),s=(a,l,u)=>{if(!a.children){const{keyId:h,searcher:f}=a,p=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(l,h),searcher:f});return p&&p.length?[{idx:u,item:l,matches:p}]:[]}const c=[];for(let h=0,f=a.children.length;h<f;h+=1){const p=a.children[h],d=s(p,l,u);if(d.length)c.push(...d);else if(a.operator===ce.AND)return[]}return c},r=this._myIndex.records,n={},o=[];return r.forEach(({$:a,i:l})=>{if(M(a)){let u=s(t,a,l);u.length&&(n[l]||(n[l]={idx:l,item:a,matches:[]},o.push(n[l])),u.forEach(({matches:c})=>{n[l].matches.push(...c)}))}}),o}_searchObjectList(e){const t=ye(e,this.options),{keys:s,records:r}=this._myIndex,n=[];return r.forEach(({$:o,i:a})=>{if(!M(o))return;let l=[];s.forEach((u,c)=>{l.push(...this._findMatches({key:u,value:o[c],searcher:t}))}),l.length&&n.push({idx:a,item:o,matches:l})}),n}_findMatches({key:e,value:t,searcher:s}){if(!M(t))return[];let r=[];if(K(t))t.forEach(({v:n,i:o,n:a})=>{if(!M(n))return;const{isMatch:l,score:u,indices:c}=s.searchIn(n);l&&r.push({score:u,key:e,value:n,idx:o,norm:a,indices:c})});else{const{v:n,n:o}=t,{isMatch:a,score:l,indices:u}=s.searchIn(n);a&&r.push({score:l,key:e,value:n,norm:o,indices:u})}return r}}Q.version="7.0.0";Q.createIndex=lt;Q.parseIndex=gi;Q.config=g;Q.parseQuery=dt;Li(Mi);var Fi=(function(){function i(e){this._haystack=[],this._fuseOptions=x(x({},e.fuseOptions),{keys:yt([],e.searchFields),includeMatches:!0})}return i.prototype.index=function(e){this._haystack=e,this._fuse&&this._fuse.setCollection(e)},i.prototype.reset=function(){this._haystack=[],this._fuse=void 0},i.prototype.isEmptyIndex=function(){return!this._haystack.length},i.prototype.search=function(e){this._fuse||(this._fuse=new Q(this._haystack,this._fuseOptions));var t=this._fuse.search(e);return t.map(function(s,r){return{item:s.item,score:s.score||0,rank:r+1}})},i})();function Hi(i){return new Fi(i)}var ji=function(i){for(var e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0},pe=function(i,e,t){var s=i.dataset,r=e.customProperties,n=e.labelClass,o=e.labelDescription;n&&(s.labelClass=ue(n).join(" ")),o&&(s.labelDescription=o),t&&r&&(typeof r=="string"?s.customProperties=r:typeof r=="object"&&!ji(r)&&(s.customProperties=JSON.stringify(r)))},Ge=function(i,e,t){var s=e&&i.querySelector("label[for='".concat(e,"']")),r=s&&s.innerText;r&&t.setAttribute("aria-label",r)},Bi={containerOuter:function(i,e,t,s,r,n,o){var a=i.classNames.containerOuter,l=document.createElement("div");return v(l,a),l.dataset.type=n,e&&(l.dir=e),s&&(l.tabIndex=0),t&&(l.setAttribute("role",r?"combobox":"listbox"),r?l.setAttribute("aria-autocomplete","list"):o||Ge(this._docRoot,this.passedElement.element.id,l),l.setAttribute("aria-haspopup","true"),l.setAttribute("aria-expanded","false")),o&&l.setAttribute("aria-labelledby",o),l},containerInner:function(i){var e=i.classNames.containerInner,t=document.createElement("div");return v(t,e),t},itemList:function(i,e){var t=i.searchEnabled,s=i.classNames,r=s.list,n=s.listSingle,o=s.listItems,a=document.createElement("div");return v(a,r),v(a,e?n:o),this._isSelectElement&&t&&a.setAttribute("role","listbox"),a},placeholder:function(i,e){var t=i.allowHTML,s=i.classNames.placeholder,r=document.createElement("div");return v(r,s),B(r,t,e),r},item:function(i,e,t){var s=i.allowHTML,r=i.removeItemButtonAlignLeft,n=i.removeItemIconText,o=i.removeItemLabelText,a=i.classNames,l=a.item,u=a.button,c=a.highlightedState,h=a.itemSelectable,f=a.placeholder,p=Y(e.value),d=document.createElement("div");if(v(d,l),e.labelClass){var m=document.createElement("span");B(m,s,e.label),v(m,e.labelClass),d.appendChild(m)}else B(d,s,e.label);if(d.dataset.item="",d.dataset.id=e.id,d.dataset.value=p,pe(d,e,!0),(e.disabled||this.containerOuter.isDisabled)&&d.setAttribute("aria-disabled","true"),this._isSelectElement&&(d.setAttribute("aria-selected","true"),d.setAttribute("role","option")),e.placeholder&&(v(d,f),d.dataset.placeholder=""),v(d,e.highlighted?c:h),t){e.disabled&&P(d,h),d.dataset.deletable="";var y=document.createElement("button");y.type="button",v(y,u),B(y,!0,se(n,e.value));var b=se(o,e.value);b&&y.setAttribute("aria-label",b),y.dataset.button="",r?d.insertAdjacentElement("afterbegin",y):d.appendChild(y)}return d},choiceList:function(i,e){var t=i.classNames.list,s=document.createElement("div");return v(s,t),e||s.setAttribute("aria-multiselectable","true"),s.setAttribute("role","listbox"),s},choiceGroup:function(i,e){var t=i.allowHTML,s=i.classNames,r=s.group,n=s.groupHeading,o=s.itemDisabled,a=e.id,l=e.label,u=e.disabled,c=Y(l),h=document.createElement("div");v(h,r),u&&v(h,o),h.setAttribute("role","group"),h.dataset.group="",h.dataset.id=a,h.dataset.value=c,u&&h.setAttribute("aria-disabled","true");var f=document.createElement("div");return v(f,n),B(f,t,l||""),h.appendChild(f),h},choice:function(i,e,t,s){var r=i.allowHTML,n=i.classNames,o=n.item,a=n.itemChoice,l=n.itemSelectable,u=n.selectedState,c=n.itemDisabled,h=n.description,f=n.placeholder,p=e.label,d=Y(e.value),m=document.createElement("div");m.id=e.elementId,v(m,o),v(m,a),s&&typeof p=="string"&&(p=Ae(r,p),p+=" (".concat(s,")"),p={trusted:p});var y=m;if(e.labelClass){var b=document.createElement("span");B(b,r,p),v(b,e.labelClass),y=b,m.appendChild(b)}else B(m,r,p);if(e.labelDescription){var S="".concat(e.elementId,"-description");y.setAttribute("aria-describedby",S);var w=document.createElement("span");B(w,r,e.labelDescription),w.id=S,v(w,h),m.appendChild(w)}return e.selected&&v(m,u),e.placeholder&&v(m,f),m.setAttribute("role",e.group?"treeitem":"option"),m.dataset.choice="",m.dataset.id=e.id,m.dataset.value=d,t&&(m.dataset.selectText=t),e.group&&(m.dataset.groupId="".concat(e.group.id)),pe(m,e,!1),e.disabled?(v(m,c),m.dataset.choiceDisabled="",m.setAttribute("aria-disabled","true")):(v(m,l),m.dataset.choiceSelectable=""),m},input:function(i,e){var t=i.classNames,s=t.input,r=t.inputCloned,n=i.labelId,o=document.createElement("input");return o.type="search",v(o,s),v(o,r),o.autocomplete="off",o.autocapitalize="off",o.spellcheck=!1,o.setAttribute("aria-autocomplete","list"),e?o.setAttribute("aria-label",e):n||Ge(this._docRoot,this.passedElement.element.id,o),o},dropdown:function(i){var e=i.classNames,t=e.list,s=e.listDropdown,r=document.createElement("div");return v(r,t),v(r,s),r.setAttribute("aria-expanded","false"),r},notice:function(i,e,t){var s=i.classNames,r=s.item,n=s.itemChoice,o=s.addChoice,a=s.noResults,l=s.noChoices,u=s.notice;t===void 0&&(t=I.generic);var c=document.createElement("div");switch(B(c,!0,e),v(c,r),v(c,n),v(c,u),t){case I.addChoice:v(c,o);break;case I.noResults:v(c,a);break;case I.noChoices:v(c,l);break}return t===I.addChoice&&(c.dataset.choiceSelectable="",c.dataset.choice=""),c},option:function(i){var e=Y(i.label),t=new Option(e,i.value,!1,i.selected);return pe(t,i,!0),t.disabled=i.disabled,i.selected&&t.setAttribute("selected",""),t}},Ki="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style,Vi={},me=function(i){if(i)return i.dataset.id?parseInt(i.dataset.id,10):void 0},te="[data-choice-selectable]",We=(function(){function i(e,t){e===void 0&&(e="[data-choice]"),t===void 0&&(t={});var s=this;this.initialisedOK=void 0,this._hasNonChoicePlaceholder=!1,this._lastAddedChoiceId=0,this._lastAddedGroupId=0;var r=i.defaults;this.config=x(x(x({},r.allOptions),r.options),t),Et.forEach(function(b){s.config[b]=x(x(x({},r.allOptions[b]),r.options[b]),t[b])});var n=this.config;n.silent||this._validateConfig();var o=n.shadowRoot||document.documentElement;this._docRoot=o;var a=typeof e=="string"?o.querySelector(e):e;if(!a||typeof a!="object"||!(Bt(a)||st(a)))throw TypeError(!a&&typeof e=="string"?"Selector ".concat(e," failed to find an element"):"Expected one of the following types text|select-one|select-multiple");var l=a.type,u=l===U.Text;(u||n.maxItemCount!==1)&&(n.singleModeForMultiSelect=!1),n.singleModeForMultiSelect&&(l=U.SelectMultiple);var c=l===U.SelectOne,h=l===U.SelectMultiple,f=c||h;if(this._elementType=l,this._isTextElement=u,this._isSelectOneElement=c,this._isSelectMultipleElement=h,this._isSelectElement=c||h,this._canAddUserChoices=u&&n.addItems||f&&n.addChoices,typeof n.renderSelectedChoices!="boolean"&&(n.renderSelectedChoices=n.renderSelectedChoices==="always"||c),n.closeDropdownOnSelect==="auto"?n.closeDropdownOnSelect=u||c||n.singleModeForMultiSelect:n.closeDropdownOnSelect=ie(n.closeDropdownOnSelect),n.placeholder&&(n.placeholderValue?this._hasNonChoicePlaceholder=!0:a.dataset.placeholder&&(this._hasNonChoicePlaceholder=!0,n.placeholderValue=a.dataset.placeholder)),t.addItemFilter&&typeof t.addItemFilter!="function"){var p=t.addItemFilter instanceof RegExp?t.addItemFilter:new RegExp(t.addItemFilter);n.addItemFilter=p.test.bind(p)}if(this._isTextElement)this.passedElement=new jt({element:a,classNames:n.classNames});else{var d=a;this.passedElement=new qt({element:d,classNames:n.classNames,template:function(b){return s._templates.option(b)},extractPlaceholder:n.placeholder&&!this._hasNonChoicePlaceholder})}if(this.initialised=!1,this._store=new Yt(n),this._currentValue="",n.searchEnabled=!u&&n.searchEnabled||h,this._canSearch=n.searchEnabled,this._isScrollingOnIe=!1,this._highlightPosition=0,this._wasTap=!0,this._placeholderValue=this._generatePlaceholderValue(),this._baseId=Tt(a,"choices-"),this._direction=a.dir,!this._direction){var m=window.getComputedStyle(a).direction,y=window.getComputedStyle(document.documentElement).direction;m!==y&&(this._direction=m)}if(this._idNames={itemChoice:"item-choice"},this._templates=r.templates,this._render=this._render.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onInput=this._onInput.bind(this),this._onClick=this._onClick.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onFormReset=this._onFormReset.bind(this),this._onSelectKey=this._onSelectKey.bind(this),this._onEnterKey=this._onEnterKey.bind(this),this._onEscapeKey=this._onEscapeKey.bind(this),this._onDirectionKey=this._onDirectionKey.bind(this),this._onDeleteKey=this._onDeleteKey.bind(this),this.passedElement.isActive){n.silent||console.warn("Trying to initialise Choices on element already initialised",{element:e}),this.initialised=!0,this.initialisedOK=!1;return}this.init(),this._initialItems=this._store.items.map(function(b){return b.value})}return Object.defineProperty(i,"defaults",{get:function(){return Object.preventExtensions({get options(){return Vi},get allOptions(){return Fe},get templates(){return Bi}})},enumerable:!1,configurable:!0}),i.prototype.init=function(){if(!(this.initialised||this.initialisedOK!==void 0)){this._searcher=Hi(this.config),this._loadChoices(),this._createTemplates(),this._createElements(),this._createStructure(),this._isTextElement&&!this.config.addItems||this.passedElement.element.hasAttribute("disabled")||this.passedElement.element.closest("fieldset:disabled")?this.disable():(this.enable(),this._addEventListeners()),this._initStore(),this.initialised=!0,this.initialisedOK=!0;var e=this.config.callbackOnInit;typeof e=="function"&&e.call(this)}},i.prototype.destroy=function(){this.initialised&&(this._removeEventListeners(),this.passedElement.reveal(),this.containerOuter.unwrap(this.passedElement.element),this._store._listeners=[],this.clearStore(!1),this._stopSearch(),this._templates=i.defaults.templates,this.initialised=!1,this.initialisedOK=void 0)},i.prototype.enable=function(){return this.passedElement.isDisabled&&this.passedElement.enable(),this.containerOuter.isDisabled&&(this._addEventListeners(),this.input.enable(),this.containerOuter.enable()),this},i.prototype.disable=function(){return this.passedElement.isDisabled||this.passedElement.disable(),this.containerOuter.isDisabled||(this._removeEventListeners(),this.input.disable(),this.containerOuter.disable()),this},i.prototype.highlightItem=function(e,t){if(t===void 0&&(t=!0),!e||!e.id)return this;var s=this._store.items.find(function(r){return r.id===e.id});return!s||s.highlighted?this:(this._store.dispatch(ae(s,!0)),t&&this.passedElement.triggerEvent(O.highlightItem,this._getChoiceForOutput(s)),this)},i.prototype.unhighlightItem=function(e,t){if(t===void 0&&(t=!0),!e||!e.id)return this;var s=this._store.items.find(function(r){return r.id===e.id});return!s||!s.highlighted?this:(this._store.dispatch(ae(s,!1)),t&&this.passedElement.triggerEvent(O.unhighlightItem,this._getChoiceForOutput(s)),this)},i.prototype.highlightAll=function(){var e=this;return this._store.withTxn(function(){e._store.items.forEach(function(t){t.highlighted||(e._store.dispatch(ae(t,!0)),e.passedElement.triggerEvent(O.highlightItem,e._getChoiceForOutput(t)))})}),this},i.prototype.unhighlightAll=function(){var e=this;return this._store.withTxn(function(){e._store.items.forEach(function(t){t.highlighted&&(e._store.dispatch(ae(t,!1)),e.passedElement.triggerEvent(O.highlightItem,e._getChoiceForOutput(t)))})}),this},i.prototype.removeActiveItemsByValue=function(e){var t=this;return this._store.withTxn(function(){t._store.items.filter(function(s){return s.value===e}).forEach(function(s){return t._removeItem(s)})}),this},i.prototype.removeActiveItems=function(e){var t=this;return this._store.withTxn(function(){t._store.items.filter(function(s){var r=s.id;return r!==e}).forEach(function(s){return t._removeItem(s)})}),this},i.prototype.removeHighlightedItems=function(e){var t=this;return e===void 0&&(e=!1),this._store.withTxn(function(){t._store.highlightedActiveItems.forEach(function(s){t._removeItem(s),e&&t._triggerChange(s.value)})}),this},i.prototype.showDropdown=function(e){var t=this;return this.dropdown.isActive?this:(e===void 0&&(e=!this._canSearch),requestAnimationFrame(function(){t.dropdown.show();var s=t.dropdown.element.getBoundingClientRect();t.containerOuter.open(s.bottom,s.height),e||t.input.focus(),t.passedElement.triggerEvent(O.showDropdown)}),this)},i.prototype.hideDropdown=function(e){var t=this;return this.dropdown.isActive?(requestAnimationFrame(function(){t.dropdown.hide(),t.containerOuter.close(),!e&&t._canSearch&&(t.input.removeActiveDescendant(),t.input.blur()),t.passedElement.triggerEvent(O.hideDropdown)}),this):this},i.prototype.getValue=function(e){var t=this,s=this._store.items.map(function(r){return e?r.value:t._getChoiceForOutput(r)});return this._isSelectOneElement||this.config.singleModeForMultiSelect?s[0]:s},i.prototype.setValue=function(e){var t=this;return this.initialisedOK?(this._store.withTxn(function(){e.forEach(function(s){s&&t._addChoice(N(s,!1))})}),this._searcher.reset(),this):(this._warnChoicesInitFailed("setValue"),this)},i.prototype.setChoiceByValue=function(e){var t=this;return this.initialisedOK?this._isTextElement?this:(this._store.withTxn(function(){var s=Array.isArray(e)?e:[e];s.forEach(function(r){return t._findAndSelectChoiceByValue(r)}),t.unhighlightAll()}),this._searcher.reset(),this):(this._warnChoicesInitFailed("setChoiceByValue"),this)},i.prototype.setChoices=function(e,t,s,r,n,o){var a=this;if(e===void 0&&(e=[]),t===void 0&&(t="value"),s===void 0&&(s="label"),r===void 0&&(r=!1),n===void 0&&(n=!0),o===void 0&&(o=!1),!this.initialisedOK)return this._warnChoicesInitFailed("setChoices"),this;if(!this._isSelectElement)throw new TypeError("setChoices can't be used with INPUT based Choices");if(typeof t!="string"||!t)throw new TypeError("value parameter must be a name of 'value' field in passed objects");if(typeof e=="function"){var l=e(this);if(typeof Promise=="function"&&l instanceof Promise)return new Promise(function(u){return requestAnimationFrame(u)}).then(function(){return a._handleLoadingState(!0)}).then(function(){return l}).then(function(u){return a.setChoices(u,t,s,r,n,o)}).catch(function(u){a.config.silent||console.error(u)}).then(function(){return a._handleLoadingState(!1)}).then(function(){return a});if(!Array.isArray(l))throw new TypeError(".setChoices first argument function must return either array of choices or Promise, got: ".concat(typeof l));return this.setChoices(l,t,s,!1)}if(!Array.isArray(e))throw new TypeError(".setChoices must be called either with array of choices with a function resulting into Promise of array of choices");return this.containerOuter.removeLoadingState(),this._store.withTxn(function(){n&&(a._isSearching=!1),r&&a.clearChoices(!0,o);var u=t==="value",c=s==="label";e.forEach(function(h){if("choices"in h){var f=h;c||(f=x(x({},f),{label:f[s]})),a._addGroup(N(f,!0))}else{var p=h;(!c||!u)&&(p=x(x({},p),{value:p[t],label:p[s]}));var d=N(p,!1);a._addChoice(d),d.placeholder&&!a._hasNonChoicePlaceholder&&(a._placeholderValue=et(d.label))}}),a.unhighlightAll()}),this._searcher.reset(),this},i.prototype.refresh=function(e,t,s){var r=this;return e===void 0&&(e=!1),t===void 0&&(t=!1),s===void 0&&(s=!1),this._isSelectElement?(this._store.withTxn(function(){var n=r.passedElement.optionsAsChoices(),o={};s||r._store.items.forEach(function(l){l.id&&l.active&&l.selected&&(o[l.value]=!0)}),r.clearStore(!1);var a=function(l){s?r._store.dispatch(ke(l)):o[l.value]&&(l.selected=!0)};n.forEach(function(l){if("choices"in l){l.choices.forEach(a);return}a(l)}),r._addPredefinedChoices(n,t,e),r._isSearching&&r._searchChoices(r.input.value)}),this):(this.config.silent||console.warn("refresh method can only be used on choices backed by a <select> element"),this)},i.prototype.removeChoice=function(e){var t=this._store.choices.find(function(s){return s.value===e});return t?(this._clearNotice(),this._store.dispatch(Ct(t)),this._searcher.reset(),t.selected&&this.passedElement.triggerEvent(O.removeItem,this._getChoiceForOutput(t)),this):this},i.prototype.clearChoices=function(e,t){var s=this;return e===void 0&&(e=!0),t===void 0&&(t=!1),e&&(t?this.passedElement.element.replaceChildren(""):this.passedElement.element.querySelectorAll(":not([selected])").forEach(function(r){r.remove()})),this.itemList.element.replaceChildren(""),this.choiceList.element.replaceChildren(""),this._clearNotice(),this._store.withTxn(function(){var r=t?[]:s._store.items;s._store.reset(),r.forEach(function(n){s._store.dispatch(Le(n)),s._store.dispatch(De(n))})}),this._searcher.reset(),this},i.prototype.clearStore=function(e){return e===void 0&&(e=!0),this.clearChoices(e,!0),this._stopSearch(),this._lastAddedChoiceId=0,this._lastAddedGroupId=0,this},i.prototype.clearInput=function(){var e=!this._isSelectOneElement;return this.input.clear(e),this._stopSearch(),this},i.prototype._validateConfig=function(){var e=this.config,t=Nt(e,Fe);t.length&&console.warn("Unknown config option(s) passed",t.join(", ")),e.allowHTML&&e.allowHtmlUserInput&&(e.addItems&&console.warn("Warning: allowHTML/allowHtmlUserInput/addItems all being true is strongly not recommended and may lead to XSS attacks"),e.addChoices&&console.warn("Warning: allowHTML/allowHtmlUserInput/addChoices all being true is strongly not recommended and may lead to XSS attacks"))},i.prototype._render=function(e){e===void 0&&(e={choices:!0,groups:!0,items:!0}),!this._store.inTxn()&&(this._isSelectElement&&(e.choices||e.groups)&&this._renderChoices(),e.items&&this._renderItems())},i.prototype._renderChoices=function(){var e=this;if(this._canAddItems()){var t=this,s=t.config,r=t._isSearching,n=this._store,o=n.activeGroups,a=n.activeChoices,l=0;if(r&&s.searchResultLimit>0?l=s.searchResultLimit:s.renderChoiceLimit>0&&(l=s.renderChoiceLimit),this._isSelectElement){var u=a.filter(function(d){return!d.element});u.length&&this.passedElement.addOptions(u)}var c=document.createDocumentFragment(),h=function(d){return d.filter(function(m){return!m.placeholder&&(r?!!m.rank:s.renderSelectedChoices||!m.selected)})},f=!1,p=function(d,m,y){r?d.sort(Dt):s.shouldSort&&d.sort(s.sorter);var b=d.length;b=!m&&l&&b>l?l:b,b--,d.every(function(S,w){var L=S.choiceEl||e._templates.choice(s,S,s.itemSelectText,y);return S.choiceEl=L,c.appendChild(L),(r||!S.selected)&&(f=!0),w<b})};a.length&&(s.resetScrollPosition&&requestAnimationFrame(function(){return e.choiceList.scrollToTop()}),!this._hasNonChoicePlaceholder&&!r&&this._isSelectOneElement&&p(a.filter(function(d){return d.placeholder&&!d.group}),!1,void 0),o.length&&!r?(s.shouldSort&&o.sort(s.sorter),p(a.filter(function(d){return!d.placeholder&&!d.group}),!1,void 0),o.forEach(function(d){var m=h(d.choices);if(m.length){if(d.label){var y=d.groupEl||e._templates.choiceGroup(e.config,d);d.groupEl=y,y.remove(),c.appendChild(y)}p(m,!0,s.appendGroupInSearch&&r?d.label:void 0)}})):p(h(a),!1,void 0)),!f&&(r||!c.children.length||!s.renderSelectedChoices)&&(this._notice||(this._notice={text:Pe(r?s.noResultsText:s.noChoicesText),type:r?I.noResults:I.noChoices}),c.replaceChildren("")),this._renderNotice(c),this.choiceList.element.replaceChildren(c),f&&this._highlightChoice()}},i.prototype._renderItems=function(){var e=this,t=this._store.items||[],s=this.itemList.element,r=this.config,n=document.createDocumentFragment(),o=function(h){return s.querySelector('[data-item][data-id="'.concat(h.id,'"]'))},a=function(h){var f=h.itemEl;f&&f.parentElement||(f=o(h)||e._templates.item(r,h,r.removeItemButton),h.itemEl=f,n.appendChild(f))};t.forEach(a);var l=!!n.childNodes.length;if(this._isSelectOneElement){var u=s.children.length;if(l||u>1){var c=s.querySelector(ee(r.classNames.placeholder));c&&c.remove()}else!l&&!u&&this._placeholderValue&&(l=!0,a(N({selected:!0,value:"",label:this._placeholderValue,placeholder:!0},!1)))}l&&(s.append(n),r.shouldSortItems&&!this._isSelectOneElement&&(t.sort(r.sorter),t.forEach(function(h){var f=o(h);f&&(f.remove(),n.append(f))}),s.append(n))),this._isTextElement&&(this.passedElement.value=t.map(function(h){var f=h.value;return f}).join(r.delimiter))},i.prototype._displayNotice=function(e,t,s){s===void 0&&(s=!0);var r=this._notice;if(r&&(r.type===t&&r.text===e||r.type===I.addChoice&&(t===I.noResults||t===I.noChoices))){s&&this.showDropdown(!0);return}this._clearNotice(),this._notice=e?{text:e,type:t}:void 0,this._renderNotice(),s&&e&&this.showDropdown(!0)},i.prototype._clearNotice=function(){if(this._notice){var e=this.choiceList.element.querySelector(ee(this.config.classNames.notice));e&&e.remove(),this._notice=void 0}},i.prototype._renderNotice=function(e){var t=this._notice;if(t){var s=this._templates.notice(this.config,t.text,t.type);e?e.append(s):this.choiceList.prepend(s)}},i.prototype._getChoiceForOutput=function(e,t){return{id:e.id,highlighted:e.highlighted,labelClass:e.labelClass,labelDescription:e.labelDescription,customProperties:e.customProperties,disabled:e.disabled,active:e.active,label:e.label,placeholder:e.placeholder,value:e.value,groupValue:e.group?e.group.label:void 0,element:e.element,keyCode:t}},i.prototype._triggerChange=function(e){e!=null&&this.passedElement.triggerEvent(O.change,{value:e})},i.prototype._handleButtonAction=function(e){var t=this,s=this._store.items;if(!(!s.length||!this.config.removeItems||!this.config.removeItemButton)){var r=e&&me(e.parentElement),n=r&&s.find(function(o){return o.id===r});n&&this._store.withTxn(function(){if(t._removeItem(n),t._triggerChange(n.value),t._isSelectOneElement&&!t._hasNonChoicePlaceholder){var o=(t.config.shouldSort?t._store.choices.reverse():t._store.choices).find(function(a){return a.placeholder});o&&(t._addItem(o),t.unhighlightAll(),o.value&&t._triggerChange(o.value))}})}},i.prototype._handleItemAction=function(e,t){var s=this;t===void 0&&(t=!1);var r=this._store.items;if(!(!r.length||!this.config.removeItems||this._isSelectOneElement)){var n=me(e);n&&(r.forEach(function(o){o.id===n&&!o.highlighted?s.highlightItem(o):!t&&o.highlighted&&s.unhighlightItem(o)}),this.input.focus())}},i.prototype._handleChoiceAction=function(e){var t=this,s=me(e),r=s&&this._store.getChoiceById(s);if(!r||r.disabled)return!1;var n=this.dropdown.isActive;if(!r.selected){if(!this._canAddItems())return!0;this._store.withTxn(function(){t._addItem(r,!0,!0),t.clearInput(),t.unhighlightAll()}),this._triggerChange(r.value)}return n&&this.config.closeDropdownOnSelect&&(this.hideDropdown(!0),this.containerOuter.element.focus()),!0},i.prototype._handleBackspace=function(e){var t=this.config;if(!(!t.removeItems||!e.length)){var s=e[e.length-1],r=e.some(function(n){return n.highlighted});t.editItems&&!r&&s?(this.input.value=s.value,this.input.setWidth(),this._removeItem(s),this._triggerChange(s.value)):(r||this.highlightItem(s,!1),this.removeHighlightedItems(!0))}},i.prototype._loadChoices=function(){var e,t=this,s=this.config;if(this._isTextElement){if(this._presetChoices=s.items.map(function(o){return N(o,!1)}),this.passedElement.value){var r=this.passedElement.value.split(s.delimiter).map(function(o){return N(o,!1,t.config.allowHtmlUserInput)});this._presetChoices=this._presetChoices.concat(r)}this._presetChoices.forEach(function(o){o.selected=!0})}else if(this._isSelectElement){this._presetChoices=s.choices.map(function(o){return N(o,!0)});var n=this.passedElement.optionsAsChoices();n&&(e=this._presetChoices).push.apply(e,n)}},i.prototype._handleLoadingState=function(e){e===void 0&&(e=!0);var t=this.itemList.element;e?(this.disable(),this.containerOuter.addLoadingState(),this._isSelectOneElement?t.replaceChildren(this._templates.placeholder(this.config,this.config.loadingText)):this.input.placeholder=this.config.loadingText):(this.enable(),this.containerOuter.removeLoadingState(),this._isSelectOneElement?(t.replaceChildren(""),this._render()):this.input.placeholder=this._placeholderValue||"")},i.prototype._handleSearch=function(e){if(this.input.isFocussed)if(e!==null&&typeof e<"u"&&e.length>=this.config.searchFloor){var t=this.config.searchChoices?this._searchChoices(e):0;t!==null&&this.passedElement.triggerEvent(O.search,{value:e,resultCount:t})}else this._store.choices.some(function(s){return!s.active})&&this._stopSearch()},i.prototype._canAddItems=function(){var e=this.config,t=e.maxItemCount,s=e.maxItemText;return!e.singleModeForMultiSelect&&t>0&&t<=this._store.items.length?(this.choiceList.element.replaceChildren(""),this._notice=void 0,this._displayNotice(typeof s=="function"?s(t):s,I.addChoice),!1):(this._notice&&this._notice.type===I.addChoice&&this._clearNotice(),!0)},i.prototype._canCreateItem=function(e){var t=this.config,s=!0,r="";if(s&&typeof t.addItemFilter=="function"&&!t.addItemFilter(e)&&(s=!1,r=se(t.customAddItemText,e)),s){var n=this._store.choices.find(function(o){return t.valueComparer(o.value,e)});if(n){if(this._isSelectElement)return this._displayNotice("",I.addChoice),!1;t.duplicateItemsAllowed||(s=!1,r=se(t.uniqueItemText,e))}}return s&&(r=se(t.addItemText,e)),r&&this._displayNotice(r,I.addChoice),s},i.prototype._searchChoices=function(e){var t=e.trim().replace(/\s{2,}/," ");if(!t.length||t===this._currentValue)return null;var s=this._searcher;s.isEmptyIndex()&&s.index(this._store.searchableChoices);var r=s.search(t);this._currentValue=t,this._highlightPosition=0,this._isSearching=!0;var n=this._notice,o=n&&n.type;return o!==I.addChoice&&(r.length?this._clearNotice():this._displayNotice(Pe(this.config.noResultsText),I.noResults)),this._store.dispatch(wt(r)),r.length},i.prototype._stopSearch=function(){this._isSearching&&(this._currentValue="",this._isSearching=!1,this._clearNotice(),this._store.dispatch(St(!0)),this.passedElement.triggerEvent(O.search,{value:"",resultCount:0}))},i.prototype._addEventListeners=function(){var e=this._docRoot,t=this.containerOuter.element,s=this.input.element;e.addEventListener("touchend",this._onTouchEnd,!0),t.addEventListener("keydown",this._onKeyDown,!0),t.addEventListener("mousedown",this._onMouseDown,!0),e.addEventListener("click",this._onClick,{passive:!0}),e.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.dropdown.element.addEventListener("mouseover",this._onMouseOver,{passive:!0}),this._isSelectOneElement&&(t.addEventListener("focus",this._onFocus,{passive:!0}),t.addEventListener("blur",this._onBlur,{passive:!0})),s.addEventListener("keyup",this._onKeyUp,{passive:!0}),s.addEventListener("input",this._onInput,{passive:!0}),s.addEventListener("focus",this._onFocus,{passive:!0}),s.addEventListener("blur",this._onBlur,{passive:!0}),s.form&&s.form.addEventListener("reset",this._onFormReset,{passive:!0}),this.input.addEventListeners()},i.prototype._removeEventListeners=function(){var e=this._docRoot,t=this.containerOuter.element,s=this.input.element;e.removeEventListener("touchend",this._onTouchEnd,!0),t.removeEventListener("keydown",this._onKeyDown,!0),t.removeEventListener("mousedown",this._onMouseDown,!0),e.removeEventListener("click",this._onClick),e.removeEventListener("touchmove",this._onTouchMove),this.dropdown.element.removeEventListener("mouseover",this._onMouseOver),this._isSelectOneElement&&(t.removeEventListener("focus",this._onFocus),t.removeEventListener("blur",this._onBlur)),s.removeEventListener("keyup",this._onKeyUp),s.removeEventListener("input",this._onInput),s.removeEventListener("focus",this._onFocus),s.removeEventListener("blur",this._onBlur),s.form&&s.form.removeEventListener("reset",this._onFormReset),this.input.removeEventListeners()},i.prototype._onKeyDown=function(e){var t=e.keyCode,s=this.dropdown.isActive,r=e.key.length===1||e.key.length===2&&e.key.charCodeAt(0)>=55296||e.key==="Unidentified";switch(!this._isTextElement&&!s&&t!==A.ESC_KEY&&t!==A.TAB_KEY&&t!==A.SHIFT_KEY&&(this.showDropdown(),!this.input.isFocussed&&r&&(this.input.value+=e.key,e.key===" "&&e.preventDefault())),t){case A.A_KEY:return this._onSelectKey(e,this.itemList.element.hasChildNodes());case A.ENTER_KEY:return this._onEnterKey(e,s);case A.ESC_KEY:return this._onEscapeKey(e,s);case A.UP_KEY:case A.PAGE_UP_KEY:case A.DOWN_KEY:case A.PAGE_DOWN_KEY:return this._onDirectionKey(e,s);case A.DELETE_KEY:case A.BACK_KEY:return this._onDeleteKey(e,this._store.items,this.input.isFocussed)}},i.prototype._onKeyUp=function(){this._canSearch=this.config.searchEnabled},i.prototype._onInput=function(){var e=this.input.value;if(!e){this._isTextElement?this.hideDropdown(!0):this._stopSearch();return}this._canAddItems()&&(this._canSearch&&this._handleSearch(e),this._canAddUserChoices&&(this._canCreateItem(e),this._isSelectElement&&(this._highlightPosition=0,this._highlightChoice())))},i.prototype._onSelectKey=function(e,t){if((e.ctrlKey||e.metaKey)&&t){this._canSearch=!1;var s=this.config.removeItems&&!this.input.value&&this.input.element===document.activeElement;s&&this.highlightAll()}},i.prototype._onEnterKey=function(e,t){var s=this,r=this.input.value,n=e.target;if(e.preventDefault(),n&&n.hasAttribute("data-button")){this._handleButtonAction(n);return}if(!t){(this._isSelectElement||this._notice)&&this.showDropdown();return}var o=this.dropdown.element.querySelector(ee(this.config.classNames.highlightedState));if(!(o&&this._handleChoiceAction(o))){if(!n||!r){this.hideDropdown(!0);return}if(this._canAddItems()){var a=!1;this._store.withTxn(function(){if(a=s._findAndSelectChoiceByValue(r,!0),!a){if(!s._canAddUserChoices||!s._canCreateItem(r))return;s._addChoice(N(r,!1,s.config.allowHtmlUserInput),!0,!0),a=!0}s.clearInput(),s.unhighlightAll()}),a&&(this._triggerChange(r),this.config.closeDropdownOnSelect&&this.hideDropdown(!0))}}},i.prototype._onEscapeKey=function(e,t){t&&(e.stopPropagation(),this.hideDropdown(!0),this._stopSearch(),this.containerOuter.element.focus())},i.prototype._onDirectionKey=function(e,t){var s=e.keyCode;if(t||this._isSelectOneElement){this.showDropdown(),this._canSearch=!1;var r=s===A.DOWN_KEY||s===A.PAGE_DOWN_KEY?1:-1,n=e.metaKey||s===A.PAGE_DOWN_KEY||s===A.PAGE_UP_KEY,o=void 0;if(n)r>0?o=this.dropdown.element.querySelector("".concat(te,":last-of-type")):o=this.dropdown.element.querySelector(te);else{var a=this.dropdown.element.querySelector(ee(this.config.classNames.highlightedState));a?o=Ot(a,te,r):o=this.dropdown.element.querySelector(te)}o&&(xt(o,this.choiceList.element,r)||this.choiceList.scrollToChildElement(o,r),this._highlightChoice(o)),e.preventDefault()}},i.prototype._onDeleteKey=function(e,t,s){!this._isSelectOneElement&&!e.target.value&&s&&(this._handleBackspace(t),e.preventDefault())},i.prototype._onTouchMove=function(){this._wasTap&&(this._wasTap=!1)},i.prototype._onTouchEnd=function(e){var t=(e||e.touches[0]).target,s=this._wasTap&&this.containerOuter.element.contains(t);if(s){var r=t===this.containerOuter.element||t===this.containerInner.element;r&&(this._isTextElement?this.input.focus():this._isSelectMultipleElement&&this.showDropdown()),e.stopPropagation()}this._wasTap=!0},i.prototype._onMouseDown=function(e){var t=e.target;if(t instanceof HTMLElement){if(Ki&&this.choiceList.element.contains(t)){var s=this.choiceList.element.firstElementChild;this._isScrollingOnIe=this._direction==="ltr"?e.offsetX>=s.offsetWidth:e.offsetX<s.offsetLeft}if(t!==this.input.element){var r=t.closest("[data-button],[data-item],[data-choice]");r instanceof HTMLElement&&("button"in r.dataset?this._handleButtonAction(r):"item"in r.dataset?this._handleItemAction(r,e.shiftKey):"choice"in r.dataset&&this._handleChoiceAction(r)),e.preventDefault()}}},i.prototype._onMouseOver=function(e){var t=e.target;t instanceof HTMLElement&&"choice"in t.dataset&&this._highlightChoice(t)},i.prototype._onClick=function(e){var t=e.target,s=this.containerOuter,r=s.element.contains(t);r?!this.dropdown.isActive&&!s.isDisabled?this._isTextElement?document.activeElement!==this.input.element&&this.input.focus():(this.showDropdown(),s.element.focus()):this._isSelectOneElement&&t!==this.input.element&&!this.dropdown.element.contains(t)&&this.hideDropdown():(s.removeFocusState(),this.hideDropdown(!0),this.unhighlightAll())},i.prototype._onFocus=function(e){var t=e.target,s=this.containerOuter,r=t&&s.element.contains(t);if(r){var n=t===this.input.element;this._isTextElement?n&&s.addFocusState():this._isSelectMultipleElement?n&&(this.showDropdown(!0),s.addFocusState()):(s.addFocusState(),n&&this.showDropdown(!0))}},i.prototype._onBlur=function(e){var t=e.target,s=this.containerOuter,r=t&&s.element.contains(t);r&&!this._isScrollingOnIe?t===this.input.element?(s.removeFocusState(),this.hideDropdown(!0),(this._isTextElement||this._isSelectMultipleElement)&&this.unhighlightAll()):t===this.containerOuter.element&&(s.removeFocusState(),this._canSearch||this.hideDropdown(!0)):(this._isScrollingOnIe=!1,this.input.element.focus())},i.prototype._onFormReset=function(){var e=this;this._store.withTxn(function(){e.clearInput(),e.hideDropdown(),e.refresh(!1,!1,!0),e._initialItems.length&&e.setChoiceByValue(e._initialItems)})},i.prototype._highlightChoice=function(e){e===void 0&&(e=null);var t=Array.from(this.dropdown.element.querySelectorAll(te));if(t.length){var s=e,r=this.config.classNames.highlightedState,n=Array.from(this.dropdown.element.querySelectorAll(ee(r)));n.forEach(function(o){P(o,r),o.setAttribute("aria-selected","false")}),s?this._highlightPosition=t.indexOf(s):(t.length>this._highlightPosition?s=t[this._highlightPosition]:s=t[t.length-1],s||(s=t[0])),v(s,r),s.setAttribute("aria-selected","true"),this.passedElement.triggerEvent(O.highlightChoice,{el:s}),this.dropdown.isActive&&(this.input.setActiveDescendant(s.id),this.containerOuter.setActiveDescendant(s.id))}},i.prototype._addItem=function(e,t,s){if(t===void 0&&(t=!0),s===void 0&&(s=!1),!e.id)throw new TypeError("item.id must be set before _addItem is called for a choice/item");(this.config.singleModeForMultiSelect||this._isSelectOneElement)&&this.removeActiveItems(e.id),this._store.dispatch(De(e)),t&&(this.passedElement.triggerEvent(O.addItem,this._getChoiceForOutput(e)),s&&this.passedElement.triggerEvent(O.choice,this._getChoiceForOutput(e)))},i.prototype._removeItem=function(e){if(e.id){this._store.dispatch(ke(e));var t=this._notice;t&&t.type===I.noChoices&&this._clearNotice(),this.passedElement.triggerEvent(O.removeItem,this._getChoiceForOutput(e))}},i.prototype._addChoice=function(e,t,s){if(t===void 0&&(t=!0),s===void 0&&(s=!1),e.id)throw new TypeError("Can not re-add a choice which has already been added");var r=this.config;if(!(!r.duplicateItemsAllowed&&this._store.choices.find(function(a){return r.valueComparer(a.value,e.value)}))){this._lastAddedChoiceId++,e.id=this._lastAddedChoiceId,e.elementId="".concat(this._baseId,"-").concat(this._idNames.itemChoice,"-").concat(e.id);var n=r.prependValue,o=r.appendValue;n&&(e.value=n+e.value),o&&(e.value+=o.toString()),(n||o)&&e.element&&(e.element.value=e.value),this._clearNotice(),this._store.dispatch(Le(e)),e.selected&&this._addItem(e,t,s)}},i.prototype._addGroup=function(e,t){var s=this;if(t===void 0&&(t=!0),e.id)throw new TypeError("Can not re-add a group which has already been added");this._store.dispatch(It(e)),e.choices&&(this._lastAddedGroupId++,e.id=this._lastAddedGroupId,e.choices.forEach(function(r){r.group=e,e.disabled&&(r.disabled=!0),s._addChoice(r,t)}))},i.prototype._createTemplates=function(){var e=this,t=this.config.callbackOnCreateTemplates,s={};typeof t=="function"&&(s=t.call(this,Mt,Ae,ue));var r={};Object.keys(this._templates).forEach(function(n){n in s?r[n]=s[n].bind(e):r[n]=e._templates[n].bind(e)}),this._templates=r},i.prototype._createElements=function(){var e=this._templates,t=this,s=t.config,r=t._isSelectOneElement,n=s.position,o=s.classNames,a=this._elementType;this.containerOuter=new Re({element:e.containerOuter(s,this._direction,this._isSelectElement,r,s.searchEnabled,a,s.labelId),classNames:o,type:a,position:n}),this.containerInner=new Re({element:e.containerInner(s),classNames:o,type:a,position:n}),this.input=new Ft({element:e.input(s,this._placeholderValue),classNames:o,type:a,preventPaste:!s.paste}),this.choiceList=new $e({element:e.choiceList(s,r)}),this.itemList=new $e({element:e.itemList(s,r)}),this.dropdown=new $t({element:e.dropdown(s),classNames:o,type:a})},i.prototype._createStructure=function(){var e=this,t=e.containerInner,s=e.containerOuter,r=e.passedElement,n=this.dropdown.element;r.conceal(),t.wrap(r.element),s.wrap(t.element),this._isSelectOneElement?this.input.placeholder=this.config.searchPlaceholderValue||"":(this._placeholderValue&&(this.input.placeholder=this._placeholderValue),this.input.setWidth()),s.element.appendChild(t.element),s.element.appendChild(n),t.element.appendChild(this.itemList.element),n.appendChild(this.choiceList.element),this._isSelectOneElement?this.config.searchEnabled&&n.insertBefore(this.input.element,n.firstChild):t.element.appendChild(this.input.element),this._highlightPosition=0,this._isSearching=!1},i.prototype._initStore=function(){var e=this;this._store.subscribe(this._render).withTxn(function(){e._addPredefinedChoices(e._presetChoices,e._isSelectOneElement&&!e._hasNonChoicePlaceholder,!1)}),(!this._store.choices.length||this._isSelectOneElement&&this._hasNonChoicePlaceholder)&&this._render()},i.prototype._addPredefinedChoices=function(e,t,s){var r=this;if(t===void 0&&(t=!1),s===void 0&&(s=!0),t){var n=e.findIndex(function(o){return o.selected})===-1;n&&e.some(function(o){return o.disabled||"choices"in o?!1:(o.selected=!0,!0)})}e.forEach(function(o){"choices"in o?r._isSelectElement&&r._addGroup(o,s):r._addChoice(o,s)})},i.prototype._findAndSelectChoiceByValue=function(e,t){var s=this;t===void 0&&(t=!1);var r=this._store.choices.find(function(n){return s.config.valueComparer(n.value,e)});return r&&!r.disabled&&!r.selected?(this._addItem(r,!0,t),!0):!1},i.prototype._generatePlaceholderValue=function(){var e=this.config;if(!e.placeholder)return null;if(this._hasNonChoicePlaceholder)return e.placeholderValue;if(this._isSelectElement){var t=this.passedElement.placeholderOption;return t?t.text:null}return null},i.prototype._warnChoicesInitFailed=function(e){if(!this.config.silent)if(this.initialised){if(!this.initialisedOK)throw new TypeError("".concat(e," called for an element which has multiple instances of Choices initialised on it"))}else throw new TypeError("".concat(e," called on a non-initialised instance of Choices"))},i.version="11.1.0",i})();class X extends Backbone.View{constructor(t={modelDOM:null,onRender:null}){super(t);j(this,"modelDOM",null);this.modelDOM=t.modelDOM||Backbone.Model,this.template=null,_.extend(this,t),this.onRender=_.isFunction(this.onRender)?this.onRender:null}render(){const t=this.serializeData();let s;return _.isFunction(this.template)?s=this.template(t):_.isString(this.template)&&(s=this.compileTemplate()(t)),this.$el.html(s),this.onRender&&this.onRender(this.$el),this}compileTemplate(){if(_.isString(this.template)===!0){const t=document.querySelector(this.template);return _.template(t.innerHTML)}return!1}serializeData(){let t=null;return this.modelDOM!==null?this.model instanceof this.modelDOM?t=this.model.toJSON():typeof this.model=="object"&&(t=this.model):typeof this.model=="object"&&(t=this.model),t||{}}getInput(t){return this.$el.find(`[name='${t}']`).val()}getInputById(t){return this.$el.find("#"+t).val()}setInput(t,s){return this.$el.find(`[name='${t}']`).val(s??"")}getInputByTag(t,s){return this.$el.find(`[${t}='${s}']`).val()}getCheck(t){return this.$el.find(`[name='${t}']:checked`).length}getInputFile(t){return this.$el.find("#"+t).files[0]}}class qi extends X{constructor(e={}){super(e),this.template=_.template(`
			<select
				type="<%=type%>"
				class="form-control <%=className%>"
				toggle-entity="_entitie_form"
				toggle-event="<%=(event)? event : '' %>"
				id="<%=name%>"
				name="<%=name%>"
				target="<%= target%>"
				placeholder="<%=placeholder%>"
				value="<%= valor%>"
				<%=(readonly)? 'readonly': ''%>
				<%=(disabled)? 'disabled': ''%>>
				<option value="">Pendiente seleccionar...</option>
				<% data = (searchType == 'local')? this.collection[search]: new Array()
				if(_.size(data) > 0){
					_.each(data, function(row, index){ 	%>
					<% selected = (index == valor)? 'selected': '' %>
					<option <%=selected%> value="<%= index%>"><%= row%></option>
				<% })
				} else { %>
					<option value="">...</option>
				<% } %>
			</select>
			<label toggle-error="<%=name%>" id="<%=name%>-error" class="error" for="<%=name%>"></label>
		`)}}class Ye extends X{constructor(e={}){super(e),this.template=_.template(`
            <div class="form-check form-check-inline mt-2">
                <input
                    id="<%=name%>1"
                    name="<%=name%>"
                    toggle-entity="entitie_form"
                    target="<%= target%>"
                    class="form-check-input mt-0"
                    toggle-event="<%=(event)? event :'' %>"
                    type="radio"
                    value='S'
                    <%=(valor == 'S')? 'checked':''%>
                    <%=(readonly)? 'readonly': ''%>
                    <%=(disabled)? 'disabled': ''%>
                />
                <label class="form-check-label mt-0" for="flexRadioDefault1">
                    SI
                </label>
            </div>
            <div class="form-check form-check-inline">
                <input
                    id="<%=name%>2"
                    name="<%=name%>"
                    toggle-entity="entitie_form"
                    target="<%= target%>"
                    class="form-check-input mt-0"
                    toggle-event="<%=(event)? event.name:'' %>"
                    type="radio"
                    value='N'
                    <%=(valor != 'S')? 'checked':''%>
                    <%=(readonly)? 'readonly': ''%>
                    <%=(disabled)? 'disabled': ''%>
                />
                <label class="form-check-label mt-0" for="flexRadioDefault2">
                    NO
                </label>
            </div>
             <label toggle-error="<%=name%>" id="<%=name%>-error" class="error" for="<%=name%>"></label>
            `)}get className(){return"form-group"}}class Ui extends X{constructor(e={}){super(e),this.template=`<textarea
		type="<%=type%>"
		toggle-entity="entitie_form"
		class="form-control  mt-2"
		toggle-event="<%=(event)? event : '' %>"
		id="<%=name%>"
		name="<%=name%>"
		target="<%= target%>"
		placeholder="<%=(placeholder)? placeholder : label %>"
		maxlength="<%= longitud %>"
		rows="<%=(rows)? rows : 1 %>"
		<%=(readonly)? 'readonly': ''%>
		<%=(disabled)? 'disabled': ''%>><%= valor%></textarea>
      <label toggle-error="<%=name%>" id="<%=name%>-error" class="error" for="<%=name%>"></label>
      `}get className(){return"form-group"}}class zi extends X{constructor(e={}){super(e),this.template=_.template(`<div class="input-group  mt-2">
            <input
                type="text"
                toggle-entity="entitie_form"
                class="d-none"
                id="<%= name%>"
                name="<%= name%>"
                value="<%= valor%>"
                target="-1"
            />
            <% if(type === 'text'){ %>
                <input type="<%=type%>"
                placeholder="<%=(placeholder)? placeholder : label %>"
                ondblclick="document.querySelector('.search_<%=name%>').click()"
                id="<%= name%>_detalle"
                name="<%= name%>_detalle"
                class="form-control"
                value="<%= detalle%>"
                target="-1"
                readonly
            />
            <% } %>
            <% if(type === 'textarea'){ %>
                <textarea
                rows='1'
                placeholder="<%=(placeholder)? placeholder : label %>"
                ondblclick="document.querySelector('.search_<%=name%>').click()"
                id="<%= name%>_detalle"
                name="<%= name%>_detalle"
                class="form-control"
                target="-1"
                readonly ><%= detalle%></textarea>
            <% } %>

            <span class="input-group-text">
                <% if(searchType === "ajax"){ %>
                    <button type="button"
                    target= "<%= target%>"
                    data-search="<%=search%>"
                    data-tag="<%=name%>"
                    data-size="<%=(size)? size : 100 %>"
                    data-detalle="<%=name%>_detalle"
                    onclick="buscarDataAjax(this)"
                    class="btn btn-sm bg-gray search_<%=name%>"
                    <%=(disabled)? 'disabled': ''%>
                    >
                        <i class="fa fa-search"></i>
                </button>
                <% } else { %>
                    <button type="button"
                    target= "<%= target%>"
                    data-search="<%=search%>"
                    data-tag="<%=name%>"
                    data-size="<%=(size)? size : 100 %>"
                    data-detalle="<%=name%>_detalle"
                    onclick="buscarData(this, Colletions)"
                    class="btn btn-sm bg-gray search_<%=name%>"
                    <%=(disabled)? 'disabled': ''%>
                    >
                        <i class="fa fa-search"></i>
                </button>
                <% } %>
            </span>
        </div>
        <p id="<%=name%>_hp" class="d-none text-danger"></p>`)}get className(){return"form-group"}}class rs extends Backbone.View{constructor(e={}){super(e)}initialize(){this.Modal=new bootstrap.Modal(document.getElementById("modal_generic"),{keyboard:!0,backdrop:"static"})}render(){const e=_.template(document.getElementById("tmp_direction").innerHTML);return this.$el.html(e({adress:this.collection})),$("#size_modal_generic").addClass("modal-lg"),this.Modal.show(),document.getElementById("modal_generic").addEventListener("hidden.bs.modal",t=>{$(".modal:visible").length==0&&this.remove()}),this}get events(){return{'blur [data-toggle="valida_caracteres"]':"validaCaracteres","click #button_address_modal":"addressModal","change #address_zona":"addressZona","click #address_one":"addressOne",'click [data-dismiss="modal"]':"closeModal"}}closeModal(e){e.preventDefault(),this.Modal.hide()}validaCaracteres(e){let t=$(e.currentTarget);/[^a-zA-Z\ 0-9]/g.test(t.val())&&t.val("")}addressModal(e){e.preventDefault();let t="",s;this.$el.find("#address_five").val()!==""&&(t=" BRR "+$("#address_five").val()),this.$el.find("#address_one").val()==null&&$("#address_two").val()==""?s="BRR":s=this.$el.find("#address_one").val()+" "+this.$el.find("#address_two").val()+" "+this.$el.find("#address_four").val()+" "+t,document.getElementById(this.model.name).value=s,this.Modal.hide()}addressZona(e){e.preventDefault();const t=$(e.currentTarget).val();let s;t==="R"?(s=_.filter(this.collection,o=>o.tipo_rural==="S"||o.tipo_rural==="V"),this.$el.find("#address_barrio").fadeOut(),this.$el.find("#show_address_four").fadeOut(),this.$el.find("#address_nombre_optional").text("Nombre ubicación"),this.$el.find("#show_address_two").attr("class","col-md-4"),this.$el.find("#address_one").removeAttr("disabled"),new We(this.$el.find("#address_one")[0])):t==="U"?(s=_.filter(this.collection,o=>o.tipo_rural==="N"),this.$el.find("#show_address_four").fadeIn(),this.$el.find("#address_barrio").fadeIn(),this.$el.find("#address_nombre_optional").text("Número "),this.$el.find("#show_address_two").attr("class","col-md-2"),this.$el.find("#address_one").removeAttr("disabled"),new We(this.$el.find("#address_one")[0])):(s=[],$("#address_one").attr("disabled","true"));let r="";const n=_.template('<option value="<%=estado%>"><%=detalle%></option>');_.each(s,o=>{r+=n(o)}),this.$el.find("#address_one").html(r)}addressOne(e){e.preventDefault(),this.$el.find("#address_zona").val()==""&&(this.$el.find("#address_zona").focus(),this.$el.find("#address_one").val(""))}}const Gi=()=>"Url error is undefined!",Wi=()=>Backbone.emulateHTTP=!0,Yi={create:"POST",update:"PUT",fetch:"GET",destroy:"DELETE"};Backbone.sync=(i,e,t)=>{const s=Yi[i],r=_.extend({type:s,dataType:"json",processData:!1},t);return r.url||(r.url=e.url||Gi()),!r.data&&e&&(i=="create"||i=="update")&&(r.contentType="application/json",r.data=JSON.stringify(e.toJSON())),!Backbone.emulateJSON&&!Backbone.emulateHTTP&&Wi(),Backbone.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.processData=!0,r.data=r.data?{model:r.data}:{},r.beforeSend=function(n){n.setRequestHeader("X-Requested-With","XMLHttpRequest")}),Backbone.emulateHTTP&&(s==="PUT"||s==="DELETE")&&(Backbone.emulateJSON&&(r.data._method=s),r.type="POST",r.beforeSend=n=>{n.setRequestHeader("X-HTTP-Method-Override",s)}),$.ajax(r)};const Xi=i=>/^([0-9]+){0,20}$/.test(i),G=(()=>{const i=(c="",h="",f=!0)=>{const p=$(`[group-for='${c}']`);if(p.find(".form-control").addClass("invalid"),f){p.find(".validation-error")&&p.find(".validation-error").remove();const d=document.createElement("div"),m=$(d);m.attr("class","validation-error"),m.html(`<span>${h}</span>`),p.append(m),setTimeout(()=>m.remove(),6e3),p.find(".form-control").on("focus",()=>{m.remove(),p.find(".form-control").removeClass("invalid")})}return setTimeout(()=>p.find(".form-control").removeClass("invalid"),6e3),h},e=(c,h,f,p,d=!1)=>f.test(c)?!1:i(h,p,d);return{espacio:(c={})=>{const{attr:h,target:f,out:p=!1,label:d=""}=c;return/\s/.test(h)?i(f,`El campo ${d} no puede contener espacios.`,p):!1},numerico:(c={})=>{const{attr:h,target:f,out:p=!1,label:d=""}=c;return e(h,f,/^([0-9]+){0,20}$/,`El campo ${d} debe ser un valor válido.`,p)},vacio:(c={})=>{const{attr:h,target:f,out:p=!1,label:d=""}=c;return h===""||h===void 0||h===void 0||h===null?i(f,`El campo ${d} no puede estar indefinido.`,p):!1},email:(c={})=>{const{attr:h,target:f,out:p=!1,label:d=""}=c;return e(h,f,/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,`La dirección de ${d} no es válida.`,p)},telefono:(c={})=>{const{attr:h,target:f,out:p=!1,label:d=""}=c;return e(h,f,/^([0-9]){7,10}$/,`El campo ${d} debe ser un valor válido.`,p)},identi:(c={})=>{const{attr:h,target:f,min:p=1,max:d=100,out:m=!1,label:y=""}=c;if(/^([0-9]+){1,100}$/.test(h)){if(!new RegExp("^([0-9]+){"+p+","+d+"}","i").test(h))return i(f,`El campo ${y} debe ser un valor entre ${p} y ${d} dígitos.`,m)}else return i(f,`El campo ${y} debe ser un valor válido.`,m);return!1},date:(c={})=>{const{attr:h,target:f,out:p=!1,label:d=""}=c;return function(b){const S=/^\d{4}-\d{2}-\d{2}$/;if(!b.match(S))return!1;const w=b.split("-"),L=parseInt(w[0],10),F=parseInt(w[1],10),H=parseInt(w[2],10);if(F<1||F>12||H<1||H>31||(F===4||F===6||F===9||F===11)&&H===31)return!1;if(F===2){const T=L%4===0&&L%100!==0||L%400===0;if(H>29||H===29&&!T)return!1}return!0}(h)?!1:i(f,`El campo ${d} debe ser un valor de fecha valido.`,p)},max:(c={})=>{const{attr:h,target:f,max:p=225,out:d=!1,label:m=""}=c;if(!_.isUndefined(h)&&h.toString().length>p)return i(f,`El campo ${m} no puede tener ${p} número de caracteres.`,d)}}})();class re extends Backbone.Model{constructor(e){super(e)}get idAttribute(){return"documento"}get defaults(){return{documento:void 0,tipo:void 0,clave:void 0,coddoc:void 0,nombre:"",email:"",feccla:"",autoriza:"",codciu:"",fecreg:"",estado:"",fecha_syncron:"",coddoc_detalle:"",tipo_detalle:"",codciu_detalle:"",estado_detalle:"",isEdit:-1,newclave:void 0}}validate(e={},t=void 0){let s=[],r;return(r=G.vacio({attr:e.coddoc,target:"coddoc",label:"tipo documento"}))?s.push(r):e.coddoc=="@"&&s.push("El tipo de documento es requerido."),(r=G.email({attr:e.email,target:"email",label:"email"}))&&s.push(r),(r=G.vacio({attr:e.documento,target:"documento",label:"documento"}))?s.push(r):Xi(e.documento)||s.push("El documento no es un valor valido."),(r=G.vacio({attr:e.codciu,target:"codciu",label:"ciudad"}))?s.push(r):e.codciu=="0000"&&s.push("La ciudad de notificación es requerida."),(r=G.vacio({attr:e.tipo,target:"tipo",label:"tipo"}))&&s.push(r),(r=G.vacio({attr:e.clave,target:"clave",label:"clave"}))&&s.push(r),(r=G.vacio({attr:e.nombre,target:"nombre",label:"nombre"}))&&s.push(r),_.isEmpty(s)===!0?null:s}}j(re,"Rules",{clave:{required:!0},documento:{required:!0,minlength:6},coddoc:{required:!0},tipo:{required:!0},codciu:{required:!0},email:{required:!0},nombre:{required:!0},newclave:{required:!0,minlength:5}});class Xe extends Backbone.View{constructor(e){super(e),this.viewComponents=[],this.children={},this.form=void 0}get className(){return"mb-3"}initialize(){this.template=document.getElementById("tmp_perfil").innerHTML}render(){const e=_.template(this.template);return this.$el.html(e(this.model.toJSON())),this.form=this.$el.find("#formRequest"),this.model.get("isEdit")==1&&_.each(this.collection,t=>{const s=this.addComponent(new bt({disabled:!1,readonly:!1,order:0,target:1,searchType:"local",...t,valor:this.model.get(t.name)}),t.type);this.viewComponents.push(s),this.$el.find("#component_"+t.name).html(s.$el)}),this.form.validate({rules:re.Rules,messages:{nombre:"El campo es obligatorio.",mensaje:"El campo mensaje es obligatorio"},highlight:function(t){$(t).removeClass("is-valid").addClass("is-invalid")},unhighlight:function(t){$(t).removeClass("is-invalid").addClass("is-valid")}}),this}get events(){return{"click #bt_editar":"editarDatos","click #bt_close":"closeEdit","click #bt_change_clave":"changeClaveRender","click #bt_nochange_clave":"changeNoClaveRender","click #bt_crea_clave":"crearClave","keyup #newclave2":"changeClaveNew","click #bt_guardar":"saveFormData"}}editarDatos(e){e.preventDefault(),this.remove(),E.router.navigate("editar",{trigger:!0})}closeEdit(e){e.preventDefault(),E.trigger("confirma",{message:"Confirma que desea salir del modo edición de Perfil.",callback:t=>{t&&(this.remove(),E.router.navigate("datos",{trigger:!0}))}})}changeClaveRender(e){e.preventDefault(),this.$el.find("#show_change_clave").removeClass("d-none")}changeNoClaveRender(e){e.preventDefault(),this.$el.find("#show_change_clave").addClass("d-none"),this.$el.find("#newclave1").val(""),this.$el.find("#newclave2").val("")}changeClaveNew(e){let s=this.$el.find(e.currentTarget).val();s.length>0&&(this.$el.find("#newclave1").val()!==s?(this.$el.find("#show_error_clave").text("Error la clave no es igual a la anterior"),this.$el.find("#show_error_clave").fadeIn()):(this.$el.find("#show_error_clave").text(""),this.$el.find("#show_error_clave").fadeOut()))}crearClave(e){e.preventDefault();const t=this.__generarClaveAleatoria();this.$el.find("#newclave1").val(t)}remove(){_.size(this.viewComponents)>0&&_.each(this.viewComponents,e=>e.remove()),this.stopListening(),Backbone.View.prototype.remove.call(this)}addComponent(e,t){const s=E.Collections.formParams;let r;if(_.size(this.children)>0&&_.indexOf(this.children,e.get("cid"))!=-1&&(r=this.children[e.get("cid")]),!r){switch(t){case"select":r=new qi({model:e,collection:s});break;case"radio":r=new Ye({model:e,collection:s});break;case"date":r=new Ye({model:e,collection:s});break;case"text":r=new Ui({model:e,collection:s});break;case"dialog":r=new zi({model:e,collection:s});break}this.children[e.get("cid")]=r}return r.render(),r}saveFormData(e){e.preventDefault();var t=this.$el.find(e.currentTarget);t.attr("disabled",!0);let s=0;if(this.form.valid()==!1&&s++,s>0)return t.removeAttr("disabled"),E.trigger("alert:warning",{message:"Se requiere de resolver los campos requeridos para continuar."}),setTimeout(()=>$("label.error").text(""),6e3),!1;this.$el.find("#documento").removeAttr("disabled"),this.$el.find("#clave").removeAttr("disabled"),this.$el.find("#clave").removeClass("disabled");const r=this.__serializeModel(new re);if(r.isValid()!==!0)return t.removeAttr("disabled"),E.trigger("alert:warning",{message:r.validationError.join("<br/>")}),setTimeout(()=>$("label.error").text(""),6e3),!1;E.trigger("confirma",{message:"Confirma que desea guardar los datos del formulario.",callback:n=>{n?this.trigger("form:save",{entity:r,isNew:!1,callback:o=>{t.removeAttr("disabled"),this.$el.find("#documento").attr("disabled",!0),this.$el.find("#clave").attr("disabled",!0),this.$el.find("#clave").addClass("disabled"),o&&(o.success?(this.remove(),E.router.navigate("datos",{trigger:!0,replace:!0}),Swal.fire({title:"RESULTADO OK",text:"Los cambios se han realizado con exito, para continuar se requiere de re-iniciar la sesión.",icon:"success",showCancelButton:!1,confirmButtonColor:"#2dce89",cancelButtonColor:"#fc8c72",confirmButtonText:"SI, Continuar!"}).then(a=>{window.location.href=E.kumbiaURL("mercurio/login/salir")})):E.trigger("alert:error",{message:o.msj}))}}):(this.$el.find("#documento").attr("disabled",!0),this.$el.find("#clave").attr("disabled",!0),this.$el.find("#clave").addClass("disabled"),t.removeAttr("disabled"))}})}__serializeModel(e){const t=this.form.serializeArray();return _.each(t,s=>e.set(s.name,s.value)),e}__generarClaveAleatoria(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$&@*#";let t="";for(let s=0;s<8;s++){const r=Math.floor(Math.random()*e.length);t+=e.charAt(r)}return t}}class Ji extends X{constructor(t={}){super(t);j(this,"tagRegions",{});j(this,"regionsLayout",{});_.extend(this,t)}render(){this.closeRegions();const t=X.prototype.render.call(this);return this.configureRegions(),t}configureRegions(){const t=this.tagRegions||{};this.regionsLayout||(this.regionsLayout={}),_.each(t,(s,r)=>{let n=this.$(s);this.regionsLayout[r]=new Ze({el:n})})}getRegion(t){return this.regionsLayout?this.regionsLayout[t]:!1}remove(t={}){this.stopListening(),this.closeRegions(),X.prototype.remove.call(this,t)}closeRegions(){if(!this.regionsLayout)return!1;_.each(this.regionsLayout,t=>{t&&t.remove&&t.remove()})}}class Zi extends Ji{constructor(e={}){super({...e,template:"#tmp_layout",tagRegions:e.regions||{header:"#header_group_button",subheader:"#render_subeader",body:"#app"}})}get events(){return{"click [data-toggle='linkFilter']":"linkFilter","click [data-toggle='create']":"linkCreate","click [data-toggle='masivo']":"linkMasivo"}}linkFilter(e){e.preventDefault();const t=$(e.currentTarget).attr("data-valor");_.isUndefined(t)==!0||t==""?E.router.navigate("list",{trigger:!0}):E.router.navigate("list/"+t,{trigger:!0})}linkCreate(e){e.preventDefault();const t=$(e.currentTarget);if(t.hasClass("disabled")===!0)return!1;t.attr("disabled","true"),E.trigger("confirma",{message:"Confirma que desea crear una nueva solicitud",callback:s=>{s?E.router.navigate("create",{trigger:!0}):t.removeAttr("disabled")}})}linkMasivo(e){e.preventDefault(),E.router.navigate("masivo",{trigger:!0})}}class Qi extends vt{constructor(e={}){super(e),_.extend(this,Backbone.Events),_.extend(this,e),E.Collections.formParams=null,E.layout=new Zi,this.region.show(E.layout),k.hide()}renderPerfil(){this.__requestController({data:{},silent:!0,url:"show_perfil",callback:e=>{if(e){const t=new re(e.data);t.set("isEdit",-1);const s=new Xe({model:t});E.layout.getRegion("body").show(s)}}})}editaPerfil(){this.__requestController({data:{},silent:!0,url:"params",callback:e=>{e&&(_.isNull(E.Collections.formParams)&&(E.Collections.formParams=[]),_.extend(E.Collections.formParams,e.data),this.__requestController({data:{},silent:!0,url:"show_perfil",callback:t=>{if(t){const s=new re(t.data);s.set("isEdit",1);const r=new Xe({model:s,collection:this.__serealizeParams()});this.listenTo(r,"form:save",this.__savePerfil),E.layout.getRegion("body").show(r)}}}))}})}__serealizeParams(){const e=_.keys(E.Collections.formParams);return _.map(e,s=>({name:s,type:"select",placeholder:s,search:s}))}__savePerfil(e){const{entity:t,callback:s}=e;E.trigger("syncro",{url:"guardar",data:t.toJSON(),callback:n=>s(n||!1)})}__requestController(e={}){const t=e.callback||!1,s=e.silent||!1,r=e.data||{};E.trigger("syncro",{url:E.url(e.url),data:r,silent:s,callback:n=>n&&n.success===!0?t!==!1?t(n):"":t!==!1?t(!1):""})}serealizeParams(){const e=_.keys(E.Collections.formParams);return _.map(e,s=>({name:s,type:"select",placeholder:s,search:s}))}destroy(){this.stopListening(),this.region&&this.region instanceof Region&&this.region.remove()}}class es extends Backbone.Router{constructor(e={}){super({...e,routes:{datos:"renderPerfil",editar:"editaPerfil"}}),this.currentApp=E.startSubApplication(Qi),this._bindRoutes()}renderPerfil(){this.currentApp.renderPerfil()}editaPerfil(){this.currentApp.editaPerfil()}}$(()=>{E.startApp(es,"datos","#boneLayout")});
//# sourceMappingURL=Usuario.js.map
