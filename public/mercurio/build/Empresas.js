var En=Object.defineProperty;var ti=i=>{throw TypeError(i)};var Sn=(i,t,e)=>t in i?En(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var _e=(i,t,e)=>Sn(i,typeof t!="symbol"?t+"":t,e),yt=(i,t,e)=>t.has(i)||ti("Cannot "+e);var ye=(i,t,e)=>(yt(i,t,"read from private field"),e?e.call(i):t.get(i)),Me=(i,t,e)=>t.has(i)?ti("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),wt=(i,t,e,n)=>(yt(i,t,"write to private field"),n?n.call(i,e):t.set(i,e),e),ii=(i,t,e)=>(yt(i,t,"access private method"),e);var jt,$t,Ht;class st{constructor(t={}){Me(this,jt,null);Me(this,$t,null);Me(this,Ht,null);_.extend(this,t),this.currentViews=new Array,this.el=t.el}show(t){this.closeView(this.currentView),this.currentView=t,this.openView(t)}html(t){this.$el&&this.$el.html(t)}append(t){this.currentViews.push(t),this.ensureEl(),t.render(),this.$el.append(t.el),t.onShow&&t.onShow()}closeView(t){t&&t.remove&&t.remove()}openView(t){this.ensureEl(),t.render(),this.$el.html(t.el),t.onShow&&t.onShow()}ensureEl(){this.$el||(this.$el=$(this.el))}remove(){this.currentViews.length>0&&this.currentViews.forEach(t=>{this.closeView(t)}),this.closeView(this.currentView)}}jt=new WeakMap,$t=new WeakMap,Ht=new WeakMap;const se=(()=>{let i,t,e,n;return{hide:(s=!1)=>{s&&t.remove(),i&&e.remove(),i=void 0},show:(s=!1,c)=>{s&&(t=document.createElement("div"),t.setAttribute("id","loading_msj"),$(t).html("<div class='loading_msj'><p class='text-warning'>Procesando datos de busqueda...</p></div>"),document.getElementById("app").appendChild(t)),i||(n=_.template($("#tmp_loader").html()),e=document.createElement("div"),e.setAttribute("class","loader"),e.setAttribute("id","loader"),$(e).append(n()),document.body.appendChild(e),e.setAttribute("style","display:block"),_.isObject(c)===!0&&c.addClass&&$(".loader").addClass(c.addClass)),i=!0}}})(),ni=$("[name='csrf-token']"),Dn={path:ni.attr("path"),app:ni.attr("app")},C={Models:{},Collections:{},router:null,currentSubapp:null,Modal:null,layout:null,el:null,mainRegion:null,startApp(i,t="",e=""){this.el=e,this.el===""&&(this.el="#contentView"),this.initialize(),this.router=new i,Backbone.history.start()||this.router.navigate(t,{trigger:!0})},initialize(){_.extend(this,Backbone.Events),["error","warning","success","info"].forEach(t=>{this.listenTo(this,`noty:${t}`,e=>this.notify(t,e)),this.listenTo(this,`alert:${t}`,e=>this.alert(t,e))}),this.listenTo(this,"confirma",this.confirmaApp),this.listenTo(this,"syncro",this.syncroRequest),this.listenTo(this,"ajax",this.ajaxKumbia),this.listenTo(this,"show:modal",this.renderModal),this.listenTo(this,"hide:modal",this.closeModal),this.listenTo(this,"down",this.downLoadFile),this.listenTo(this,"upload",this.uploadFile)},notify(i,t){this.showNoty(i,t.toString(),i==="error"?1e4:6e3)},alert(i,t){const{title:e="Notificación",message:n="Nota no hay respuesta de la solicitud",timer:r=8200}=t;this.showAlert(e,n,i,r)},showNoty(i,t,e){new Noty({text:t,layout:"topRight",theme:"relax",type:i,timeout:e}).show()},showAlert(i="",t="",e="",n){Swal.fire({title:i,html:t,icon:e,showConfirmButton:!1,confirmButtonText:"Continuar",timer:n})},startSubApplication(i,t,e={}){let n=[];return typeof t!="string"&&(_.isArray(t)===!0?_.each(t,r=>{n[r.name]=new r.inyectar}):_.isObject(t)===!0?n[t.name]=new t.inyectar:n.push(t)),this.mainRegion=new st({el:this.el,...e}),this.currentSubapp=new i({region:this.mainRegion,services:n,App:this}),this.currentSubapp},confirmaApp(i){const{message:t,callback:e,title:n="¿Confirmar?",icon:r="warning"}=i;Swal.fire({title:n,text:t,icon:r,showCancelButton:!0,confirmButtonColor:"#2dce89",cancelButtonColor:"#fc8c72",confirmButtonText:"SI, Continuar!"}).then(a=>{e(a.isConfirmed)})},syncroRequest(i){const{url:t,data:e={},callback:n,silent:r=!1}=i,a=document.querySelector("[name='csrf-token']").getAttribute("content");Backbone.ajax({type:"POST",dataType:"json",url:t,data:e,cache:!1,contentType:"application/x-www-form-urlencoded",processData:!0,timeout:52400,beforeSend:s=>{r==!1&&se.show(),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.length>0&&s.setRequestHeader("Authorization","Bearer "+a)},success:s=>(r==!1&&se.hide(),n(s)),error:s=>{const c=_.keys(s);return r==!1&&se.hide(),_.indexOf(c,"responseText")!==-1?(console.log(s.responseText),this.trigger("alert:error",{message:s.responseText})):(console.log(s),this.trigger("alert:error",{message:s})),n(!1)}})},renderModal(i={}){const{title:t,view:e,options:n=!1}=i,r=$("#modalComponent");this.Modal||(this.Modal=new bootstrap.Modal(document.getElementById("modalComponent"),{keyboard:!0,backdrop:"static"})),r.find("#mdl_set_title").text(t),r.find("#mdl_set_footer").css("display","none"),n&&r.find(".modal-dialog").addClass(n.bootstrapSize),r.find("#mdl_set_body").html(e.render().$el),this.Modal.show(),n&&(this.Modal.on("hidden.bs.modal",a=>e.remove()),r.find(".close").addClass("d-none"))},closeModal(i){this.Modal&&(this.Modal.hide(),this.Modal=null),i&&i.remove()},url(i="",t=void 0){return this.kumbiaURL((t??"")+"/"+i)},kumbiaURL:i=>(_.isUndefined(i)===!0&&(i=""),Dn.path+i),ajaxKumbia(i={}){const{url:t,data:e={},callback:n,silent:r=!1}=i,a=document.querySelector("[name='csrf-token']").getAttribute("content");$.ajax({type:"POST",data:e,url:this.kumbiaURL(t),dataType:"html",processData:!0,contentType:"application/x-www-form-urlencoded",cache:!1,beforeSend:s=>{r==!1&&se.show(),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.length>0&&s.setRequestHeader("Authorization","Bearer "+a)}}).done(s=>(r==!1&&se.hide(),n(s))).fail(s=>(r==!1&&se.hide(),this.trigger("alert:error",{message:s.responseText}),n(!1))).always(()=>{r==!1&&se.hide()})},downLoadFile(i){const{url:t,filename:e}=i,n=document.createElement("a");n.href=this.kumbiaURL(t+"/"+e),n.download=e,console.log(n),n.click()},uploadFile(i){const{url:t,data:e,callback:n,silent:r=!1}=i;let a;e instanceof FormData?a=e:(a=new FormData,a.append(e.name,e.file));const s=document.querySelector("[name='csrf-token']").getAttribute("content");Backbone.ajax({url:t,type:"POST",dataType:"json",data:a,cache:!1,contentType:!1,processData:!1,beforeSend:c=>{r==!1&&se.show(),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.length>0&&c.setRequestHeader("Authorization","Bearer "+s)},success:c=>(r==!1&&se.hide(),n(c)),error:c=>{const u=_.keys(c);return console.log(c),r==!1&&se.hide(),_.indexOf(u,"responseText")!==-1?this.trigger("alert:error",{message:c.responseText}):this.trigger("alert:error",{message:c}),n(!1)}})}};class Mn extends Backbone.Router{constructor(t={}){super({routes:{list:"listRute","list/:tipo":"listRute",create:"createRute","proceso/:id":"procesoRute"},...t}),this.currentApp=t.controller,this._bindRoutes()}listRute(t=""){this.currentApp.listRequests(t)}createRute(){this.currentApp.createRequest()}procesoRute(t){if(_.isUndefined(t)==!0||_.isNull(t)==!0||t=="")return C.trigger("alert:error",{message:"No hay una solicitud en proceso para continuar."}),this.navigate("list",{trigger:!0}),!1;this.currentApp.procesoRute(t)}}class le extends Backbone.View{constructor(e={modelDOM:null,onRender:null}){super(e);_e(this,"modelDOM",null);this.modelDOM=e.modelDOM||Backbone.Model,this.template=null,_.extend(this,e),this.onRender=_.isFunction(this.onRender)?this.onRender:null}render(){const e=this.serializeData();let n;return _.isFunction(this.template)?n=this.template(e):_.isString(this.template)&&(n=this.compileTemplate()(e)),this.$el.html(n),this.onRender&&this.onRender(this.$el),this}compileTemplate(){if(_.isString(this.template)===!0){const e=document.querySelector(this.template);return _.template(e.innerHTML)}return!1}serializeData(){let e=null;return this.modelDOM!==null?this.model instanceof this.modelDOM?e=this.model.toJSON():typeof this.model=="object"&&(e=this.model):typeof this.model=="object"&&(e=this.model),e||{}}getInput(e){return this.$el.find(`[name='${e}']`).val()}getInputById(e){return this.$el.find("#"+e).val()}setInput(e,n){return this.$el.find(`[name='${e}']`).val(n??"")}getInputByTag(e,n){return this.$el.find(`[${e}='${n}']`).val()}getCheck(e){return this.$el.find(`[name='${e}']:checked`).length}getInputFile(e){return this.$el.find("#"+e).files[0]}}class Tn extends le{constructor(t={}){super(t),this.template=_.template(document.getElementById("tmp_card_header").innerHTML)}get className(){return"row justify-content-center"}remove(){this.stopListening(),Backbone.View.prototype.remove.call(this)}}class In{constructor(){this.headerView=null}findDataTable(t={}){const{url:e,callback:n,silent:r=!1}=t;C.trigger("ajax",{url:e,data:{},silent:r,callback:a=>n(a&&a?a:!1)})}paramsServer(t={}){const e=t.callback||!1,n=t.silent||!1;C.trigger("syncro",{url:C.url("params"),data:{},silent:n,callback:r=>r&&r.success===!0?(_.isNull(C.Collections.formParams)&&(C.Collections.formParams=[]),_.extend(C.Collections.formParams,r.data),e!==!1?e(r.msj):""):e!==!1?e(!1):""})}serachRequestServer(t={}){const{id:e,callback:n}=t;C.trigger("syncro",{url:C.url("searchRequest/"+e),data:{},callback:r=>n(r||!1)})}sendRadicado(t={}){const{model:e,callback:n}=t;C.trigger("syncro",{url:C.url("enviarCaja"),data:e.toJSON(),callback:r=>{if(r){if(r.success)return C.trigger("alert:success",{message:r.msj}),n(r);C.trigger("alert:error",{message:r.msj})}return n(!1)}})}initHeaderView(t={}){let e;switch(this.headerView&&this.headerView.remove(),t.estado){case"T":e="Temporales";break;case"P":e="Pendientes";break;case"D":e="Devueltos";break;case"R":e="Rechazados";break;case"A":e="Aprobados";break;default:e="";break}this.headerView=new Tn({model:{...t,estado_detalle:e}}),C.layout.getRegion("header").show(this.headerView),$("[data-toggle='linkFilter'][data-valor='"+t.estado+"']").addClass("active")}digitVer(t={}){const{nit:e,callback:n}=t;C.trigger("syncro",{url:"digito_verification",data:{documento:e},callback:r=>n(r||!1)})}validePk(t={}){const{data:e,callback:n}=t;C.trigger("syncro",{url:C.url("valida"),data:e,silent:!0,callback:r=>{if(r)if(r.success){let a=null;return r.solicitud_previa!==!1&&(a=r.solicitud_previa),r.empresa!==!1&&(a=r.empresa),r.trabajador!==!1&&(a=r.trabajador),_.isNull(a)?!1:n(a)}else C.trigger("alert:error",{message:r.msj});return n(!1)}})}saveFormData(t={}){const{entity:e,callback:n}=t;C.trigger("syncro",{url:"guardar",data:e.toJSON(),callback:a=>n(a||!1)})}cancelaSolicitud(t={}){const{id:e,callback:n}=t;C.trigger("confirma",{message:"Se requiere de confirmar que desear borra la solicitud de afiliación.",callback:r=>{r&&C.trigger("syncro",{url:C.url("borrar"),data:{id:e},callback:a=>{if(a){if(a.success)return Swal.fire({title:"Notificación",text:a.msj,icon:"success",showConfirmButton:!1,timer:1e4}),n(!0);Swal.fire({title:"Notificación Error",text:a.msj,icon:"warning",showConfirmButton:!1,timer:1e4})}return n(!1)}})}})}validaFirmas(t){C.trigger("syncro",{url:C.kumbiaURL("mercurio/firmas/show"),data:{},callback:e=>{if(e){if(e.success)return t(e);C.trigger("alert:warning",{message:"No se puede generar el formulario"})}return t(!1)}})}}class xn extends le{constructor(e={}){super(e);_e(this,"tagRegions",{});_e(this,"regionsLayout",{});_.extend(this,e)}render(){this.closeRegions();const e=le.prototype.render.call(this);return this.configureRegions(),e}configureRegions(){const e=this.tagRegions||{};this.regionsLayout||(this.regionsLayout={}),_.each(e,(n,r)=>{let a=this.$(n);this.regionsLayout[r]=new st({el:a})})}getRegion(e){return this.regionsLayout?this.regionsLayout[e]:!1}remove(e={}){this.stopListening(),this.closeRegions(),le.prototype.remove.call(this,e)}closeRegions(){if(!this.regionsLayout)return!1;_.each(this.regionsLayout,e=>{e&&e.remove&&e.remove()})}}class An extends xn{constructor(t={}){super({...t,template:"#tmp_layout",tagRegions:t.regions||{header:"#header_group_button",subheader:"#render_subeader",body:"#app"}})}get events(){return{"click [data-toggle='linkFilter']":"linkFilter","click [data-toggle='create']":"linkCreate","click [data-toggle='masivo']":"linkMasivo"}}linkFilter(t){t.preventDefault();const e=$(t.currentTarget).attr("data-valor");_.isUndefined(e)==!0||e==""?C.router.navigate("list",{trigger:!0}):C.router.navigate("list/"+e,{trigger:!0})}linkCreate(t){t.preventDefault();const e=$(t.currentTarget);if(e.hasClass("disabled")===!0)return!1;e.attr("disabled","true"),C.trigger("confirma",{message:"Confirma que desea crear una nueva solicitud",callback:n=>{n?C.router.navigate("create",{trigger:!0}):e.removeAttr("disabled")}})}linkMasivo(t){t.preventDefault(),C.router.navigate("masivo",{trigger:!0})}}class kn{constructor(t={}){this.region={},this.afiService={},this.TableView=void 0,this.EntityModel=void 0,this.headerOptions=void 0,this.FormRequest=void 0,this.trigger=void 0,this.layout=void 0,_.extend(this,Backbone.Events),_.extend(this,t),C.layout=new An,this.region instanceof st?this.region.show(C.layout):_.isString(this.region)&&$(this.region).html(C.layout),se.hide()}serealizeParams(){const t=_.keys(C.Collections.formParams);return _.map(t,n=>({name:n,type:"select",placeholder:n,search:n}))}listRequests(t){_.isNull(C.Collections.formParams)&&this.trigger("params");const e=new this.TableView({model:{tipo:t}});this.listenTo(e,"load:table",this.afiService.findDataTable),this.listenTo(e,"remove:solicitud",this.afiService.cancelaSolicitud),this.listenTo(e,"admin:cuenta",this.__adminCuenta),C.layout.getRegion("body").show(e),this.afiService.initHeaderView({...this.headerOptions,estado:t,isNew:!1,breadcrumb_menu:"Listar solicitudes"})}createRequest(){const t=new this.EntityModel;_.isNull(C.Collections.formParams)?this.trigger("params",{callback:e=>{e&&this.renderCreateRequest(t)}}):this.renderCreateRequest(t)}renderCreateRequest(t={}){const e=new this.FormRequest({model:t,collection:this.serealizeParams(),isNew:t.get("id")==null,region:this.region});this.listenTo(e,"form:save",this.afiService.saveFormData),this.listenTo(e,"form:send",this.afiService.sendRadicado),this.listenTo(e,"form:find",this.afiService.validePk),this.listenTo(e,"form:digit",this.afiService.digitVer),C.layout.getRegion("body").show(e),this.afiService.initHeaderView({...this.headerOptions,isNew:t.get("id")==null,breadcrumb_menu:"Crear solicitud",create:"disabled"})}procesoRute(t){_.isNull(C.Collections.formParams)?this.trigger("params",{silent:!0,callback:e=>{e&&this.afiService.serachRequestServer({id:t,callback:n=>{if(n)if(n.success){const r=new this.EntityModel(n.data);this.renderCreateRequest(r)}else C.trigger("alert:error",{message:n.msj})}})}}):this.afiService.serachRequestServer({id:t,callback:e=>{if(e)if(e.success){const n=new this.EntityModel(e.data);this.renderCreateRequest(n)}else C.trigger("alert:error",{message:e.msj})}})}__adminCuenta({id:t}){window.location=C.url("administrar_cuenta/"+t)}destroy(){this.stopListening(),this.region&&this.region instanceof st&&this.region.remove()}}const On=()=>"Url error is undefined!",Nn=()=>Backbone.emulateHTTP=!0,Ln={create:"POST",update:"PUT",fetch:"GET",destroy:"DELETE"};Backbone.sync=(i,t,e)=>{const n=Ln[i],r=_.extend({type:n,dataType:"json",processData:!1},e);return r.url||(r.url=t.url||On()),!r.data&&t&&(i=="create"||i=="update")&&(r.contentType="application/json",r.data=JSON.stringify(t.toJSON())),!Backbone.emulateJSON&&!Backbone.emulateHTTP&&Nn(),Backbone.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.processData=!0,r.data=r.data?{model:r.data}:{},r.beforeSend=function(a){a.setRequestHeader("X-Requested-With","XMLHttpRequest")}),Backbone.emulateHTTP&&(n==="PUT"||n==="DELETE")&&(Backbone.emulateJSON&&(r.data._method=n),r.type="POST",r.beforeSend=a=>{a.setRequestHeader("X-HTTP-Method-Override",n)}),$.ajax(r)};const Pn=i=>/^([0-9]+){0,20}$/.test(i),X=(()=>{const i=(h="",p="",g=!0)=>{const m=$(`[group-for='${h}']`);if(m.find(".form-control").addClass("invalid"),g){m.find(".validation-error")&&m.find(".validation-error").remove();const y=document.createElement("div"),b=$(y);b.attr("class","validation-error"),b.html(`<span>${p}</span>`),m.append(b),setTimeout(()=>b.remove(),6e3),m.find(".form-control").on("focus",()=>{b.remove(),m.find(".form-control").removeClass("invalid")})}return setTimeout(()=>m.find(".form-control").removeClass("invalid"),6e3),p},t=(h,p,g,m,y=!1)=>g.test(h)?!1:i(p,m,y);return{espacio:(h={})=>{const{attr:p,target:g,out:m=!1,label:y=""}=h;return/\s/.test(p)?i(g,`El campo ${y} no puede contener espacios.`,m):!1},numerico:(h={})=>{const{attr:p,target:g,out:m=!1,label:y=""}=h;return t(p,g,/^([0-9]+){0,20}$/,`El campo ${y} debe ser un valor válido.`,m)},vacio:(h={})=>{const{attr:p,target:g,out:m=!1,label:y=""}=h;return p===""||p===void 0||p===void 0||p===null?i(g,`El campo ${y} no puede estar indefinido.`,m):!1},email:(h={})=>{const{attr:p,target:g,out:m=!1,label:y=""}=h;return t(p,g,/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,`La dirección de ${y} no es válida.`,m)},telefono:(h={})=>{const{attr:p,target:g,out:m=!1,label:y=""}=h;return t(p,g,/^([0-9]){7,10}$/,`El campo ${y} debe ser un valor válido.`,m)},identi:(h={})=>{const{attr:p,target:g,min:m=1,max:y=100,out:b=!1,label:k=""}=h;if(/^([0-9]+){1,100}$/.test(p)){if(!new RegExp("^([0-9]+){"+m+","+y+"}","i").test(p))return i(g,`El campo ${k} debe ser un valor entre ${m} y ${y} dígitos.`,b)}else return i(g,`El campo ${k} debe ser un valor válido.`,b);return!1},date:(h={})=>{const{attr:p,target:g,out:m=!1,label:y=""}=h;return function(A){const P=/^\d{4}-\d{2}-\d{2}$/;if(!A.match(P))return!1;const R=A.split("-"),V=parseInt(R[0],10),Q=parseInt(R[1],10),B=parseInt(R[2],10);if(Q<1||Q>12||B<1||B>31||(Q===4||Q===6||Q===9||Q===11)&&B===31)return!1;if(Q===2){const F=V%4===0&&V%100!==0||V%400===0;if(B>29||B===29&&!F)return!1}return!0}(p)?!1:i(g,`El campo ${y} debe ser un valor de fecha valido.`,m)},max:(h={})=>{const{attr:p,target:g,max:m=225,out:y=!1,label:b=""}=h;if(!_.isUndefined(p)&&p.toString().length>m)return i(g,`El campo ${b} no puede tener ${m} número de caracteres.`,y)}}})(),Rn={processing:"Procesando...",lengthMenu:"Mostrar _MENU_ resultados por pagínas",zeroRecords:"No se encontraron resultados",info:"Mostrando pagína _PAGE_ de _PAGES_.	Total de _TOTAL_ registros.",infoEmpty:"No records available",infoFiltered:"(filtered from _MAX_ total records)",emptyTable:"Ningún dato disponible en esta tabla",search:"Buscar",paginate:{next:"siguiente",previus:"anterior",first:"primero",last:"ultimo"},loadingRecords:"Cargando...",buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %d fila al portapapeles"}}},qn=i=>(i.find("input.form-control").each(function(){$.trim(this.value).length==0?$(this).siblings(".control-label").removeClass("top"):$(this).siblings(".control-label").addClass("top")}),i.find("input.form-control").on("click",function(){$(this).siblings(".control-label").addClass("top")}),i.find("label.control-label").on("click",function(){$(this).hasClass("top")===!1&&$(this).addClass("top")}),i.find("input.form-control").focus(function(){$(this).siblings(".control-label").addClass("top")}),i.find("input.form-control").blur(function(){$.trim(this.value).length==0?$(this).siblings(".control-label").removeClass("top"):$(this).siblings(".control-label").addClass("top")}),!1),Mi=(i=[],t={})=>{const e=new Array;return _.each(i,(n,r)=>{if(n!==void 0){const{required:a=!1,number:s=void 0,email:c=void 0,date:u=void 0,maxlength:v=void 0,minlength:h=void 0,rangelength:p=void 0,range:g=void 0}=n;let m;a&&(m=X.vacio({attr:t[r],target:r,label:r,out:!0})),!m&&!_.isUndefined(c)&&(m=X.email({attr:t[r],target:r,label:r,out:!0})),!m&&!_.isUndefined(s)&&(m=X.numerico({attr:t[r],target:r,label:r,out:!0})),!m&&!_.isUndefined(u)&&(m=X.date({attr:t[r],target:r,label:r,out:!0})),!m&&_.isUndefined(v)&&!_.isUndefined(h)&&(m=X.max({attr:t[r],target:r,label:r,out:!0,min:h,max:v})),!m&&!_.isUndefined(p)&&(m=X.max({attr:t[r],target:r,label:r,out:!0,min:p[0],max:p[1]})),!m&&!_.isUndefined(g)&&(m=X.identi({attr:t[r],target:r,label:r,out:!0,min:g[0],max:g[1]})),m&&m!==void 0&&e.push(m)}}),_.isEmpty(e)?null:e},xe=class xe extends Backbone.Model{constructor(t){super(t),this.on("change:tipdoc",e=>{let n=xe.changeTipdoc(e.get("tipdoc"));e.set("coddocrepleg",n)})}get idAttribute(){return"id"}get defaults(){return{id:null,nit:void 0,razsoc:"",sigla:"",digver:void 0,calemp:"",cedrep:"",repleg:"",telefono:void 0,celular:void 0,email:"",fecini:void 0,tottra:void 0,valnom:void 0,tipemp:"",tipper:"",priape:"",prinom:"",segnom:"",segape:"",tipdoc:void 0,codact:void 0,coddocrepleg:void 0,estado:void 0,tranoms:[]}}validate(t={}){return Mi(xe.Rules.rules,t)}static changeTipdoc(t){return{1:"CC",10:"TMF",11:"CD",12:"ISE",13:"V",14:"PT",2:"TI",3:"NI",4:"CE",5:"NU",6:"PA",7:"RC",8:"PEP",9:"CB"}[t]}static changeRuleProperty(t={}){const{rule:e,prop:n,value:r}=t;xe.Rules.rules[e][n]=r}static changeRulesProperty(t=[]){_.each(t,e=>xe.changeRuleProperty(e))}};_e(xe,"Rules",{rules:{nit:{required:!0,minlength:6,number:!0,rangelength:[6,18]},razsoc:{required:!0,minlength:5},sigla:{required:!1},digver:{required:!0,minlength:1},calemp:{required:!0,minlength:1},cedrep:{required:!0,minlength:6},repleg:{required:!0,minlength:6},telefono:{required:!0,number:!0,rangelength:[7,10]},celular:{required:!0,minlength:10},email:{required:!0,email:!0},fecini:{required:!0,minlength:10},tottra:{required:!0},valnom:{required:!0,minlength:6},dirpri:{required:!0},direccion:{required:!0},ciupri:{required:!0},celpri:{required:!1,rangelength:[7,10]},emailpri:{required:!1},tipemp:{required:!0},tipper:{required:!0},prinom:{required:!0},priape:{required:!0},fectra:{required:!1},codzon:{required:!0},codact:{required:!0},tipsoc:{required:!0},codciu:{required:!0}},messages:{nit:{required:"Se requiere del campo nit"},razsoc:{required:"Se requiere del campo razón social"},sigla:{required:"Se requiere del campo sigla"},digver:{required:"Se requiere del campo digito verificación"},calemp:{required:"Se requiere del campo calidad empresa"},cedrep:{required:"Se requiere del campo cedula"},repleg:{required:"Se requiere del campo nombre"},telefono:{required:"Se requiere del campo télefono"},celular:{required:"Se requiere del campo celular"},email:{required:"Se requiere del campo email"},fecini:{required:"Se requiere del campo fecha inicio"},tottra:{required:"Se requiere del campo total trabajadores"},valnom:{required:"Se requiere del campo valor nomina"},dirpri:{required:"Se requiere del campo dirección"},ciupri:{required:"Se requiere del campo ciudad"},celpri:{required:"Se requiere del campo celular"},emailpri:{required:"Se requiere del campo email"},tipemp:{required:"Se requiere del campo tipo empresa"},tipper:{required:"Se requiere del campo tipo persona"},prinom:{required:"Se requiere del campo primer nombre"},priape:{required:"Se requiere del campo primer apellido"},fectra:{required:"Se requiere del campo fecha"},direccion:{required:"Se requiere del campo dirección"},codzon:{required:"Se requiere de la zona laboral"},codact:{required:"Se requiere de la actividad económica"},tipsoc:{required:"Se requiere de tipo sociedad"},codciu:{required:"Se requiere la ciudad"}}});let Le=xe;class Fn extends Backbone.View{constructor(t){super(t)}get className(){return"table-responsive-md"}initialize(){this.template=document.getElementById("tmp_table").innerHTML,this.tableView=void 0}render(){const t=_.template(this.template);return this.$el.html(t()),this.trigger("load:table",{url:this.model.tipo?"empresa/renderTable/"+this.model.tipo:"empresa/renderTable",callback:e=>{this.$el.find("#consulta").html(e),this.__initTable(),this.__setStyles()},silent:!1}),this}get events(){return{"click [data-toggle='event-proceso']":"procesoPendiente","click [data-toggle='event-cuenta']":"adminCuenta","click [data-toggle='event-detalle']":"procesoPendiente","click [data-toggle='cancel-solicitud']":"cancelarSolicitud"}}procesoPendiente(t){const e=this.$el.find(t.currentTarget).attr("data-cid");this.remove(),C.router.navigate("proceso/"+e,{trigger:!0})}adminCuenta(t){const n=$(t.currentTarget).attr("data-cid");C.trigger("confirma",{message:"Se requiere de confirmar que estás de acuerdo en el cambio de cuenta para administrar la empresa seleccionada. Esta opción le permitirá afiliar trabajadores, cónyuges y beneficiarios",callback:r=>{r&&this.trigger("admin:cuenta",{id:n})}})}__setStyles(){$('[type="search"]').addClass("row form-control"),$('[type="search"]').css("display","inline-block"),$('[type="search"]').css("width","220px")}__initTable(){this.tableView=this.$el.find("#tb_empresas").DataTable({paging:!0,ordering:!1,pageLength:10,pagingType:"numbers",info:!0,searching:!0,columnDefs:[{targets:0,width:"10%"},{targets:1,width:"40%"},{targets:2,width:"10%"},{targets:3,width:"10%"},{targets:4,width:"10%"}],order:[[0,"desc"]],language:Rn})}cancelarSolicitud(t){t.preventDefault();const e=this.$el.find(t.currentTarget).attr("data-cid");this.trigger("remove:solicitud",{id:e,callback:n=>{n&&Backbone.history.loadUrl()}})}remove(){console.log("OK remove"),this.stopListening(),Backbone.View.prototype.remove.call(this)}}/*! choices.js v11.1.0 | © 2025 Josh Johnson | https://github.com/jshjohnson/Choices#readme */var At=function(i,t){return At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])},At(i,t)};function Ti(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");At(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var J=function(){return J=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},J.apply(this,arguments)};function jn(i,t,e){for(var n=0,r=t.length,a;n<r;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return i.concat(a||Array.prototype.slice.call(t))}var j={ADD_CHOICE:"ADD_CHOICE",REMOVE_CHOICE:"REMOVE_CHOICE",FILTER_CHOICES:"FILTER_CHOICES",ACTIVATE_CHOICES:"ACTIVATE_CHOICES",CLEAR_CHOICES:"CLEAR_CHOICES",ADD_GROUP:"ADD_GROUP",ADD_ITEM:"ADD_ITEM",REMOVE_ITEM:"REMOVE_ITEM",HIGHLIGHT_ITEM:"HIGHLIGHT_ITEM"},G={showDropdown:"showDropdown",hideDropdown:"hideDropdown",change:"change",choice:"choice",search:"search",addItem:"addItem",removeItem:"removeItem",highlightItem:"highlightItem",highlightChoice:"highlightChoice",unhighlightItem:"unhighlightItem"},K={TAB_KEY:9,SHIFT_KEY:16,BACK_KEY:46,DELETE_KEY:8,ENTER_KEY:13,A_KEY:65,ESC_KEY:27,UP_KEY:38,DOWN_KEY:40,PAGE_UP_KEY:33,PAGE_DOWN_KEY:34},$n=["fuseOptions","classNames"],we={Text:"text",SelectOne:"select-one",SelectMultiple:"select-multiple"},ri=function(i){return{type:j.ADD_CHOICE,choice:i}},Hn=function(i){return{type:j.REMOVE_CHOICE,choice:i}},Vn=function(i){return{type:j.FILTER_CHOICES,results:i}},Bn=function(i){return{type:j.ACTIVATE_CHOICES,active:i}},Yn=function(i){return{type:j.ADD_GROUP,group:i}},ai=function(i){return{type:j.ADD_ITEM,item:i}},si=function(i){return{type:j.REMOVE_ITEM,item:i}},it=function(i,t){return{type:j.HIGHLIGHT_ITEM,item:i,highlighted:t}},Kn=function(i,t){return Math.floor(Math.random()*(t-i)+i)},oi=function(i){return Array.from({length:i},function(){return Kn(0,36).toString(36)}).join("")},zn=function(i,t){var e=i.id||i.name&&"".concat(i.name,"-").concat(oi(2))||oi(4);return e=e.replace(/(:|\.|\[|\]|,)/g,""),e="".concat(t,"-").concat(e),e},Un=function(i,t,e){e===void 0&&(e=1);for(var n="".concat(e>0?"next":"previous","ElementSibling"),r=i[n];r;){if(r.matches(t))return r;r=r[n]}return null},Wn=function(i,t,e){e===void 0&&(e=1);var n;return e>0?n=t.scrollTop+t.offsetHeight>=i.offsetTop+i.offsetHeight:n=i.offsetTop>=t.scrollTop,n},ut=function(i){if(typeof i!="string"){if(i==null)return"";if(typeof i=="object"){if("raw"in i)return ut(i.raw);if("trusted"in i)return i.trusted}return i}return i.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;")},Gn=(function(){var i=document.createElement("div");return function(t){i.innerHTML=t.trim();for(var e=i.children[0];i.firstChild;)i.removeChild(i.firstChild);return e}})(),ze=function(i,t){return typeof i=="function"?i(ut(t),t):i},li=function(i){return typeof i=="function"?i():i},Ae=function(i){if(typeof i=="string")return i;if(typeof i=="object"){if("trusted"in i)return i.trusted;if("raw"in i)return i.raw}return""},Ii=function(i){if(typeof i=="string")return i;if(typeof i=="object"){if("escaped"in i)return i.escaped;if("trusted"in i)return i.trusted}return""},Vt=function(i,t){return i?Ii(t):ut(t)},me=function(i,t,e){i.innerHTML=Vt(t,e)},Jn=function(i,t){var e=i.value,n=i.label,r=n===void 0?e:n,a=t.value,s=t.label,c=s===void 0?a:s;return Ae(r).localeCompare(Ae(c),[],{sensitivity:"base",ignorePunctuation:!0,numeric:!0})},Xn=function(i,t){return i.rank-t.rank},Zn=function(i,t,e){e===void 0&&(e=null);var n=new CustomEvent(t,{detail:e,bubbles:!0,cancelable:!0});return i.dispatchEvent(n)},Qn=function(i,t){var e=Object.keys(i).sort(),n=Object.keys(t).sort();return e.filter(function(r){return n.indexOf(r)<0})},ht=function(i){return Array.isArray(i)?i:[i]},Ve=function(i){return i&&Array.isArray(i)?i.map(function(t){return".".concat(t)}).join(""):".".concat(i)},x=function(i,t){var e;(e=i.classList).add.apply(e,ht(t))},he=function(i,t){var e;(e=i.classList).remove.apply(e,ht(t))},er=function(i){if(typeof i<"u")try{return JSON.parse(i)}catch{return i}return{}},tr=function(i,t,e){var n=i.itemEl;n&&(he(n,e),x(n,t))},ir=(function(){function i(t){var e=t.element,n=t.type,r=t.classNames;this.element=e,this.classNames=r,this.type=n,this.isActive=!1}return i.prototype.show=function(){return x(this.element,this.classNames.activeState),this.element.setAttribute("aria-expanded","true"),this.isActive=!0,this},i.prototype.hide=function(){return he(this.element,this.classNames.activeState),this.element.setAttribute("aria-expanded","false"),this.isActive=!1,this},i})(),ci=(function(){function i(t){var e=t.element,n=t.type,r=t.classNames,a=t.position;this.element=e,this.classNames=r,this.type=n,this.position=a,this.isOpen=!1,this.isFlipped=!1,this.isDisabled=!1,this.isLoading=!1}return i.prototype.shouldFlip=function(t,e){var n=!1;return this.position==="auto"?n=this.element.getBoundingClientRect().top-e>=0&&!window.matchMedia("(min-height: ".concat(t+1,"px)")).matches:this.position==="top"&&(n=!0),n},i.prototype.setActiveDescendant=function(t){this.element.setAttribute("aria-activedescendant",t)},i.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")},i.prototype.open=function(t,e){x(this.element,this.classNames.openState),this.element.setAttribute("aria-expanded","true"),this.isOpen=!0,this.shouldFlip(t,e)&&(x(this.element,this.classNames.flippedState),this.isFlipped=!0)},i.prototype.close=function(){he(this.element,this.classNames.openState),this.element.setAttribute("aria-expanded","false"),this.removeActiveDescendant(),this.isOpen=!1,this.isFlipped&&(he(this.element,this.classNames.flippedState),this.isFlipped=!1)},i.prototype.addFocusState=function(){x(this.element,this.classNames.focusState)},i.prototype.removeFocusState=function(){he(this.element,this.classNames.focusState)},i.prototype.enable=function(){he(this.element,this.classNames.disabledState),this.element.removeAttribute("aria-disabled"),this.type===we.SelectOne&&this.element.setAttribute("tabindex","0"),this.isDisabled=!1},i.prototype.disable=function(){x(this.element,this.classNames.disabledState),this.element.setAttribute("aria-disabled","true"),this.type===we.SelectOne&&this.element.setAttribute("tabindex","-1"),this.isDisabled=!0},i.prototype.wrap=function(t){var e=this.element,n=t.parentNode;n&&(t.nextSibling?n.insertBefore(e,t.nextSibling):n.appendChild(e)),e.appendChild(t)},i.prototype.unwrap=function(t){var e=this.element,n=e.parentNode;n&&(n.insertBefore(t,e),n.removeChild(e))},i.prototype.addLoadingState=function(){x(this.element,this.classNames.loadingState),this.element.setAttribute("aria-busy","true"),this.isLoading=!0},i.prototype.removeLoadingState=function(){he(this.element,this.classNames.loadingState),this.element.removeAttribute("aria-busy"),this.isLoading=!1},i})(),nr=(function(){function i(t){var e=t.element,n=t.type,r=t.classNames,a=t.preventPaste;this.element=e,this.type=n,this.classNames=r,this.preventPaste=a,this.isFocussed=this.element.isEqualNode(document.activeElement),this.isDisabled=e.disabled,this._onPaste=this._onPaste.bind(this),this._onInput=this._onInput.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}return Object.defineProperty(i.prototype,"placeholder",{set:function(t){this.element.placeholder=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this.element.value},set:function(t){this.element.value=t},enumerable:!1,configurable:!0}),i.prototype.addEventListeners=function(){var t=this.element;t.addEventListener("paste",this._onPaste),t.addEventListener("input",this._onInput,{passive:!0}),t.addEventListener("focus",this._onFocus,{passive:!0}),t.addEventListener("blur",this._onBlur,{passive:!0})},i.prototype.removeEventListeners=function(){var t=this.element;t.removeEventListener("input",this._onInput),t.removeEventListener("paste",this._onPaste),t.removeEventListener("focus",this._onFocus),t.removeEventListener("blur",this._onBlur)},i.prototype.enable=function(){var t=this.element;t.removeAttribute("disabled"),this.isDisabled=!1},i.prototype.disable=function(){var t=this.element;t.setAttribute("disabled",""),this.isDisabled=!0},i.prototype.focus=function(){this.isFocussed||this.element.focus()},i.prototype.blur=function(){this.isFocussed&&this.element.blur()},i.prototype.clear=function(t){return t===void 0&&(t=!0),this.element.value="",t&&this.setWidth(),this},i.prototype.setWidth=function(){var t=this.element;t.style.minWidth="".concat(t.placeholder.length+1,"ch"),t.style.width="".concat(t.value.length+1,"ch")},i.prototype.setActiveDescendant=function(t){this.element.setAttribute("aria-activedescendant",t)},i.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")},i.prototype._onInput=function(){this.type!==we.SelectOne&&this.setWidth()},i.prototype._onPaste=function(t){this.preventPaste&&t.preventDefault()},i.prototype._onFocus=function(){this.isFocussed=!0},i.prototype._onBlur=function(){this.isFocussed=!1},i})(),rr=4,di=(function(){function i(t){var e=t.element;this.element=e,this.scrollPos=this.element.scrollTop,this.height=this.element.offsetHeight}return i.prototype.prepend=function(t){var e=this.element.firstElementChild;e?this.element.insertBefore(t,e):this.element.append(t)},i.prototype.scrollToTop=function(){this.element.scrollTop=0},i.prototype.scrollToChildElement=function(t,e){var n=this;if(t){var r=this.element.offsetHeight,a=this.element.scrollTop+r,s=t.offsetHeight,c=t.offsetTop+s,u=e>0?this.element.scrollTop+c-a:t.offsetTop;requestAnimationFrame(function(){n._animateScroll(u,e)})}},i.prototype._scrollDown=function(t,e,n){var r=(n-t)/e,a=r>1?r:1;this.element.scrollTop=t+a},i.prototype._scrollUp=function(t,e,n){var r=(t-n)/e,a=r>1?r:1;this.element.scrollTop=t-a},i.prototype._animateScroll=function(t,e){var n=this,r=rr,a=this.element.scrollTop,s=!1;e>0?(this._scrollDown(a,r,t),a<t&&(s=!0)):(this._scrollUp(a,r,t),a>t&&(s=!0)),s&&requestAnimationFrame(function(){n._animateScroll(t,e)})},i})(),xi=(function(){function i(t){var e=t.element,n=t.classNames;this.element=e,this.classNames=n,this.isDisabled=!1}return Object.defineProperty(i.prototype,"isActive",{get:function(){return this.element.dataset.choice==="active"},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"dir",{get:function(){return this.element.dir},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){return this.element.value},set:function(t){this.element.setAttribute("value",t),this.element.value=t},enumerable:!1,configurable:!0}),i.prototype.conceal=function(){var t=this.element;x(t,this.classNames.input),t.hidden=!0,t.tabIndex=-1;var e=t.getAttribute("style");e&&t.setAttribute("data-choice-orig-style",e),t.setAttribute("data-choice","active")},i.prototype.reveal=function(){var t=this.element;he(t,this.classNames.input),t.hidden=!1,t.removeAttribute("tabindex");var e=t.getAttribute("data-choice-orig-style");e?(t.removeAttribute("data-choice-orig-style"),t.setAttribute("style",e)):t.removeAttribute("style"),t.removeAttribute("data-choice")},i.prototype.enable=function(){this.element.removeAttribute("disabled"),this.element.disabled=!1,this.isDisabled=!1},i.prototype.disable=function(){this.element.setAttribute("disabled",""),this.element.disabled=!0,this.isDisabled=!0},i.prototype.triggerEvent=function(t,e){Zn(this.element,t,e||{})},i})(),ar=(function(i){Ti(t,i);function t(){return i!==null&&i.apply(this,arguments)||this}return t})(xi),Ye=function(i,t){return t===void 0&&(t=!0),typeof i>"u"?t:!!i},Ai=function(i){if(typeof i=="string"&&(i=i.split(" ").filter(function(t){return t.length})),Array.isArray(i)&&i.length)return i},ue=function(i,t,e){if(e===void 0&&(e=!0),typeof i=="string"){var n=ut(i),r=e||n===i?i:{escaped:n,raw:i},a=ue({value:i,label:r,selected:!0},!1);return a}var s=i;if("choices"in s){if(!t)throw new TypeError("optGroup is not allowed");var c=s,u=c.choices.map(function(g){return ue(g,!1)}),v={id:0,label:Ae(c.label)||c.value,active:!!u.length,disabled:!!c.disabled,choices:u};return v}var h=s,p={id:0,group:null,score:0,rank:0,value:h.value,label:h.label||h.value,active:Ye(h.active),selected:Ye(h.selected,!1),disabled:Ye(h.disabled,!1),placeholder:Ye(h.placeholder,!1),highlighted:!1,labelClass:Ai(h.labelClass),labelDescription:h.labelDescription,customProperties:h.customProperties};return p},sr=function(i){return i.tagName==="INPUT"},ki=function(i){return i.tagName==="SELECT"},or=function(i){return i.tagName==="OPTION"},lr=function(i){return i.tagName==="OPTGROUP"},cr=(function(i){Ti(t,i);function t(e){var n=e.element,r=e.classNames,a=e.template,s=e.extractPlaceholder,c=i.call(this,{element:n,classNames:r})||this;return c.template=a,c.extractPlaceholder=s,c}return Object.defineProperty(t.prototype,"placeholderOption",{get:function(){return this.element.querySelector('option[value=""]')||this.element.querySelector("option[placeholder]")},enumerable:!1,configurable:!0}),t.prototype.addOptions=function(e){var n=this,r=document.createDocumentFragment();e.forEach(function(a){var s=a;if(!s.element){var c=n.template(s);r.appendChild(c),s.element=c}}),this.element.appendChild(r)},t.prototype.optionsAsChoices=function(){var e=this,n=[];return this.element.querySelectorAll(":scope > option, :scope > optgroup").forEach(function(r){or(r)?n.push(e._optionToChoice(r)):lr(r)&&n.push(e._optgroupToChoice(r))}),n},t.prototype._optionToChoice=function(e){return!e.hasAttribute("value")&&e.hasAttribute("placeholder")&&(e.setAttribute("value",""),e.value=""),{id:0,group:null,score:0,rank:0,value:e.value,label:e.label,element:e,active:!0,selected:this.extractPlaceholder?e.selected:e.hasAttribute("selected"),disabled:e.disabled,highlighted:!1,placeholder:this.extractPlaceholder&&(!e.value||e.hasAttribute("placeholder")),labelClass:typeof e.dataset.labelClass<"u"?Ai(e.dataset.labelClass):void 0,labelDescription:typeof e.dataset.labelDescription<"u"?e.dataset.labelDescription:void 0,customProperties:er(e.dataset.customProperties)}},t.prototype._optgroupToChoice=function(e){var n=this,r=e.querySelectorAll("option"),a=Array.from(r).map(function(s){return n._optionToChoice(s)});return{id:0,label:e.label||"",element:e,active:!!a.length,disabled:e.disabled,choices:a}},t})(xi),dr={containerOuter:["choices"],containerInner:["choices__inner"],input:["choices__input"],inputCloned:["choices__input--cloned"],list:["choices__list"],listItems:["choices__list--multiple"],listSingle:["choices__list--single"],listDropdown:["choices__list--dropdown"],item:["choices__item"],itemSelectable:["choices__item--selectable"],itemDisabled:["choices__item--disabled"],itemChoice:["choices__item--choice"],description:["choices__description"],placeholder:["choices__placeholder"],group:["choices__group"],groupHeading:["choices__heading"],button:["choices__button"],activeState:["is-active"],focusState:["is-focused"],openState:["is-open"],disabledState:["is-disabled"],highlightedState:["is-highlighted"],selectedState:["is-selected"],flippedState:["is-flipped"],loadingState:["is-loading"],notice:["choices__notice"],addChoice:["choices__item--selectable","add-choice"],noResults:["has-no-results"],noChoices:["has-no-choices"]},ui={items:[],choices:[],silent:!1,renderChoiceLimit:-1,maxItemCount:-1,closeDropdownOnSelect:"auto",singleModeForMultiSelect:!1,addChoices:!1,addItems:!0,addItemFilter:function(i){return!!i&&i!==""},removeItems:!0,removeItemButton:!1,removeItemButtonAlignLeft:!1,editItems:!1,allowHTML:!1,allowHtmlUserInput:!1,duplicateItemsAllowed:!0,delimiter:",",paste:!0,searchEnabled:!0,searchChoices:!0,searchFloor:1,searchResultLimit:4,searchFields:["label","value"],position:"auto",resetScrollPosition:!0,shouldSort:!0,shouldSortItems:!1,sorter:Jn,shadowRoot:null,placeholder:!0,placeholderValue:null,searchPlaceholderValue:null,prependValue:null,appendValue:null,renderSelectedChoices:"auto",loadingText:"Loading...",noResultsText:"No results found",noChoicesText:"No choices to choose from",itemSelectText:"Press to select",uniqueItemText:"Only unique values can be added",customAddItemText:"Only values matching specific conditions can be added",addItemText:function(i){return'Press Enter to add <b>"'.concat(i,'"</b>')},removeItemIconText:function(){return"Remove item"},removeItemLabelText:function(i){return"Remove item: ".concat(i)},maxItemText:function(i){return"Only ".concat(i," values can be added")},valueComparer:function(i,t){return i===t},fuseOptions:{includeScore:!0},labelId:"",callbackOnInit:null,callbackOnCreateTemplates:null,classNames:dr,appendGroupInSearch:!1},hi=function(i){var t=i.itemEl;t&&(t.remove(),i.itemEl=void 0)};function ur(i,t,e){var n=i,r=!0;switch(t.type){case j.ADD_ITEM:{t.item.selected=!0;var a=t.item.element;a&&(a.selected=!0,a.setAttribute("selected","")),n.push(t.item);break}case j.REMOVE_ITEM:{t.item.selected=!1;var a=t.item.element;if(a){a.selected=!1,a.removeAttribute("selected");var s=a.parentElement;s&&ki(s)&&s.type===we.SelectOne&&(s.value="")}hi(t.item),n=n.filter(function(h){return h.id!==t.item.id});break}case j.REMOVE_CHOICE:{hi(t.choice),n=n.filter(function(v){return v.id!==t.choice.id});break}case j.HIGHLIGHT_ITEM:{var c=t.highlighted,u=n.find(function(v){return v.id===t.item.id});u&&u.highlighted!==c&&(u.highlighted=c,e&&tr(u,c?e.classNames.highlightedState:e.classNames.selectedState,c?e.classNames.selectedState:e.classNames.highlightedState));break}default:{r=!1;break}}return{state:n,update:r}}function hr(i,t){var e=i,n=!0;switch(t.type){case j.ADD_GROUP:{e.push(t.group);break}case j.CLEAR_CHOICES:{e=[];break}default:{n=!1;break}}return{state:e,update:n}}function fr(i,t,e){var n=i,r=!0;switch(t.type){case j.ADD_CHOICE:{n.push(t.choice);break}case j.REMOVE_CHOICE:{t.choice.choiceEl=void 0,t.choice.group&&(t.choice.group.choices=t.choice.group.choices.filter(function(s){return s.id!==t.choice.id})),n=n.filter(function(s){return s.id!==t.choice.id});break}case j.ADD_ITEM:case j.REMOVE_ITEM:{t.item.choiceEl=void 0;break}case j.FILTER_CHOICES:{var a=[];t.results.forEach(function(s){a[s.item.id]=s}),n.forEach(function(s){var c=a[s.id];c!==void 0?(s.score=c.score,s.rank=c.rank,s.active=!0):(s.score=0,s.rank=0,s.active=!1),e&&e.appendGroupInSearch&&(s.choiceEl=void 0)});break}case j.ACTIVATE_CHOICES:{n.forEach(function(s){s.active=t.active,e&&e.appendGroupInSearch&&(s.choiceEl=void 0)});break}case j.CLEAR_CHOICES:{n=[];break}default:{r=!1;break}}return{state:n,update:r}}var fi={groups:hr,items:ur,choices:fr},pr=(function(){function i(t){this._state=this.defaultState,this._listeners=[],this._txn=0,this._context=t}return Object.defineProperty(i.prototype,"defaultState",{get:function(){return{groups:[],items:[],choices:[]}},enumerable:!1,configurable:!0}),i.prototype.changeSet=function(t){return{groups:t,items:t,choices:t}},i.prototype.reset=function(){this._state=this.defaultState;var t=this.changeSet(!0);this._txn?this._changeSet=t:this._listeners.forEach(function(e){return e(t)})},i.prototype.subscribe=function(t){return this._listeners.push(t),this},i.prototype.dispatch=function(t){var e=this,n=this._state,r=!1,a=this._changeSet||this.changeSet(!1);Object.keys(fi).forEach(function(s){var c=fi[s](n[s],t,e._context);c.update&&(r=!0,a[s]=!0,n[s]=c.state)}),r&&(this._txn?this._changeSet=a:this._listeners.forEach(function(s){return s(a)}))},i.prototype.withTxn=function(t){this._txn++;try{t()}finally{if(this._txn=Math.max(0,this._txn-1),!this._txn){var e=this._changeSet;e&&(this._changeSet=void 0,this._listeners.forEach(function(n){return n(e)}))}}},Object.defineProperty(i.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"items",{get:function(){return this.state.items},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"highlightedActiveItems",{get:function(){return this.items.filter(function(t){return t.active&&t.highlighted})},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"choices",{get:function(){return this.state.choices},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"activeChoices",{get:function(){return this.choices.filter(function(t){return t.active})},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"searchableChoices",{get:function(){return this.choices.filter(function(t){return!t.disabled&&!t.placeholder})},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"groups",{get:function(){return this.state.groups},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"activeGroups",{get:function(){var t=this;return this.state.groups.filter(function(e){var n=e.active&&!e.disabled,r=t.state.choices.some(function(a){return a.active&&!a.disabled});return n&&r},[])},enumerable:!1,configurable:!0}),i.prototype.inTxn=function(){return this._txn>0},i.prototype.getChoiceById=function(t){return this.activeChoices.find(function(e){return e.id===t})},i.prototype.getGroupById=function(t){return this.groups.find(function(e){return e.id===t})},i})(),Y={noChoices:"no-choices",noResults:"no-results",addChoice:"add-choice",generic:""};function mr(i,t,e){return(t=vr(t))in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function pi(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),e.push.apply(e,n)}return e}function Oe(i){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?pi(Object(e),!0).forEach(function(n){mr(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):pi(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function gr(i,t){if(typeof i!="object"||!i)return i;var e=i[Symbol.toPrimitive];if(e!==void 0){var n=e.call(i,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}function vr(i){var t=gr(i,"string");return typeof t=="symbol"?t:t+""}function ve(i){return Array.isArray?Array.isArray(i):Li(i)==="[object Array]"}function br(i){if(typeof i=="string")return i;let t=i+"";return t=="0"&&1/i==-1/0?"-0":t}function _r(i){return i==null?"":br(i)}function fe(i){return typeof i=="string"}function Oi(i){return typeof i=="number"}function yr(i){return i===!0||i===!1||wr(i)&&Li(i)=="[object Boolean]"}function Ni(i){return typeof i=="object"}function wr(i){return Ni(i)&&i!==null}function re(i){return i!=null}function Ct(i){return!i.trim().length}function Li(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}const Cr="Incorrect 'index' type",Er=i=>`Invalid value for key ${i}`,Sr=i=>`Pattern length exceeds max of ${i}.`,Dr=i=>`Missing ${i} property in key`,Mr=i=>`Property 'weight' in key '${i}' must be a positive integer`,mi=Object.prototype.hasOwnProperty;class Tr{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach(n=>{let r=Pi(n);this._keys.push(r),this._keyMap[r.id]=r,e+=r.weight}),this._keys.forEach(n=>{n.weight/=e})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Pi(i){let t=null,e=null,n=null,r=1,a=null;if(fe(i)||ve(i))n=i,t=gi(i),e=kt(i);else{if(!mi.call(i,"name"))throw new Error(Dr("name"));const s=i.name;if(n=s,mi.call(i,"weight")&&(r=i.weight,r<=0))throw new Error(Mr(s));t=gi(s),e=kt(s),a=i.getFn}return{path:t,id:e,weight:r,src:n,getFn:a}}function gi(i){return ve(i)?i:i.split(".")}function kt(i){return ve(i)?i.join("."):i}function Ir(i,t){let e=[],n=!1;const r=(a,s,c)=>{if(re(a))if(!s[c])e.push(a);else{let u=s[c];const v=a[u];if(!re(v))return;if(c===s.length-1&&(fe(v)||Oi(v)||yr(v)))e.push(_r(v));else if(ve(v)){n=!0;for(let h=0,p=v.length;h<p;h+=1)r(v[h],s,c+1)}else s.length&&r(v,s,c+1)}};return r(i,fe(t)?t.split("."):t,0),n?e:e[0]}const xr={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Ar={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(i,t)=>i.score===t.score?i.idx<t.idx?-1:1:i.score<t.score?-1:1},kr={location:0,threshold:.6,distance:100},Or={useExtendedSearch:!1,getFn:Ir,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var T=Oe(Oe(Oe(Oe({},Ar),xr),kr),Or);const Nr=/[^ ]+/g;function Lr(i=1,t=3){const e=new Map,n=Math.pow(10,t);return{get(r){const a=r.match(Nr).length;if(e.has(a))return e.get(a);const s=1/Math.pow(a,.5*i),c=parseFloat(Math.round(s*n)/n);return e.set(a,c),c},clear(){e.clear()}}}class Bt{constructor({getFn:t=T.getFn,fieldNormWeight:e=T.fieldNormWeight}={}){this.norm=Lr(e,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((e,n)=>{this._keysMap[e.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,fe(this.docs[0])?this.docs.forEach((t,e)=>{this._addString(t,e)}):this.docs.forEach((t,e)=>{this._addObject(t,e)}),this.norm.clear())}add(t){const e=this.size();fe(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!re(t)||Ct(t))return;let n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}_addObject(t,e){let n={i:e,$:{}};this.keys.forEach((r,a)=>{let s=r.getFn?r.getFn(t):this.getFn(t,r.path);if(re(s)){if(ve(s)){let c=[];const u=[{nestedArrIndex:-1,value:s}];for(;u.length;){const{nestedArrIndex:v,value:h}=u.pop();if(re(h))if(fe(h)&&!Ct(h)){let p={v:h,i:v,n:this.norm.get(h)};c.push(p)}else ve(h)&&h.forEach((p,g)=>{u.push({nestedArrIndex:g,value:p})})}n.$[a]=c}else if(fe(s)&&!Ct(s)){let c={v:s,n:this.norm.get(s)};n.$[a]=c}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Ri(i,t,{getFn:e=T.getFn,fieldNormWeight:n=T.fieldNormWeight}={}){const r=new Bt({getFn:e,fieldNormWeight:n});return r.setKeys(i.map(Pi)),r.setSources(t),r.create(),r}function Pr(i,{getFn:t=T.getFn,fieldNormWeight:e=T.fieldNormWeight}={}){const{keys:n,records:r}=i,a=new Bt({getFn:t,fieldNormWeight:e});return a.setKeys(n),a.setIndexRecords(r),a}function nt(i,{errors:t=0,currentLocation:e=0,expectedLocation:n=0,distance:r=T.distance,ignoreLocation:a=T.ignoreLocation}={}){const s=t/i.length;if(a)return s;const c=Math.abs(n-e);return r?s+c/r:c?1:s}function Rr(i=[],t=T.minMatchCharLength){let e=[],n=-1,r=-1,a=0;for(let s=i.length;a<s;a+=1){let c=i[a];c&&n===-1?n=a:!c&&n!==-1&&(r=a-1,r-n+1>=t&&e.push([n,r]),n=-1)}return i[a-1]&&a-n>=t&&e.push([n,a-1]),e}const Te=32;function qr(i,t,e,{location:n=T.location,distance:r=T.distance,threshold:a=T.threshold,findAllMatches:s=T.findAllMatches,minMatchCharLength:c=T.minMatchCharLength,includeMatches:u=T.includeMatches,ignoreLocation:v=T.ignoreLocation}={}){if(t.length>Te)throw new Error(Sr(Te));const h=t.length,p=i.length,g=Math.max(0,Math.min(n,p));let m=a,y=g;const b=c>1||u,k=b?Array(p):[];let A;for(;(A=i.indexOf(t,y))>-1;){let F=nt(t,{currentLocation:A,expectedLocation:g,distance:r,ignoreLocation:v});if(m=Math.min(F,m),y=A+h,b){let U=0;for(;U<h;)k[A+U]=1,U+=1}}y=-1;let P=[],R=1,V=h+p;const Q=1<<h-1;for(let F=0;F<h;F+=1){let U=0,ae=V;for(;U<ae;)nt(t,{errors:F,currentLocation:g+ae,expectedLocation:g,distance:r,ignoreLocation:v})<=m?U=ae:V=ae,ae=Math.floor((V-U)/2+U);V=ae;let be=Math.max(1,g-ae+1),je=s?p:Math.min(g+ae,p)+h,ce=Array(je+2);ce[je+1]=(1<<F)-1;for(let ee=je;ee>=be;ee-=1){let Se=ee-1,Ge=e[i.charAt(Se)];if(b&&(k[Se]=+!!Ge),ce[ee]=(ce[ee+1]<<1|1)&Ge,F&&(ce[ee]|=(P[ee+1]|P[ee])<<1|1|P[ee+1]),ce[ee]&Q&&(R=nt(t,{errors:F,currentLocation:Se,expectedLocation:g,distance:r,ignoreLocation:v}),R<=m)){if(m=R,y=Se,y<=g)break;be=Math.max(1,2*g-y)}}if(nt(t,{errors:F+1,currentLocation:g,expectedLocation:g,distance:r,ignoreLocation:v})>m)break;P=ce}const B={isMatch:y>=0,score:Math.max(.001,R)};if(b){const F=Rr(k,c);F.length?u&&(B.indices=F):B.isMatch=!1}return B}function Fr(i){let t={};for(let e=0,n=i.length;e<n;e+=1){const r=i.charAt(e);t[r]=(t[r]||0)|1<<n-e-1}return t}class qi{constructor(t,{location:e=T.location,threshold:n=T.threshold,distance:r=T.distance,includeMatches:a=T.includeMatches,findAllMatches:s=T.findAllMatches,minMatchCharLength:c=T.minMatchCharLength,isCaseSensitive:u=T.isCaseSensitive,ignoreLocation:v=T.ignoreLocation}={}){if(this.options={location:e,threshold:n,distance:r,includeMatches:a,findAllMatches:s,minMatchCharLength:c,isCaseSensitive:u,ignoreLocation:v},this.pattern=u?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(g,m)=>{this.chunks.push({pattern:g,alphabet:Fr(g),startIndex:m})},p=this.pattern.length;if(p>Te){let g=0;const m=p%Te,y=p-m;for(;g<y;)h(this.pattern.substr(g,Te),g),g+=Te;if(m){const b=p-Te;h(this.pattern.substr(b),b)}}else h(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,includeMatches:n}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let y={isMatch:!0,score:0};return n&&(y.indices=[[0,t.length-1]]),y}const{location:r,distance:a,threshold:s,findAllMatches:c,minMatchCharLength:u,ignoreLocation:v}=this.options;let h=[],p=0,g=!1;this.chunks.forEach(({pattern:y,alphabet:b,startIndex:k})=>{const{isMatch:A,score:P,indices:R}=qr(t,y,b,{location:r+k,distance:a,threshold:s,findAllMatches:c,minMatchCharLength:u,includeMatches:n,ignoreLocation:v});A&&(g=!0),p+=P,A&&R&&(h=[...h,...R])});let m={isMatch:g,score:g?p/this.chunks.length:1};return g&&n&&(m.indices=h),m}}class Ce{constructor(t){this.pattern=t}static isMultiMatch(t){return vi(t,this.multiRegex)}static isSingleMatch(t){return vi(t,this.singleRegex)}search(){}}function vi(i,t){const e=i.match(t);return e?e[1]:null}class jr extends Ce{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}}class $r extends Ce{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class Hr extends Ce{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}}class Vr extends Ce{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}}class Br extends Ce{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Yr extends Ce{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}}class Fi extends Ce{constructor(t,{location:e=T.location,threshold:n=T.threshold,distance:r=T.distance,includeMatches:a=T.includeMatches,findAllMatches:s=T.findAllMatches,minMatchCharLength:c=T.minMatchCharLength,isCaseSensitive:u=T.isCaseSensitive,ignoreLocation:v=T.ignoreLocation}={}){super(t),this._bitapSearch=new qi(t,{location:e,threshold:n,distance:r,includeMatches:a,findAllMatches:s,minMatchCharLength:c,isCaseSensitive:u,ignoreLocation:v})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class ji extends Ce{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e=0,n;const r=[],a=this.pattern.length;for(;(n=t.indexOf(this.pattern,e))>-1;)e=n+a,r.push([n,e-1]);const s=!!r.length;return{isMatch:s,score:s?0:1,indices:r}}}const Ot=[jr,ji,Hr,Vr,Yr,Br,$r,Fi],bi=Ot.length,Kr=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,zr="|";function Ur(i,t={}){return i.split(zr).map(e=>{let n=e.trim().split(Kr).filter(a=>a&&!!a.trim()),r=[];for(let a=0,s=n.length;a<s;a+=1){const c=n[a];let u=!1,v=-1;for(;!u&&++v<bi;){const h=Ot[v];let p=h.isMultiMatch(c);p&&(r.push(new h(p,t)),u=!0)}if(!u)for(v=-1;++v<bi;){const h=Ot[v];let p=h.isSingleMatch(c);if(p){r.push(new h(p,t));break}}}return r})}const Wr=new Set([Fi.type,ji.type]);class Gr{constructor(t,{isCaseSensitive:e=T.isCaseSensitive,includeMatches:n=T.includeMatches,minMatchCharLength:r=T.minMatchCharLength,ignoreLocation:a=T.ignoreLocation,findAllMatches:s=T.findAllMatches,location:c=T.location,threshold:u=T.threshold,distance:v=T.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:n,minMatchCharLength:r,findAllMatches:s,ignoreLocation:a,location:c,threshold:u,distance:v},this.pattern=e?t:t.toLowerCase(),this.query=Ur(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r}=this.options;t=r?t:t.toLowerCase();let a=0,s=[],c=0;for(let u=0,v=e.length;u<v;u+=1){const h=e[u];s.length=0,a=0;for(let p=0,g=h.length;p<g;p+=1){const m=h[p],{isMatch:y,indices:b,score:k}=m.search(t);if(y){if(a+=1,c+=k,n){const A=m.constructor.type;Wr.has(A)?s=[...s,...b]:s.push(b)}}else{c=0,a=0,s.length=0;break}}if(a){let p={isMatch:!0,score:c/a};return n&&(p.indices=s),p}}return{isMatch:!1,score:1}}}const Nt=[];function Jr(...i){Nt.push(...i)}function Lt(i,t){for(let e=0,n=Nt.length;e<n;e+=1){let r=Nt[e];if(r.condition(i,t))return new r(i,t)}return new qi(i,t)}const ot={AND:"$and",OR:"$or"},Pt={PATH:"$path",PATTERN:"$val"},Rt=i=>!!(i[ot.AND]||i[ot.OR]),Xr=i=>!!i[Pt.PATH],Zr=i=>!ve(i)&&Ni(i)&&!Rt(i),_i=i=>({[ot.AND]:Object.keys(i).map(t=>({[t]:i[t]}))});function $i(i,t,{auto:e=!0}={}){const n=r=>{let a=Object.keys(r);const s=Xr(r);if(!s&&a.length>1&&!Rt(r))return n(_i(r));if(Zr(r)){const u=s?r[Pt.PATH]:a[0],v=s?r[Pt.PATTERN]:r[u];if(!fe(v))throw new Error(Er(u));const h={keyId:kt(u),pattern:v};return e&&(h.searcher=Lt(v,t)),h}let c={children:[],operator:a[0]};return a.forEach(u=>{const v=r[u];ve(v)&&v.forEach(h=>{c.children.push(n(h))})}),c};return Rt(i)||(i=_i(i)),n(i)}function Qr(i,{ignoreFieldNorm:t=T.ignoreFieldNorm}){i.forEach(e=>{let n=1;e.matches.forEach(({key:r,norm:a,score:s})=>{const c=r?r.weight:null;n*=Math.pow(s===0&&c?Number.EPSILON:s,(c||1)*(t?1:a))}),e.score=n})}function ea(i,t){const e=i.matches;t.matches=[],re(e)&&e.forEach(n=>{if(!re(n.indices)||!n.indices.length)return;const{indices:r,value:a}=n;let s={indices:r,value:a};n.key&&(s.key=n.key.src),n.idx>-1&&(s.refIndex=n.idx),t.matches.push(s)})}function ta(i,t){t.score=i.score}function ia(i,t,{includeMatches:e=T.includeMatches,includeScore:n=T.includeScore}={}){const r=[];return e&&r.push(ea),n&&r.push(ta),i.map(a=>{const{idx:s}=a,c={item:t[s],refIndex:s};return r.length&&r.forEach(u=>{u(a,c)}),c})}class Fe{constructor(t,e={},n){this.options=Oe(Oe({},T),e),this.options.useExtendedSearch,this._keyStore=new Tr(this.options.keys),this.setCollection(t,n)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof Bt))throw new Error(Cr);this._myIndex=e||Ri(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){re(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const e=[];for(let n=0,r=this._docs.length;n<r;n+=1){const a=this._docs[n];t(a,n)&&(this.removeAt(n),n-=1,r-=1,e.push(a))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:a,sortFn:s,ignoreFieldNorm:c}=this.options;let u=fe(t)?fe(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Qr(u,{ignoreFieldNorm:c}),a&&u.sort(s),Oi(e)&&e>-1&&(u=u.slice(0,e)),ia(u,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(t){const e=Lt(t,this.options),{records:n}=this._myIndex,r=[];return n.forEach(({v:a,i:s,n:c})=>{if(!re(a))return;const{isMatch:u,score:v,indices:h}=e.searchIn(a);u&&r.push({item:a,idx:s,matches:[{score:v,value:a,norm:c,indices:h}]})}),r}_searchLogical(t){const e=$i(t,this.options),n=(c,u,v)=>{if(!c.children){const{keyId:p,searcher:g}=c,m=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(u,p),searcher:g});return m&&m.length?[{idx:v,item:u,matches:m}]:[]}const h=[];for(let p=0,g=c.children.length;p<g;p+=1){const m=c.children[p],y=n(m,u,v);if(y.length)h.push(...y);else if(c.operator===ot.AND)return[]}return h},r=this._myIndex.records,a={},s=[];return r.forEach(({$:c,i:u})=>{if(re(c)){let v=n(e,c,u);v.length&&(a[u]||(a[u]={idx:u,item:c,matches:[]},s.push(a[u])),v.forEach(({matches:h})=>{a[u].matches.push(...h)}))}}),s}_searchObjectList(t){const e=Lt(t,this.options),{keys:n,records:r}=this._myIndex,a=[];return r.forEach(({$:s,i:c})=>{if(!re(s))return;let u=[];n.forEach((v,h)=>{u.push(...this._findMatches({key:v,value:s[h],searcher:e}))}),u.length&&a.push({idx:c,item:s,matches:u})}),a}_findMatches({key:t,value:e,searcher:n}){if(!re(e))return[];let r=[];if(ve(e))e.forEach(({v:a,i:s,n:c})=>{if(!re(a))return;const{isMatch:u,score:v,indices:h}=n.searchIn(a);u&&r.push({score:v,key:t,value:a,idx:s,norm:c,indices:h})});else{const{v:a,n:s}=e,{isMatch:c,score:u,indices:v}=n.searchIn(a);c&&r.push({score:u,key:t,value:a,norm:s,indices:v})}return r}}Fe.version="7.0.0";Fe.createIndex=Ri;Fe.parseIndex=Pr;Fe.config=T;Fe.parseQuery=$i;Jr(Gr);var na=(function(){function i(t){this._haystack=[],this._fuseOptions=J(J({},t.fuseOptions),{keys:jn([],t.searchFields),includeMatches:!0})}return i.prototype.index=function(t){this._haystack=t,this._fuse&&this._fuse.setCollection(t)},i.prototype.reset=function(){this._haystack=[],this._fuse=void 0},i.prototype.isEmptyIndex=function(){return!this._haystack.length},i.prototype.search=function(t){this._fuse||(this._fuse=new Fe(this._haystack,this._fuseOptions));var e=this._fuse.search(t);return e.map(function(n,r){return{item:n.item,score:n.score||0,rank:r+1}})},i})();function ra(i){return new na(i)}var aa=function(i){for(var t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0},Et=function(i,t,e){var n=i.dataset,r=t.customProperties,a=t.labelClass,s=t.labelDescription;a&&(n.labelClass=ht(a).join(" ")),s&&(n.labelDescription=s),e&&r&&(typeof r=="string"?n.customProperties=r:typeof r=="object"&&!aa(r)&&(n.customProperties=JSON.stringify(r)))},yi=function(i,t,e){var n=t&&i.querySelector("label[for='".concat(t,"']")),r=n&&n.innerText;r&&e.setAttribute("aria-label",r)},sa={containerOuter:function(i,t,e,n,r,a,s){var c=i.classNames.containerOuter,u=document.createElement("div");return x(u,c),u.dataset.type=a,t&&(u.dir=t),n&&(u.tabIndex=0),e&&(u.setAttribute("role",r?"combobox":"listbox"),r?u.setAttribute("aria-autocomplete","list"):s||yi(this._docRoot,this.passedElement.element.id,u),u.setAttribute("aria-haspopup","true"),u.setAttribute("aria-expanded","false")),s&&u.setAttribute("aria-labelledby",s),u},containerInner:function(i){var t=i.classNames.containerInner,e=document.createElement("div");return x(e,t),e},itemList:function(i,t){var e=i.searchEnabled,n=i.classNames,r=n.list,a=n.listSingle,s=n.listItems,c=document.createElement("div");return x(c,r),x(c,t?a:s),this._isSelectElement&&e&&c.setAttribute("role","listbox"),c},placeholder:function(i,t){var e=i.allowHTML,n=i.classNames.placeholder,r=document.createElement("div");return x(r,n),me(r,e,t),r},item:function(i,t,e){var n=i.allowHTML,r=i.removeItemButtonAlignLeft,a=i.removeItemIconText,s=i.removeItemLabelText,c=i.classNames,u=c.item,v=c.button,h=c.highlightedState,p=c.itemSelectable,g=c.placeholder,m=Ae(t.value),y=document.createElement("div");if(x(y,u),t.labelClass){var b=document.createElement("span");me(b,n,t.label),x(b,t.labelClass),y.appendChild(b)}else me(y,n,t.label);if(y.dataset.item="",y.dataset.id=t.id,y.dataset.value=m,Et(y,t,!0),(t.disabled||this.containerOuter.isDisabled)&&y.setAttribute("aria-disabled","true"),this._isSelectElement&&(y.setAttribute("aria-selected","true"),y.setAttribute("role","option")),t.placeholder&&(x(y,g),y.dataset.placeholder=""),x(y,t.highlighted?h:p),e){t.disabled&&he(y,p),y.dataset.deletable="";var k=document.createElement("button");k.type="button",x(k,v),me(k,!0,ze(a,t.value));var A=ze(s,t.value);A&&k.setAttribute("aria-label",A),k.dataset.button="",r?y.insertAdjacentElement("afterbegin",k):y.appendChild(k)}return y},choiceList:function(i,t){var e=i.classNames.list,n=document.createElement("div");return x(n,e),t||n.setAttribute("aria-multiselectable","true"),n.setAttribute("role","listbox"),n},choiceGroup:function(i,t){var e=i.allowHTML,n=i.classNames,r=n.group,a=n.groupHeading,s=n.itemDisabled,c=t.id,u=t.label,v=t.disabled,h=Ae(u),p=document.createElement("div");x(p,r),v&&x(p,s),p.setAttribute("role","group"),p.dataset.group="",p.dataset.id=c,p.dataset.value=h,v&&p.setAttribute("aria-disabled","true");var g=document.createElement("div");return x(g,a),me(g,e,u||""),p.appendChild(g),p},choice:function(i,t,e,n){var r=i.allowHTML,a=i.classNames,s=a.item,c=a.itemChoice,u=a.itemSelectable,v=a.selectedState,h=a.itemDisabled,p=a.description,g=a.placeholder,m=t.label,y=Ae(t.value),b=document.createElement("div");b.id=t.elementId,x(b,s),x(b,c),n&&typeof m=="string"&&(m=Vt(r,m),m+=" (".concat(n,")"),m={trusted:m});var k=b;if(t.labelClass){var A=document.createElement("span");me(A,r,m),x(A,t.labelClass),k=A,b.appendChild(A)}else me(b,r,m);if(t.labelDescription){var P="".concat(t.elementId,"-description");k.setAttribute("aria-describedby",P);var R=document.createElement("span");me(R,r,t.labelDescription),R.id=P,x(R,p),b.appendChild(R)}return t.selected&&x(b,v),t.placeholder&&x(b,g),b.setAttribute("role",t.group?"treeitem":"option"),b.dataset.choice="",b.dataset.id=t.id,b.dataset.value=y,e&&(b.dataset.selectText=e),t.group&&(b.dataset.groupId="".concat(t.group.id)),Et(b,t,!1),t.disabled?(x(b,h),b.dataset.choiceDisabled="",b.setAttribute("aria-disabled","true")):(x(b,u),b.dataset.choiceSelectable=""),b},input:function(i,t){var e=i.classNames,n=e.input,r=e.inputCloned,a=i.labelId,s=document.createElement("input");return s.type="search",x(s,n),x(s,r),s.autocomplete="off",s.autocapitalize="off",s.spellcheck=!1,s.setAttribute("aria-autocomplete","list"),t?s.setAttribute("aria-label",t):a||yi(this._docRoot,this.passedElement.element.id,s),s},dropdown:function(i){var t=i.classNames,e=t.list,n=t.listDropdown,r=document.createElement("div");return x(r,e),x(r,n),r.setAttribute("aria-expanded","false"),r},notice:function(i,t,e){var n=i.classNames,r=n.item,a=n.itemChoice,s=n.addChoice,c=n.noResults,u=n.noChoices,v=n.notice;e===void 0&&(e=Y.generic);var h=document.createElement("div");switch(me(h,!0,t),x(h,r),x(h,a),x(h,v),e){case Y.addChoice:x(h,s);break;case Y.noResults:x(h,c);break;case Y.noChoices:x(h,u);break}return e===Y.addChoice&&(h.dataset.choiceSelectable="",h.dataset.choice=""),h},option:function(i){var t=Ae(i.label),e=new Option(t,i.value,!1,i.selected);return Et(e,i,!0),e.disabled=i.disabled,i.selected&&e.setAttribute("selected",""),e}},oa="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style,la={},St=function(i){if(i)return i.dataset.id?parseInt(i.dataset.id,10):void 0},Be="[data-choice-selectable]",lt=(function(){function i(t,e){t===void 0&&(t="[data-choice]"),e===void 0&&(e={});var n=this;this.initialisedOK=void 0,this._hasNonChoicePlaceholder=!1,this._lastAddedChoiceId=0,this._lastAddedGroupId=0;var r=i.defaults;this.config=J(J(J({},r.allOptions),r.options),e),$n.forEach(function(A){n.config[A]=J(J(J({},r.allOptions[A]),r.options[A]),e[A])});var a=this.config;a.silent||this._validateConfig();var s=a.shadowRoot||document.documentElement;this._docRoot=s;var c=typeof t=="string"?s.querySelector(t):t;if(!c||typeof c!="object"||!(sr(c)||ki(c)))throw TypeError(!c&&typeof t=="string"?"Selector ".concat(t," failed to find an element"):"Expected one of the following types text|select-one|select-multiple");var u=c.type,v=u===we.Text;(v||a.maxItemCount!==1)&&(a.singleModeForMultiSelect=!1),a.singleModeForMultiSelect&&(u=we.SelectMultiple);var h=u===we.SelectOne,p=u===we.SelectMultiple,g=h||p;if(this._elementType=u,this._isTextElement=v,this._isSelectOneElement=h,this._isSelectMultipleElement=p,this._isSelectElement=h||p,this._canAddUserChoices=v&&a.addItems||g&&a.addChoices,typeof a.renderSelectedChoices!="boolean"&&(a.renderSelectedChoices=a.renderSelectedChoices==="always"||h),a.closeDropdownOnSelect==="auto"?a.closeDropdownOnSelect=v||h||a.singleModeForMultiSelect:a.closeDropdownOnSelect=Ye(a.closeDropdownOnSelect),a.placeholder&&(a.placeholderValue?this._hasNonChoicePlaceholder=!0:c.dataset.placeholder&&(this._hasNonChoicePlaceholder=!0,a.placeholderValue=c.dataset.placeholder)),e.addItemFilter&&typeof e.addItemFilter!="function"){var m=e.addItemFilter instanceof RegExp?e.addItemFilter:new RegExp(e.addItemFilter);a.addItemFilter=m.test.bind(m)}if(this._isTextElement)this.passedElement=new ar({element:c,classNames:a.classNames});else{var y=c;this.passedElement=new cr({element:y,classNames:a.classNames,template:function(A){return n._templates.option(A)},extractPlaceholder:a.placeholder&&!this._hasNonChoicePlaceholder})}if(this.initialised=!1,this._store=new pr(a),this._currentValue="",a.searchEnabled=!v&&a.searchEnabled||p,this._canSearch=a.searchEnabled,this._isScrollingOnIe=!1,this._highlightPosition=0,this._wasTap=!0,this._placeholderValue=this._generatePlaceholderValue(),this._baseId=zn(c,"choices-"),this._direction=c.dir,!this._direction){var b=window.getComputedStyle(c).direction,k=window.getComputedStyle(document.documentElement).direction;b!==k&&(this._direction=b)}if(this._idNames={itemChoice:"item-choice"},this._templates=r.templates,this._render=this._render.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onInput=this._onInput.bind(this),this._onClick=this._onClick.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onFormReset=this._onFormReset.bind(this),this._onSelectKey=this._onSelectKey.bind(this),this._onEnterKey=this._onEnterKey.bind(this),this._onEscapeKey=this._onEscapeKey.bind(this),this._onDirectionKey=this._onDirectionKey.bind(this),this._onDeleteKey=this._onDeleteKey.bind(this),this.passedElement.isActive){a.silent||console.warn("Trying to initialise Choices on element already initialised",{element:t}),this.initialised=!0,this.initialisedOK=!1;return}this.init(),this._initialItems=this._store.items.map(function(A){return A.value})}return Object.defineProperty(i,"defaults",{get:function(){return Object.preventExtensions({get options(){return la},get allOptions(){return ui},get templates(){return sa}})},enumerable:!1,configurable:!0}),i.prototype.init=function(){if(!(this.initialised||this.initialisedOK!==void 0)){this._searcher=ra(this.config),this._loadChoices(),this._createTemplates(),this._createElements(),this._createStructure(),this._isTextElement&&!this.config.addItems||this.passedElement.element.hasAttribute("disabled")||this.passedElement.element.closest("fieldset:disabled")?this.disable():(this.enable(),this._addEventListeners()),this._initStore(),this.initialised=!0,this.initialisedOK=!0;var t=this.config.callbackOnInit;typeof t=="function"&&t.call(this)}},i.prototype.destroy=function(){this.initialised&&(this._removeEventListeners(),this.passedElement.reveal(),this.containerOuter.unwrap(this.passedElement.element),this._store._listeners=[],this.clearStore(!1),this._stopSearch(),this._templates=i.defaults.templates,this.initialised=!1,this.initialisedOK=void 0)},i.prototype.enable=function(){return this.passedElement.isDisabled&&this.passedElement.enable(),this.containerOuter.isDisabled&&(this._addEventListeners(),this.input.enable(),this.containerOuter.enable()),this},i.prototype.disable=function(){return this.passedElement.isDisabled||this.passedElement.disable(),this.containerOuter.isDisabled||(this._removeEventListeners(),this.input.disable(),this.containerOuter.disable()),this},i.prototype.highlightItem=function(t,e){if(e===void 0&&(e=!0),!t||!t.id)return this;var n=this._store.items.find(function(r){return r.id===t.id});return!n||n.highlighted?this:(this._store.dispatch(it(n,!0)),e&&this.passedElement.triggerEvent(G.highlightItem,this._getChoiceForOutput(n)),this)},i.prototype.unhighlightItem=function(t,e){if(e===void 0&&(e=!0),!t||!t.id)return this;var n=this._store.items.find(function(r){return r.id===t.id});return!n||!n.highlighted?this:(this._store.dispatch(it(n,!1)),e&&this.passedElement.triggerEvent(G.unhighlightItem,this._getChoiceForOutput(n)),this)},i.prototype.highlightAll=function(){var t=this;return this._store.withTxn(function(){t._store.items.forEach(function(e){e.highlighted||(t._store.dispatch(it(e,!0)),t.passedElement.triggerEvent(G.highlightItem,t._getChoiceForOutput(e)))})}),this},i.prototype.unhighlightAll=function(){var t=this;return this._store.withTxn(function(){t._store.items.forEach(function(e){e.highlighted&&(t._store.dispatch(it(e,!1)),t.passedElement.triggerEvent(G.highlightItem,t._getChoiceForOutput(e)))})}),this},i.prototype.removeActiveItemsByValue=function(t){var e=this;return this._store.withTxn(function(){e._store.items.filter(function(n){return n.value===t}).forEach(function(n){return e._removeItem(n)})}),this},i.prototype.removeActiveItems=function(t){var e=this;return this._store.withTxn(function(){e._store.items.filter(function(n){var r=n.id;return r!==t}).forEach(function(n){return e._removeItem(n)})}),this},i.prototype.removeHighlightedItems=function(t){var e=this;return t===void 0&&(t=!1),this._store.withTxn(function(){e._store.highlightedActiveItems.forEach(function(n){e._removeItem(n),t&&e._triggerChange(n.value)})}),this},i.prototype.showDropdown=function(t){var e=this;return this.dropdown.isActive?this:(t===void 0&&(t=!this._canSearch),requestAnimationFrame(function(){e.dropdown.show();var n=e.dropdown.element.getBoundingClientRect();e.containerOuter.open(n.bottom,n.height),t||e.input.focus(),e.passedElement.triggerEvent(G.showDropdown)}),this)},i.prototype.hideDropdown=function(t){var e=this;return this.dropdown.isActive?(requestAnimationFrame(function(){e.dropdown.hide(),e.containerOuter.close(),!t&&e._canSearch&&(e.input.removeActiveDescendant(),e.input.blur()),e.passedElement.triggerEvent(G.hideDropdown)}),this):this},i.prototype.getValue=function(t){var e=this,n=this._store.items.map(function(r){return t?r.value:e._getChoiceForOutput(r)});return this._isSelectOneElement||this.config.singleModeForMultiSelect?n[0]:n},i.prototype.setValue=function(t){var e=this;return this.initialisedOK?(this._store.withTxn(function(){t.forEach(function(n){n&&e._addChoice(ue(n,!1))})}),this._searcher.reset(),this):(this._warnChoicesInitFailed("setValue"),this)},i.prototype.setChoiceByValue=function(t){var e=this;return this.initialisedOK?this._isTextElement?this:(this._store.withTxn(function(){var n=Array.isArray(t)?t:[t];n.forEach(function(r){return e._findAndSelectChoiceByValue(r)}),e.unhighlightAll()}),this._searcher.reset(),this):(this._warnChoicesInitFailed("setChoiceByValue"),this)},i.prototype.setChoices=function(t,e,n,r,a,s){var c=this;if(t===void 0&&(t=[]),e===void 0&&(e="value"),n===void 0&&(n="label"),r===void 0&&(r=!1),a===void 0&&(a=!0),s===void 0&&(s=!1),!this.initialisedOK)return this._warnChoicesInitFailed("setChoices"),this;if(!this._isSelectElement)throw new TypeError("setChoices can't be used with INPUT based Choices");if(typeof e!="string"||!e)throw new TypeError("value parameter must be a name of 'value' field in passed objects");if(typeof t=="function"){var u=t(this);if(typeof Promise=="function"&&u instanceof Promise)return new Promise(function(v){return requestAnimationFrame(v)}).then(function(){return c._handleLoadingState(!0)}).then(function(){return u}).then(function(v){return c.setChoices(v,e,n,r,a,s)}).catch(function(v){c.config.silent||console.error(v)}).then(function(){return c._handleLoadingState(!1)}).then(function(){return c});if(!Array.isArray(u))throw new TypeError(".setChoices first argument function must return either array of choices or Promise, got: ".concat(typeof u));return this.setChoices(u,e,n,!1)}if(!Array.isArray(t))throw new TypeError(".setChoices must be called either with array of choices with a function resulting into Promise of array of choices");return this.containerOuter.removeLoadingState(),this._store.withTxn(function(){a&&(c._isSearching=!1),r&&c.clearChoices(!0,s);var v=e==="value",h=n==="label";t.forEach(function(p){if("choices"in p){var g=p;h||(g=J(J({},g),{label:g[n]})),c._addGroup(ue(g,!0))}else{var m=p;(!h||!v)&&(m=J(J({},m),{value:m[e],label:m[n]}));var y=ue(m,!1);c._addChoice(y),y.placeholder&&!c._hasNonChoicePlaceholder&&(c._placeholderValue=Ii(y.label))}}),c.unhighlightAll()}),this._searcher.reset(),this},i.prototype.refresh=function(t,e,n){var r=this;return t===void 0&&(t=!1),e===void 0&&(e=!1),n===void 0&&(n=!1),this._isSelectElement?(this._store.withTxn(function(){var a=r.passedElement.optionsAsChoices(),s={};n||r._store.items.forEach(function(u){u.id&&u.active&&u.selected&&(s[u.value]=!0)}),r.clearStore(!1);var c=function(u){n?r._store.dispatch(si(u)):s[u.value]&&(u.selected=!0)};a.forEach(function(u){if("choices"in u){u.choices.forEach(c);return}c(u)}),r._addPredefinedChoices(a,e,t),r._isSearching&&r._searchChoices(r.input.value)}),this):(this.config.silent||console.warn("refresh method can only be used on choices backed by a <select> element"),this)},i.prototype.removeChoice=function(t){var e=this._store.choices.find(function(n){return n.value===t});return e?(this._clearNotice(),this._store.dispatch(Hn(e)),this._searcher.reset(),e.selected&&this.passedElement.triggerEvent(G.removeItem,this._getChoiceForOutput(e)),this):this},i.prototype.clearChoices=function(t,e){var n=this;return t===void 0&&(t=!0),e===void 0&&(e=!1),t&&(e?this.passedElement.element.replaceChildren(""):this.passedElement.element.querySelectorAll(":not([selected])").forEach(function(r){r.remove()})),this.itemList.element.replaceChildren(""),this.choiceList.element.replaceChildren(""),this._clearNotice(),this._store.withTxn(function(){var r=e?[]:n._store.items;n._store.reset(),r.forEach(function(a){n._store.dispatch(ri(a)),n._store.dispatch(ai(a))})}),this._searcher.reset(),this},i.prototype.clearStore=function(t){return t===void 0&&(t=!0),this.clearChoices(t,!0),this._stopSearch(),this._lastAddedChoiceId=0,this._lastAddedGroupId=0,this},i.prototype.clearInput=function(){var t=!this._isSelectOneElement;return this.input.clear(t),this._stopSearch(),this},i.prototype._validateConfig=function(){var t=this.config,e=Qn(t,ui);e.length&&console.warn("Unknown config option(s) passed",e.join(", ")),t.allowHTML&&t.allowHtmlUserInput&&(t.addItems&&console.warn("Warning: allowHTML/allowHtmlUserInput/addItems all being true is strongly not recommended and may lead to XSS attacks"),t.addChoices&&console.warn("Warning: allowHTML/allowHtmlUserInput/addChoices all being true is strongly not recommended and may lead to XSS attacks"))},i.prototype._render=function(t){t===void 0&&(t={choices:!0,groups:!0,items:!0}),!this._store.inTxn()&&(this._isSelectElement&&(t.choices||t.groups)&&this._renderChoices(),t.items&&this._renderItems())},i.prototype._renderChoices=function(){var t=this;if(this._canAddItems()){var e=this,n=e.config,r=e._isSearching,a=this._store,s=a.activeGroups,c=a.activeChoices,u=0;if(r&&n.searchResultLimit>0?u=n.searchResultLimit:n.renderChoiceLimit>0&&(u=n.renderChoiceLimit),this._isSelectElement){var v=c.filter(function(y){return!y.element});v.length&&this.passedElement.addOptions(v)}var h=document.createDocumentFragment(),p=function(y){return y.filter(function(b){return!b.placeholder&&(r?!!b.rank:n.renderSelectedChoices||!b.selected)})},g=!1,m=function(y,b,k){r?y.sort(Xn):n.shouldSort&&y.sort(n.sorter);var A=y.length;A=!b&&u&&A>u?u:A,A--,y.every(function(P,R){var V=P.choiceEl||t._templates.choice(n,P,n.itemSelectText,k);return P.choiceEl=V,h.appendChild(V),(r||!P.selected)&&(g=!0),R<A})};c.length&&(n.resetScrollPosition&&requestAnimationFrame(function(){return t.choiceList.scrollToTop()}),!this._hasNonChoicePlaceholder&&!r&&this._isSelectOneElement&&m(c.filter(function(y){return y.placeholder&&!y.group}),!1,void 0),s.length&&!r?(n.shouldSort&&s.sort(n.sorter),m(c.filter(function(y){return!y.placeholder&&!y.group}),!1,void 0),s.forEach(function(y){var b=p(y.choices);if(b.length){if(y.label){var k=y.groupEl||t._templates.choiceGroup(t.config,y);y.groupEl=k,k.remove(),h.appendChild(k)}m(b,!0,n.appendGroupInSearch&&r?y.label:void 0)}})):m(p(c),!1,void 0)),!g&&(r||!h.children.length||!n.renderSelectedChoices)&&(this._notice||(this._notice={text:li(r?n.noResultsText:n.noChoicesText),type:r?Y.noResults:Y.noChoices}),h.replaceChildren("")),this._renderNotice(h),this.choiceList.element.replaceChildren(h),g&&this._highlightChoice()}},i.prototype._renderItems=function(){var t=this,e=this._store.items||[],n=this.itemList.element,r=this.config,a=document.createDocumentFragment(),s=function(p){return n.querySelector('[data-item][data-id="'.concat(p.id,'"]'))},c=function(p){var g=p.itemEl;g&&g.parentElement||(g=s(p)||t._templates.item(r,p,r.removeItemButton),p.itemEl=g,a.appendChild(g))};e.forEach(c);var u=!!a.childNodes.length;if(this._isSelectOneElement){var v=n.children.length;if(u||v>1){var h=n.querySelector(Ve(r.classNames.placeholder));h&&h.remove()}else!u&&!v&&this._placeholderValue&&(u=!0,c(ue({selected:!0,value:"",label:this._placeholderValue,placeholder:!0},!1)))}u&&(n.append(a),r.shouldSortItems&&!this._isSelectOneElement&&(e.sort(r.sorter),e.forEach(function(p){var g=s(p);g&&(g.remove(),a.append(g))}),n.append(a))),this._isTextElement&&(this.passedElement.value=e.map(function(p){var g=p.value;return g}).join(r.delimiter))},i.prototype._displayNotice=function(t,e,n){n===void 0&&(n=!0);var r=this._notice;if(r&&(r.type===e&&r.text===t||r.type===Y.addChoice&&(e===Y.noResults||e===Y.noChoices))){n&&this.showDropdown(!0);return}this._clearNotice(),this._notice=t?{text:t,type:e}:void 0,this._renderNotice(),n&&t&&this.showDropdown(!0)},i.prototype._clearNotice=function(){if(this._notice){var t=this.choiceList.element.querySelector(Ve(this.config.classNames.notice));t&&t.remove(),this._notice=void 0}},i.prototype._renderNotice=function(t){var e=this._notice;if(e){var n=this._templates.notice(this.config,e.text,e.type);t?t.append(n):this.choiceList.prepend(n)}},i.prototype._getChoiceForOutput=function(t,e){return{id:t.id,highlighted:t.highlighted,labelClass:t.labelClass,labelDescription:t.labelDescription,customProperties:t.customProperties,disabled:t.disabled,active:t.active,label:t.label,placeholder:t.placeholder,value:t.value,groupValue:t.group?t.group.label:void 0,element:t.element,keyCode:e}},i.prototype._triggerChange=function(t){t!=null&&this.passedElement.triggerEvent(G.change,{value:t})},i.prototype._handleButtonAction=function(t){var e=this,n=this._store.items;if(!(!n.length||!this.config.removeItems||!this.config.removeItemButton)){var r=t&&St(t.parentElement),a=r&&n.find(function(s){return s.id===r});a&&this._store.withTxn(function(){if(e._removeItem(a),e._triggerChange(a.value),e._isSelectOneElement&&!e._hasNonChoicePlaceholder){var s=(e.config.shouldSort?e._store.choices.reverse():e._store.choices).find(function(c){return c.placeholder});s&&(e._addItem(s),e.unhighlightAll(),s.value&&e._triggerChange(s.value))}})}},i.prototype._handleItemAction=function(t,e){var n=this;e===void 0&&(e=!1);var r=this._store.items;if(!(!r.length||!this.config.removeItems||this._isSelectOneElement)){var a=St(t);a&&(r.forEach(function(s){s.id===a&&!s.highlighted?n.highlightItem(s):!e&&s.highlighted&&n.unhighlightItem(s)}),this.input.focus())}},i.prototype._handleChoiceAction=function(t){var e=this,n=St(t),r=n&&this._store.getChoiceById(n);if(!r||r.disabled)return!1;var a=this.dropdown.isActive;if(!r.selected){if(!this._canAddItems())return!0;this._store.withTxn(function(){e._addItem(r,!0,!0),e.clearInput(),e.unhighlightAll()}),this._triggerChange(r.value)}return a&&this.config.closeDropdownOnSelect&&(this.hideDropdown(!0),this.containerOuter.element.focus()),!0},i.prototype._handleBackspace=function(t){var e=this.config;if(!(!e.removeItems||!t.length)){var n=t[t.length-1],r=t.some(function(a){return a.highlighted});e.editItems&&!r&&n?(this.input.value=n.value,this.input.setWidth(),this._removeItem(n),this._triggerChange(n.value)):(r||this.highlightItem(n,!1),this.removeHighlightedItems(!0))}},i.prototype._loadChoices=function(){var t,e=this,n=this.config;if(this._isTextElement){if(this._presetChoices=n.items.map(function(s){return ue(s,!1)}),this.passedElement.value){var r=this.passedElement.value.split(n.delimiter).map(function(s){return ue(s,!1,e.config.allowHtmlUserInput)});this._presetChoices=this._presetChoices.concat(r)}this._presetChoices.forEach(function(s){s.selected=!0})}else if(this._isSelectElement){this._presetChoices=n.choices.map(function(s){return ue(s,!0)});var a=this.passedElement.optionsAsChoices();a&&(t=this._presetChoices).push.apply(t,a)}},i.prototype._handleLoadingState=function(t){t===void 0&&(t=!0);var e=this.itemList.element;t?(this.disable(),this.containerOuter.addLoadingState(),this._isSelectOneElement?e.replaceChildren(this._templates.placeholder(this.config,this.config.loadingText)):this.input.placeholder=this.config.loadingText):(this.enable(),this.containerOuter.removeLoadingState(),this._isSelectOneElement?(e.replaceChildren(""),this._render()):this.input.placeholder=this._placeholderValue||"")},i.prototype._handleSearch=function(t){if(this.input.isFocussed)if(t!==null&&typeof t<"u"&&t.length>=this.config.searchFloor){var e=this.config.searchChoices?this._searchChoices(t):0;e!==null&&this.passedElement.triggerEvent(G.search,{value:t,resultCount:e})}else this._store.choices.some(function(n){return!n.active})&&this._stopSearch()},i.prototype._canAddItems=function(){var t=this.config,e=t.maxItemCount,n=t.maxItemText;return!t.singleModeForMultiSelect&&e>0&&e<=this._store.items.length?(this.choiceList.element.replaceChildren(""),this._notice=void 0,this._displayNotice(typeof n=="function"?n(e):n,Y.addChoice),!1):(this._notice&&this._notice.type===Y.addChoice&&this._clearNotice(),!0)},i.prototype._canCreateItem=function(t){var e=this.config,n=!0,r="";if(n&&typeof e.addItemFilter=="function"&&!e.addItemFilter(t)&&(n=!1,r=ze(e.customAddItemText,t)),n){var a=this._store.choices.find(function(s){return e.valueComparer(s.value,t)});if(a){if(this._isSelectElement)return this._displayNotice("",Y.addChoice),!1;e.duplicateItemsAllowed||(n=!1,r=ze(e.uniqueItemText,t))}}return n&&(r=ze(e.addItemText,t)),r&&this._displayNotice(r,Y.addChoice),n},i.prototype._searchChoices=function(t){var e=t.trim().replace(/\s{2,}/," ");if(!e.length||e===this._currentValue)return null;var n=this._searcher;n.isEmptyIndex()&&n.index(this._store.searchableChoices);var r=n.search(e);this._currentValue=e,this._highlightPosition=0,this._isSearching=!0;var a=this._notice,s=a&&a.type;return s!==Y.addChoice&&(r.length?this._clearNotice():this._displayNotice(li(this.config.noResultsText),Y.noResults)),this._store.dispatch(Vn(r)),r.length},i.prototype._stopSearch=function(){this._isSearching&&(this._currentValue="",this._isSearching=!1,this._clearNotice(),this._store.dispatch(Bn(!0)),this.passedElement.triggerEvent(G.search,{value:"",resultCount:0}))},i.prototype._addEventListeners=function(){var t=this._docRoot,e=this.containerOuter.element,n=this.input.element;t.addEventListener("touchend",this._onTouchEnd,!0),e.addEventListener("keydown",this._onKeyDown,!0),e.addEventListener("mousedown",this._onMouseDown,!0),t.addEventListener("click",this._onClick,{passive:!0}),t.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.dropdown.element.addEventListener("mouseover",this._onMouseOver,{passive:!0}),this._isSelectOneElement&&(e.addEventListener("focus",this._onFocus,{passive:!0}),e.addEventListener("blur",this._onBlur,{passive:!0})),n.addEventListener("keyup",this._onKeyUp,{passive:!0}),n.addEventListener("input",this._onInput,{passive:!0}),n.addEventListener("focus",this._onFocus,{passive:!0}),n.addEventListener("blur",this._onBlur,{passive:!0}),n.form&&n.form.addEventListener("reset",this._onFormReset,{passive:!0}),this.input.addEventListeners()},i.prototype._removeEventListeners=function(){var t=this._docRoot,e=this.containerOuter.element,n=this.input.element;t.removeEventListener("touchend",this._onTouchEnd,!0),e.removeEventListener("keydown",this._onKeyDown,!0),e.removeEventListener("mousedown",this._onMouseDown,!0),t.removeEventListener("click",this._onClick),t.removeEventListener("touchmove",this._onTouchMove),this.dropdown.element.removeEventListener("mouseover",this._onMouseOver),this._isSelectOneElement&&(e.removeEventListener("focus",this._onFocus),e.removeEventListener("blur",this._onBlur)),n.removeEventListener("keyup",this._onKeyUp),n.removeEventListener("input",this._onInput),n.removeEventListener("focus",this._onFocus),n.removeEventListener("blur",this._onBlur),n.form&&n.form.removeEventListener("reset",this._onFormReset),this.input.removeEventListeners()},i.prototype._onKeyDown=function(t){var e=t.keyCode,n=this.dropdown.isActive,r=t.key.length===1||t.key.length===2&&t.key.charCodeAt(0)>=55296||t.key==="Unidentified";switch(!this._isTextElement&&!n&&e!==K.ESC_KEY&&e!==K.TAB_KEY&&e!==K.SHIFT_KEY&&(this.showDropdown(),!this.input.isFocussed&&r&&(this.input.value+=t.key,t.key===" "&&t.preventDefault())),e){case K.A_KEY:return this._onSelectKey(t,this.itemList.element.hasChildNodes());case K.ENTER_KEY:return this._onEnterKey(t,n);case K.ESC_KEY:return this._onEscapeKey(t,n);case K.UP_KEY:case K.PAGE_UP_KEY:case K.DOWN_KEY:case K.PAGE_DOWN_KEY:return this._onDirectionKey(t,n);case K.DELETE_KEY:case K.BACK_KEY:return this._onDeleteKey(t,this._store.items,this.input.isFocussed)}},i.prototype._onKeyUp=function(){this._canSearch=this.config.searchEnabled},i.prototype._onInput=function(){var t=this.input.value;if(!t){this._isTextElement?this.hideDropdown(!0):this._stopSearch();return}this._canAddItems()&&(this._canSearch&&this._handleSearch(t),this._canAddUserChoices&&(this._canCreateItem(t),this._isSelectElement&&(this._highlightPosition=0,this._highlightChoice())))},i.prototype._onSelectKey=function(t,e){if((t.ctrlKey||t.metaKey)&&e){this._canSearch=!1;var n=this.config.removeItems&&!this.input.value&&this.input.element===document.activeElement;n&&this.highlightAll()}},i.prototype._onEnterKey=function(t,e){var n=this,r=this.input.value,a=t.target;if(t.preventDefault(),a&&a.hasAttribute("data-button")){this._handleButtonAction(a);return}if(!e){(this._isSelectElement||this._notice)&&this.showDropdown();return}var s=this.dropdown.element.querySelector(Ve(this.config.classNames.highlightedState));if(!(s&&this._handleChoiceAction(s))){if(!a||!r){this.hideDropdown(!0);return}if(this._canAddItems()){var c=!1;this._store.withTxn(function(){if(c=n._findAndSelectChoiceByValue(r,!0),!c){if(!n._canAddUserChoices||!n._canCreateItem(r))return;n._addChoice(ue(r,!1,n.config.allowHtmlUserInput),!0,!0),c=!0}n.clearInput(),n.unhighlightAll()}),c&&(this._triggerChange(r),this.config.closeDropdownOnSelect&&this.hideDropdown(!0))}}},i.prototype._onEscapeKey=function(t,e){e&&(t.stopPropagation(),this.hideDropdown(!0),this._stopSearch(),this.containerOuter.element.focus())},i.prototype._onDirectionKey=function(t,e){var n=t.keyCode;if(e||this._isSelectOneElement){this.showDropdown(),this._canSearch=!1;var r=n===K.DOWN_KEY||n===K.PAGE_DOWN_KEY?1:-1,a=t.metaKey||n===K.PAGE_DOWN_KEY||n===K.PAGE_UP_KEY,s=void 0;if(a)r>0?s=this.dropdown.element.querySelector("".concat(Be,":last-of-type")):s=this.dropdown.element.querySelector(Be);else{var c=this.dropdown.element.querySelector(Ve(this.config.classNames.highlightedState));c?s=Un(c,Be,r):s=this.dropdown.element.querySelector(Be)}s&&(Wn(s,this.choiceList.element,r)||this.choiceList.scrollToChildElement(s,r),this._highlightChoice(s)),t.preventDefault()}},i.prototype._onDeleteKey=function(t,e,n){!this._isSelectOneElement&&!t.target.value&&n&&(this._handleBackspace(e),t.preventDefault())},i.prototype._onTouchMove=function(){this._wasTap&&(this._wasTap=!1)},i.prototype._onTouchEnd=function(t){var e=(t||t.touches[0]).target,n=this._wasTap&&this.containerOuter.element.contains(e);if(n){var r=e===this.containerOuter.element||e===this.containerInner.element;r&&(this._isTextElement?this.input.focus():this._isSelectMultipleElement&&this.showDropdown()),t.stopPropagation()}this._wasTap=!0},i.prototype._onMouseDown=function(t){var e=t.target;if(e instanceof HTMLElement){if(oa&&this.choiceList.element.contains(e)){var n=this.choiceList.element.firstElementChild;this._isScrollingOnIe=this._direction==="ltr"?t.offsetX>=n.offsetWidth:t.offsetX<n.offsetLeft}if(e!==this.input.element){var r=e.closest("[data-button],[data-item],[data-choice]");r instanceof HTMLElement&&("button"in r.dataset?this._handleButtonAction(r):"item"in r.dataset?this._handleItemAction(r,t.shiftKey):"choice"in r.dataset&&this._handleChoiceAction(r)),t.preventDefault()}}},i.prototype._onMouseOver=function(t){var e=t.target;e instanceof HTMLElement&&"choice"in e.dataset&&this._highlightChoice(e)},i.prototype._onClick=function(t){var e=t.target,n=this.containerOuter,r=n.element.contains(e);r?!this.dropdown.isActive&&!n.isDisabled?this._isTextElement?document.activeElement!==this.input.element&&this.input.focus():(this.showDropdown(),n.element.focus()):this._isSelectOneElement&&e!==this.input.element&&!this.dropdown.element.contains(e)&&this.hideDropdown():(n.removeFocusState(),this.hideDropdown(!0),this.unhighlightAll())},i.prototype._onFocus=function(t){var e=t.target,n=this.containerOuter,r=e&&n.element.contains(e);if(r){var a=e===this.input.element;this._isTextElement?a&&n.addFocusState():this._isSelectMultipleElement?a&&(this.showDropdown(!0),n.addFocusState()):(n.addFocusState(),a&&this.showDropdown(!0))}},i.prototype._onBlur=function(t){var e=t.target,n=this.containerOuter,r=e&&n.element.contains(e);r&&!this._isScrollingOnIe?e===this.input.element?(n.removeFocusState(),this.hideDropdown(!0),(this._isTextElement||this._isSelectMultipleElement)&&this.unhighlightAll()):e===this.containerOuter.element&&(n.removeFocusState(),this._canSearch||this.hideDropdown(!0)):(this._isScrollingOnIe=!1,this.input.element.focus())},i.prototype._onFormReset=function(){var t=this;this._store.withTxn(function(){t.clearInput(),t.hideDropdown(),t.refresh(!1,!1,!0),t._initialItems.length&&t.setChoiceByValue(t._initialItems)})},i.prototype._highlightChoice=function(t){t===void 0&&(t=null);var e=Array.from(this.dropdown.element.querySelectorAll(Be));if(e.length){var n=t,r=this.config.classNames.highlightedState,a=Array.from(this.dropdown.element.querySelectorAll(Ve(r)));a.forEach(function(s){he(s,r),s.setAttribute("aria-selected","false")}),n?this._highlightPosition=e.indexOf(n):(e.length>this._highlightPosition?n=e[this._highlightPosition]:n=e[e.length-1],n||(n=e[0])),x(n,r),n.setAttribute("aria-selected","true"),this.passedElement.triggerEvent(G.highlightChoice,{el:n}),this.dropdown.isActive&&(this.input.setActiveDescendant(n.id),this.containerOuter.setActiveDescendant(n.id))}},i.prototype._addItem=function(t,e,n){if(e===void 0&&(e=!0),n===void 0&&(n=!1),!t.id)throw new TypeError("item.id must be set before _addItem is called for a choice/item");(this.config.singleModeForMultiSelect||this._isSelectOneElement)&&this.removeActiveItems(t.id),this._store.dispatch(ai(t)),e&&(this.passedElement.triggerEvent(G.addItem,this._getChoiceForOutput(t)),n&&this.passedElement.triggerEvent(G.choice,this._getChoiceForOutput(t)))},i.prototype._removeItem=function(t){if(t.id){this._store.dispatch(si(t));var e=this._notice;e&&e.type===Y.noChoices&&this._clearNotice(),this.passedElement.triggerEvent(G.removeItem,this._getChoiceForOutput(t))}},i.prototype._addChoice=function(t,e,n){if(e===void 0&&(e=!0),n===void 0&&(n=!1),t.id)throw new TypeError("Can not re-add a choice which has already been added");var r=this.config;if(!(!r.duplicateItemsAllowed&&this._store.choices.find(function(c){return r.valueComparer(c.value,t.value)}))){this._lastAddedChoiceId++,t.id=this._lastAddedChoiceId,t.elementId="".concat(this._baseId,"-").concat(this._idNames.itemChoice,"-").concat(t.id);var a=r.prependValue,s=r.appendValue;a&&(t.value=a+t.value),s&&(t.value+=s.toString()),(a||s)&&t.element&&(t.element.value=t.value),this._clearNotice(),this._store.dispatch(ri(t)),t.selected&&this._addItem(t,e,n)}},i.prototype._addGroup=function(t,e){var n=this;if(e===void 0&&(e=!0),t.id)throw new TypeError("Can not re-add a group which has already been added");this._store.dispatch(Yn(t)),t.choices&&(this._lastAddedGroupId++,t.id=this._lastAddedGroupId,t.choices.forEach(function(r){r.group=t,t.disabled&&(r.disabled=!0),n._addChoice(r,e)}))},i.prototype._createTemplates=function(){var t=this,e=this.config.callbackOnCreateTemplates,n={};typeof e=="function"&&(n=e.call(this,Gn,Vt,ht));var r={};Object.keys(this._templates).forEach(function(a){a in n?r[a]=n[a].bind(t):r[a]=t._templates[a].bind(t)}),this._templates=r},i.prototype._createElements=function(){var t=this._templates,e=this,n=e.config,r=e._isSelectOneElement,a=n.position,s=n.classNames,c=this._elementType;this.containerOuter=new ci({element:t.containerOuter(n,this._direction,this._isSelectElement,r,n.searchEnabled,c,n.labelId),classNames:s,type:c,position:a}),this.containerInner=new ci({element:t.containerInner(n),classNames:s,type:c,position:a}),this.input=new nr({element:t.input(n,this._placeholderValue),classNames:s,type:c,preventPaste:!n.paste}),this.choiceList=new di({element:t.choiceList(n,r)}),this.itemList=new di({element:t.itemList(n,r)}),this.dropdown=new ir({element:t.dropdown(n),classNames:s,type:c})},i.prototype._createStructure=function(){var t=this,e=t.containerInner,n=t.containerOuter,r=t.passedElement,a=this.dropdown.element;r.conceal(),e.wrap(r.element),n.wrap(e.element),this._isSelectOneElement?this.input.placeholder=this.config.searchPlaceholderValue||"":(this._placeholderValue&&(this.input.placeholder=this._placeholderValue),this.input.setWidth()),n.element.appendChild(e.element),n.element.appendChild(a),e.element.appendChild(this.itemList.element),a.appendChild(this.choiceList.element),this._isSelectOneElement?this.config.searchEnabled&&a.insertBefore(this.input.element,a.firstChild):e.element.appendChild(this.input.element),this._highlightPosition=0,this._isSearching=!1},i.prototype._initStore=function(){var t=this;this._store.subscribe(this._render).withTxn(function(){t._addPredefinedChoices(t._presetChoices,t._isSelectOneElement&&!t._hasNonChoicePlaceholder,!1)}),(!this._store.choices.length||this._isSelectOneElement&&this._hasNonChoicePlaceholder)&&this._render()},i.prototype._addPredefinedChoices=function(t,e,n){var r=this;if(e===void 0&&(e=!1),n===void 0&&(n=!0),e){var a=t.findIndex(function(s){return s.selected})===-1;a&&t.some(function(s){return s.disabled||"choices"in s?!1:(s.selected=!0,!0)})}t.forEach(function(s){"choices"in s?r._isSelectElement&&r._addGroup(s,n):r._addChoice(s,n)})},i.prototype._findAndSelectChoiceByValue=function(t,e){var n=this;e===void 0&&(e=!1);var r=this._store.choices.find(function(a){return n.config.valueComparer(a.value,t)});return r&&!r.disabled&&!r.selected?(this._addItem(r,!0,e),!0):!1},i.prototype._generatePlaceholderValue=function(){var t=this.config;if(!t.placeholder)return null;if(this._hasNonChoicePlaceholder)return t.placeholderValue;if(this._isSelectElement){var e=this.passedElement.placeholderOption;return e?e.text:null}return null},i.prototype._warnChoicesInitFailed=function(t){if(!this.config.silent)if(this.initialised){if(!this.initialisedOK)throw new TypeError("".concat(t," called for an element which has multiple instances of Choices initialised on it"))}else throw new TypeError("".concat(t," called on a non-initialised instance of Choices"))},i.version="11.1.0",i})(),Dt=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Pe={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(i){return typeof console<"u"&&console.warn(i)},getWeek:function(i){var t=new Date(i.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},We={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(i){var t=i%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Z=function(i,t){return t===void 0&&(t=2),("000"+i).slice(t*-1)},oe=function(i){return i===!0?1:0};function wi(i,t){var e;return function(){var n=this,r=arguments;clearTimeout(e),e=setTimeout(function(){return i.apply(n,r)},t)}}var Mt=function(i){return i instanceof Array?i:[i]};function W(i,t,e){if(e===!0)return i.classList.add(t);i.classList.remove(t)}function N(i,t,e){var n=window.document.createElement(i);return t=t||"",e=e||"",n.className=t,e!==void 0&&(n.textContent=e),n}function rt(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Hi(i,t){if(t(i))return i;if(i.parentNode)return Hi(i.parentNode,t)}function at(i,t){var e=N("div","numInputWrapper"),n=N("input","numInput "+i),r=N("span","arrowUp"),a=N("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?n.type="number":(n.type="text",n.pattern="\\d*"),t!==void 0)for(var s in t)n.setAttribute(s,t[s]);return e.appendChild(n),e.appendChild(r),e.appendChild(a),e}function ie(i){try{if(typeof i.composedPath=="function"){var t=i.composedPath();return t[0]}return i.target}catch{return i.target}}var Tt=function(){},ct=function(i,t,e){return e.months[t?"shorthand":"longhand"][i]},ca={D:Tt,F:function(i,t,e){i.setMonth(e.months.longhand.indexOf(t))},G:function(i,t){i.setHours((i.getHours()>=12?12:0)+parseFloat(t))},H:function(i,t){i.setHours(parseFloat(t))},J:function(i,t){i.setDate(parseFloat(t))},K:function(i,t,e){i.setHours(i.getHours()%12+12*oe(new RegExp(e.amPM[1],"i").test(t)))},M:function(i,t,e){i.setMonth(e.months.shorthand.indexOf(t))},S:function(i,t){i.setSeconds(parseFloat(t))},U:function(i,t){return new Date(parseFloat(t)*1e3)},W:function(i,t,e){var n=parseInt(t),r=new Date(i.getFullYear(),0,2+(n-1)*7,0,0,0,0);return r.setDate(r.getDate()-r.getDay()+e.firstDayOfWeek),r},Y:function(i,t){i.setFullYear(parseFloat(t))},Z:function(i,t){return new Date(t)},d:function(i,t){i.setDate(parseFloat(t))},h:function(i,t){i.setHours((i.getHours()>=12?12:0)+parseFloat(t))},i:function(i,t){i.setMinutes(parseFloat(t))},j:function(i,t){i.setDate(parseFloat(t))},l:Tt,m:function(i,t){i.setMonth(parseFloat(t)-1)},n:function(i,t){i.setMonth(parseFloat(t)-1)},s:function(i,t){i.setSeconds(parseFloat(t))},u:function(i,t){return new Date(parseFloat(t))},w:Tt,y:function(i,t){i.setFullYear(2e3+parseFloat(t))}},Ie={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Ue={Z:function(i){return i.toISOString()},D:function(i,t,e){return t.weekdays.shorthand[Ue.w(i,t,e)]},F:function(i,t,e){return ct(Ue.n(i,t,e)-1,!1,t)},G:function(i,t,e){return Z(Ue.h(i,t,e))},H:function(i){return Z(i.getHours())},J:function(i,t){return t.ordinal!==void 0?i.getDate()+t.ordinal(i.getDate()):i.getDate()},K:function(i,t){return t.amPM[oe(i.getHours()>11)]},M:function(i,t){return ct(i.getMonth(),!0,t)},S:function(i){return Z(i.getSeconds())},U:function(i){return i.getTime()/1e3},W:function(i,t,e){return e.getWeek(i)},Y:function(i){return Z(i.getFullYear(),4)},d:function(i){return Z(i.getDate())},h:function(i){return i.getHours()%12?i.getHours()%12:12},i:function(i){return Z(i.getMinutes())},j:function(i){return i.getDate()},l:function(i,t){return t.weekdays.longhand[i.getDay()]},m:function(i){return Z(i.getMonth()+1)},n:function(i){return i.getMonth()+1},s:function(i){return i.getSeconds()},u:function(i){return i.getTime()},w:function(i){return i.getDay()},y:function(i){return String(i.getFullYear()).substring(2)}},Vi=function(i){var t=i.config,e=t===void 0?Pe:t,n=i.l10n,r=n===void 0?We:n,a=i.isMobile,s=a===void 0?!1:a;return function(c,u,v){var h=v||r;return e.formatDate!==void 0&&!s?e.formatDate(c,u,h):u.split("").map(function(p,g,m){return Ue[p]&&m[g-1]!=="\\"?Ue[p](c,h,e):p!=="\\"?p:""}).join("")}},qt=function(i){var t=i.config,e=t===void 0?Pe:t,n=i.l10n,r=n===void 0?We:n;return function(a,s,c,u){if(!(a!==0&&!a)){var v=u||r,h,p=a;if(a instanceof Date)h=new Date(a.getTime());else if(typeof a!="string"&&a.toFixed!==void 0)h=new Date(a);else if(typeof a=="string"){var g=s||(e||Pe).dateFormat,m=String(a).trim();if(m==="today")h=new Date,c=!0;else if(e&&e.parseDate)h=e.parseDate(a,g);else if(/Z$/.test(m)||/GMT$/.test(m))h=new Date(a);else{for(var y=void 0,b=[],k=0,A=0,P="";k<g.length;k++){var R=g[k],V=R==="\\",Q=g[k-1]==="\\"||V;if(Ie[R]&&!Q){P+=Ie[R];var B=new RegExp(P).exec(a);B&&(y=!0)&&b[R!=="Y"?"push":"unshift"]({fn:ca[R],val:B[++A]})}else V||(P+=".")}h=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),b.forEach(function(F){var U=F.fn,ae=F.val;return h=U(h,ae,v)||h}),h=y?h:void 0}}if(!(h instanceof Date&&!isNaN(h.getTime()))){e.errorHandler(new Error("Invalid date provided: "+p));return}return c===!0&&h.setHours(0,0,0,0),h}}};function ne(i,t,e){return e===void 0&&(e=!0),e!==!1?new Date(i.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):i.getTime()-t.getTime()}var da=function(i,t,e){return i>Math.min(t,e)&&i<Math.max(t,e)},It=function(i,t,e){return i*3600+t*60+e},ua=function(i){var t=Math.floor(i/3600),e=(i-t*3600)/60;return[t,e,i-t*3600-e*60]},ha={DAY:864e5};function xt(i){var t=i.defaultHour,e=i.defaultMinute,n=i.defaultSeconds;if(i.minDate!==void 0){var r=i.minDate.getHours(),a=i.minDate.getMinutes(),s=i.minDate.getSeconds();t<r&&(t=r),t===r&&e<a&&(e=a),t===r&&e===a&&n<s&&(n=i.minDate.getSeconds())}if(i.maxDate!==void 0){var c=i.maxDate.getHours(),u=i.maxDate.getMinutes();t=Math.min(t,c),t===c&&(e=Math.min(u,e)),t===c&&e===u&&(n=i.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:n}}typeof Object.assign!="function"&&(Object.assign=function(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!i)throw TypeError("Cannot convert undefined or null to object");for(var n=function(c){c&&Object.keys(c).forEach(function(u){return i[u]=c[u]})},r=0,a=t;r<a.length;r++){var s=a[r];n(s)}return i});var z=function(){return z=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},z.apply(this,arguments)},Ci=function(){for(var i=0,t=0,e=arguments.length;t<e;t++)i+=arguments[t].length;for(var n=Array(i),r=0,t=0;t<e;t++)for(var a=arguments[t],s=0,c=a.length;s<c;s++,r++)n[r]=a[s];return n},fa=300;function pa(i,t){var e={config:z(z({},Pe),H.defaultConfig),l10n:We};e.parseDate=qt({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=b,e._setHoursFromDate=g,e._positionCalendar=Qe,e.changeMonth=ft,e.changeYear=Je,e.clear=Gi,e.close=Ji,e.onMouseOver=Ze,e._createElement=N,e.createDay=B,e.destroy=Xi,e.isEnabled=De,e.jumpToDate=P,e.updateValue=pe,e.open=en,e.redraw=Jt,e.set=an,e.setDate=sn,e.toggle=dn;function n(){e.utils={getDaysInMonth:function(o,l){return o===void 0&&(o=e.currentMonth),l===void 0&&(l=e.currentYear),o===1&&(l%4===0&&l%100!==0||l%400===0)?29:e.l10n.daysInMonth[o]}}}function r(){e.element=e.input=i,e.isOpen=!1,tn(),Gt(),ln(),on(),n(),e.isMobile||Q(),A(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&g(e.config.noCalendar?e.latestSelectedDateObj:void 0),pe(!1)),c();var o=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&o&&Qe(),q("onReady")}function a(){var o;return((o=e.calendarContainer)===null||o===void 0?void 0:o.getRootNode()).activeElement||document.activeElement}function s(o){return o.bind(e)}function c(){var o=e.config;o.weekNumbers===!1&&o.showMonths===1||o.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var l=(e.days.offsetWidth+1)*o.showMonths;e.daysContainer.style.width=l+"px",e.calendarContainer.style.width=l+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function u(o){if(e.selectedDates.length===0){var l=e.config.minDate===void 0||ne(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),d=xt(e.config);l.setHours(d.hours,d.minutes,d.seconds,l.getMilliseconds()),e.selectedDates=[l],e.latestSelectedDateObj=l}o!==void 0&&o.type!=="blur"&&fn(o);var f=e._input.value;p(),pe(),e._input.value!==f&&e._debouncedChange()}function v(o,l){return o%12+12*oe(l===e.l10n.amPM[1])}function h(o){switch(o%24){case 0:case 12:return 12;default:return o%12}}function p(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var o=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,l=(parseInt(e.minuteElement.value,10)||0)%60,d=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(o=v(o,e.amPM.textContent));var f=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&ne(e.latestSelectedDateObj,e.config.minDate,!0)===0,w=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&ne(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var E=It(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),I=It(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),D=It(o,l,d);if(D>I&&D<E){var O=ua(E);o=O[0],l=O[1],d=O[2]}}else{if(w){var S=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;o=Math.min(o,S.getHours()),o===S.getHours()&&(l=Math.min(l,S.getMinutes())),l===S.getMinutes()&&(d=Math.min(d,S.getSeconds()))}if(f){var M=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;o=Math.max(o,M.getHours()),o===M.getHours()&&l<M.getMinutes()&&(l=M.getMinutes()),l===M.getMinutes()&&(d=Math.max(d,M.getSeconds()))}}m(o,l,d)}}function g(o){var l=o||e.latestSelectedDateObj;l&&l instanceof Date&&m(l.getHours(),l.getMinutes(),l.getSeconds())}function m(o,l,d){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(o%24,l,d||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=Z(e.config.time_24hr?o:(12+o)%12+12*oe(o%12===0)),e.minuteElement.value=Z(l),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[oe(o>=12)]),e.secondElement!==void 0&&(e.secondElement.value=Z(d)))}function y(o){var l=ie(o),d=parseInt(l.value)+(o.delta||0);(d/1e3>1||o.key==="Enter"&&!/[^\d]/.test(d.toString()))&&Je(d)}function b(o,l,d,f){if(l instanceof Array)return l.forEach(function(w){return b(o,w,d,f)});if(o instanceof Array)return o.forEach(function(w){return b(w,l,d,f)});o.addEventListener(l,d,f),e._handlers.push({remove:function(){return o.removeEventListener(l,d,f)}})}function k(){q("onChange")}function A(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(d){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+d+"]"),function(f){return b(f,"click",e[d])})}),e.isMobile){cn();return}var o=wi(Qi,50);if(e._debouncedChange=wi(k,fa),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&b(e.daysContainer,"mouseover",function(d){e.config.mode==="range"&&Ze(ie(d))}),b(e._input,"keydown",zt),e.calendarContainer!==void 0&&b(e.calendarContainer,"keydown",zt),!e.config.inline&&!e.config.static&&b(window,"resize",o),window.ontouchstart!==void 0?b(window.document,"touchstart",pt):b(window.document,"mousedown",pt),b(window.document,"focus",pt,{capture:!0}),e.config.clickOpens===!0&&(b(e._input,"focus",e.open),b(e._input,"click",e.open)),e.daysContainer!==void 0&&(b(e.monthNav,"click",hn),b(e.monthNav,["keyup","increment"],y),b(e.daysContainer,"click",Xt)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var l=function(d){return ie(d).select()};b(e.timeContainer,["increment"],u),b(e.timeContainer,"blur",u,{capture:!0}),b(e.timeContainer,"click",R),b([e.hourElement,e.minuteElement],["focus","click"],l),e.secondElement!==void 0&&b(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&b(e.amPM,"click",function(d){u(d)})}e.config.allowInput&&b(e._input,"blur",Zi)}function P(o,l){var d=o!==void 0?e.parseDate(o):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),f=e.currentYear,w=e.currentMonth;try{d!==void 0&&(e.currentYear=d.getFullYear(),e.currentMonth=d.getMonth())}catch(E){E.message="Invalid date supplied: "+d,e.config.errorHandler(E)}l&&e.currentYear!==f&&(q("onYearChange"),Ee()),l&&(e.currentYear!==f||e.currentMonth!==w)&&q("onMonthChange"),e.redraw()}function R(o){var l=ie(o);~l.className.indexOf("arrow")&&V(o,l.classList.contains("arrowUp")?1:-1)}function V(o,l,d){var f=o&&ie(o),w=d||f&&f.parentNode&&f.parentNode.firstChild,E=gt("increment");E.delta=l,w&&w.dispatchEvent(E)}function Q(){var o=window.document.createDocumentFragment();if(e.calendarContainer=N("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(o.appendChild(Ge()),e.innerContainer=N("div","flatpickr-innerContainer"),e.config.weekNumbers){var l=Wi(),d=l.weekWrapper,f=l.weekNumbers;e.innerContainer.appendChild(d),e.weekNumbers=f,e.weekWrapper=d}e.rContainer=N("div","flatpickr-rContainer"),e.rContainer.appendChild(Yt()),e.daysContainer||(e.daysContainer=N("div","flatpickr-days"),e.daysContainer.tabIndex=-1),ce(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),o.appendChild(e.innerContainer)}e.config.enableTime&&o.appendChild(Ui()),W(e.calendarContainer,"rangeMode",e.config.mode==="range"),W(e.calendarContainer,"animate",e.config.animate===!0),W(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(o);var w=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!w&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var E=N("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(E,e.element),E.appendChild(e.element),e.altInput&&E.appendChild(e.altInput),E.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function B(o,l,d,f){var w=De(l,!0),E=N("span",o,l.getDate().toString());return E.dateObj=l,E.$i=f,E.setAttribute("aria-label",e.formatDate(l,e.config.ariaDateFormat)),o.indexOf("hidden")===-1&&ne(l,e.now)===0&&(e.todayDateElem=E,E.classList.add("today"),E.setAttribute("aria-current","date")),w?(E.tabIndex=-1,vt(l)&&(E.classList.add("selected"),e.selectedDateElem=E,e.config.mode==="range"&&(W(E,"startRange",e.selectedDates[0]&&ne(l,e.selectedDates[0],!0)===0),W(E,"endRange",e.selectedDates[1]&&ne(l,e.selectedDates[1],!0)===0),o==="nextMonthDay"&&E.classList.add("inRange")))):E.classList.add("flatpickr-disabled"),e.config.mode==="range"&&un(l)&&!vt(l)&&E.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&o!=="prevMonthDay"&&f%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(l)+"</span>"),q("onDayCreate",E),E}function F(o){o.focus(),e.config.mode==="range"&&Ze(o)}function U(o){for(var l=o>0?0:e.config.showMonths-1,d=o>0?e.config.showMonths:-1,f=l;f!=d;f+=o)for(var w=e.daysContainer.children[f],E=o>0?0:w.children.length-1,I=o>0?w.children.length:-1,D=E;D!=I;D+=o){var O=w.children[D];if(O.className.indexOf("hidden")===-1&&De(O.dateObj))return O}}function ae(o,l){for(var d=o.className.indexOf("Month")===-1?o.dateObj.getMonth():e.currentMonth,f=l>0?e.config.showMonths:-1,w=l>0?1:-1,E=d-e.currentMonth;E!=f;E+=w)for(var I=e.daysContainer.children[E],D=d-e.currentMonth===E?o.$i+l:l<0?I.children.length-1:0,O=I.children.length,S=D;S>=0&&S<O&&S!=(l>0?O:-1);S+=w){var M=I.children[S];if(M.className.indexOf("hidden")===-1&&De(M.dateObj)&&Math.abs(o.$i-S)>=Math.abs(l))return F(M)}e.changeMonth(w),be(U(w),0)}function be(o,l){var d=a(),f=Xe(d||document.body),w=o!==void 0?o:f?d:e.selectedDateElem!==void 0&&Xe(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&Xe(e.todayDateElem)?e.todayDateElem:U(l>0?1:-1);w===void 0?e._input.focus():f?ae(w,l):F(w)}function je(o,l){for(var d=(new Date(o,l,1).getDay()-e.l10n.firstDayOfWeek+7)%7,f=e.utils.getDaysInMonth((l-1+12)%12,o),w=e.utils.getDaysInMonth(l,o),E=window.document.createDocumentFragment(),I=e.config.showMonths>1,D=I?"prevMonthDay hidden":"prevMonthDay",O=I?"nextMonthDay hidden":"nextMonthDay",S=f+1-d,M=0;S<=f;S++,M++)E.appendChild(B("flatpickr-day "+D,new Date(o,l-1,S),S,M));for(S=1;S<=w;S++,M++)E.appendChild(B("flatpickr-day",new Date(o,l,S),S,M));for(var L=w+1;L<=42-d&&(e.config.showMonths===1||M%7!==0);L++,M++)E.appendChild(B("flatpickr-day "+O,new Date(o,l+1,L%w),L,M));var de=N("div","dayContainer");return de.appendChild(E),de}function ce(){if(e.daysContainer!==void 0){rt(e.daysContainer),e.weekNumbers&&rt(e.weekNumbers);for(var o=document.createDocumentFragment(),l=0;l<e.config.showMonths;l++){var d=new Date(e.currentYear,e.currentMonth,1);d.setMonth(e.currentMonth+l),o.appendChild(je(d.getFullYear(),d.getMonth()))}e.daysContainer.appendChild(o),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&Ze()}}function Ee(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var o=function(f){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&f<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&f>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var l=0;l<12;l++)if(o(l)){var d=N("option","flatpickr-monthDropdown-month");d.value=new Date(e.currentYear,l).getMonth().toString(),d.textContent=ct(l,e.config.shorthandCurrentMonth,e.l10n),d.tabIndex=-1,e.currentMonth===l&&(d.selected=!0),e.monthsDropdownContainer.appendChild(d)}}}function ee(){var o=N("div","flatpickr-month"),l=window.document.createDocumentFragment(),d;e.config.showMonths>1||e.config.monthSelectorType==="static"?d=N("span","cur-month"):(e.monthsDropdownContainer=N("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),b(e.monthsDropdownContainer,"change",function(I){var D=ie(I),O=parseInt(D.value,10);e.changeMonth(O-e.currentMonth),q("onMonthChange")}),Ee(),d=e.monthsDropdownContainer);var f=at("cur-year",{tabindex:"-1"}),w=f.getElementsByTagName("input")[0];w.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&w.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(w.setAttribute("max",e.config.maxDate.getFullYear().toString()),w.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var E=N("div","flatpickr-current-month");return E.appendChild(d),E.appendChild(f),l.appendChild(E),o.appendChild(l),{container:o,yearElement:w,monthElement:d}}function Se(){rt(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var o=e.config.showMonths;o--;){var l=ee();e.yearElements.push(l.yearElement),e.monthElements.push(l.monthElement),e.monthNav.appendChild(l.container)}e.monthNav.appendChild(e.nextMonthNav)}function Ge(){return e.monthNav=N("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=N("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=N("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,Se(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(o){e.__hidePrevMonthArrow!==o&&(W(e.prevMonthNav,"flatpickr-disabled",o),e.__hidePrevMonthArrow=o)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(o){e.__hideNextMonthArrow!==o&&(W(e.nextMonthNav,"flatpickr-disabled",o),e.__hideNextMonthArrow=o)}}),e.currentYearElement=e.yearElements[0],tt(),e.monthNav}function Ui(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var o=xt(e.config);e.timeContainer=N("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var l=N("span","flatpickr-time-separator",":"),d=at("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=d.getElementsByTagName("input")[0];var f=at("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=f.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=Z(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?o.hours:h(o.hours)),e.minuteElement.value=Z(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():o.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(d),e.timeContainer.appendChild(l),e.timeContainer.appendChild(f),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var w=at("flatpickr-second");e.secondElement=w.getElementsByTagName("input")[0],e.secondElement.value=Z(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():o.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(N("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(w)}return e.config.time_24hr||(e.amPM=N("span","flatpickr-am-pm",e.l10n.amPM[oe((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function Yt(){e.weekdayContainer?rt(e.weekdayContainer):e.weekdayContainer=N("div","flatpickr-weekdays");for(var o=e.config.showMonths;o--;){var l=N("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(l)}return Kt(),e.weekdayContainer}function Kt(){if(e.weekdayContainer){var o=e.l10n.firstDayOfWeek,l=Ci(e.l10n.weekdays.shorthand);o>0&&o<l.length&&(l=Ci(l.splice(o,l.length),l.splice(0,o)));for(var d=e.config.showMonths;d--;)e.weekdayContainer.children[d].innerHTML=`
      <span class='flatpickr-weekday'>
        `+l.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function Wi(){e.calendarContainer.classList.add("hasWeeks");var o=N("div","flatpickr-weekwrapper");o.appendChild(N("span","flatpickr-weekday",e.l10n.weekAbbreviation));var l=N("div","flatpickr-weeks");return o.appendChild(l),{weekWrapper:o,weekNumbers:l}}function ft(o,l){l===void 0&&(l=!0);var d=l?o:o-e.currentMonth;d<0&&e._hidePrevMonthArrow===!0||d>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=d,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,q("onYearChange"),Ee()),ce(),q("onMonthChange"),tt())}function Gi(o,l){if(o===void 0&&(o=!0),l===void 0&&(l=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,l===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var d=xt(e.config),f=d.hours,w=d.minutes,E=d.seconds;m(f,w,E)}e.redraw(),o&&q("onChange")}function Ji(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),q("onClose")}function Xi(){e.config!==void 0&&q("onDestroy");for(var o=e._handlers.length;o--;)e._handlers[o].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var l=e.calendarContainer.parentNode;if(l.lastChild&&l.removeChild(l.lastChild),l.parentNode){for(;l.firstChild;)l.parentNode.insertBefore(l.firstChild,l);l.parentNode.removeChild(l)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(d){try{delete e[d]}catch{}})}function $e(o){return e.calendarContainer.contains(o)}function pt(o){if(e.isOpen&&!e.config.inline){var l=ie(o),d=$e(l),f=l===e.input||l===e.altInput||e.element.contains(l)||o.path&&o.path.indexOf&&(~o.path.indexOf(e.input)||~o.path.indexOf(e.altInput)),w=!f&&!d&&!$e(o.relatedTarget),E=!e.config.ignoredFocusElements.some(function(I){return I.contains(l)});w&&E&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&u(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function Je(o){if(!(!o||e.config.minDate&&o<e.config.minDate.getFullYear()||e.config.maxDate&&o>e.config.maxDate.getFullYear())){var l=o,d=e.currentYear!==l;e.currentYear=l||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),d&&(e.redraw(),q("onYearChange"),Ee())}}function De(o,l){var d;l===void 0&&(l=!0);var f=e.parseDate(o,void 0,l);if(e.config.minDate&&f&&ne(f,e.config.minDate,l!==void 0?l:!e.minDateHasTime)<0||e.config.maxDate&&f&&ne(f,e.config.maxDate,l!==void 0?l:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(f===void 0)return!1;for(var w=!!e.config.enable,E=(d=e.config.enable)!==null&&d!==void 0?d:e.config.disable,I=0,D=void 0;I<E.length;I++){if(D=E[I],typeof D=="function"&&D(f))return w;if(D instanceof Date&&f!==void 0&&D.getTime()===f.getTime())return w;if(typeof D=="string"){var O=e.parseDate(D,void 0,!0);return O&&O.getTime()===f.getTime()?w:!w}else if(typeof D=="object"&&f!==void 0&&D.from&&D.to&&f.getTime()>=D.from.getTime()&&f.getTime()<=D.to.getTime())return w}return!w}function Xe(o){return e.daysContainer!==void 0?o.className.indexOf("hidden")===-1&&o.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(o):!1}function Zi(o){var l=o.target===e._input,d=e._input.value.trimEnd()!==bt();l&&d&&!(o.relatedTarget&&$e(o.relatedTarget))&&e.setDate(e._input.value,!0,o.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function zt(o){var l=ie(o),d=e.config.wrap?i.contains(l):l===e._input,f=e.config.allowInput,w=e.isOpen&&(!f||!d),E=e.config.inline&&d&&!f;if(o.keyCode===13&&d){if(f)return e.setDate(e._input.value,!0,l===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),l.blur();e.open()}else if($e(l)||w||E){var I=!!e.timeContainer&&e.timeContainer.contains(l);switch(o.keyCode){case 13:I?(o.preventDefault(),u(),mt()):Xt(o);break;case 27:o.preventDefault(),mt();break;case 8:case 46:d&&!e.config.allowInput&&(o.preventDefault(),e.clear());break;case 37:case 39:if(!I&&!d){o.preventDefault();var D=a();if(e.daysContainer!==void 0&&(f===!1||D&&Xe(D))){var O=o.keyCode===39?1:-1;o.ctrlKey?(o.stopPropagation(),ft(O),be(U(1),0)):be(void 0,O)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:o.preventDefault();var S=o.keyCode===40?1:-1;e.daysContainer&&l.$i!==void 0||l===e.input||l===e.altInput?o.ctrlKey?(o.stopPropagation(),Je(e.currentYear-S),be(U(1),0)):I||be(void 0,S*7):l===e.currentYearElement?Je(e.currentYear-S):e.config.enableTime&&(!I&&e.hourElement&&e.hourElement.focus(),u(o),e._debouncedChange());break;case 9:if(I){var M=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(te){return te}),L=M.indexOf(l);if(L!==-1){var de=M[L+(o.shiftKey?-1:1)];o.preventDefault(),(de||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(l)&&o.shiftKey&&(o.preventDefault(),e._input.focus());break}}if(e.amPM!==void 0&&l===e.amPM)switch(o.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],p(),pe();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],p(),pe();break}(d||$e(l))&&q("onKeyDown",o)}function Ze(o,l){if(l===void 0&&(l="flatpickr-day"),!(e.selectedDates.length!==1||o&&(!o.classList.contains(l)||o.classList.contains("flatpickr-disabled")))){for(var d=o?o.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),f=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),w=Math.min(d,e.selectedDates[0].getTime()),E=Math.max(d,e.selectedDates[0].getTime()),I=!1,D=0,O=0,S=w;S<E;S+=ha.DAY)De(new Date(S),!0)||(I=I||S>w&&S<E,S<f&&(!D||S>D)?D=S:S>f&&(!O||S<O)&&(O=S));var M=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+l));M.forEach(function(L){var de=L.dateObj,te=de.getTime(),He=D>0&&te<D||O>0&&te>O;if(He){L.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(ke){L.classList.remove(ke)});return}else if(I&&!He)return;["startRange","inRange","endRange","notAllowed"].forEach(function(ke){L.classList.remove(ke)}),o!==void 0&&(o.classList.add(d<=e.selectedDates[0].getTime()?"startRange":"endRange"),f<d&&te===f?L.classList.add("startRange"):f>d&&te===f&&L.classList.add("endRange"),te>=D&&(O===0||te<=O)&&da(te,f,d)&&L.classList.add("inRange"))})}}function Qi(){e.isOpen&&!e.config.static&&!e.config.inline&&Qe()}function en(o,l){if(l===void 0&&(l=e._positionElement),e.isMobile===!0){if(o){o.preventDefault();var d=ie(o);d&&d.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),q("onOpen");return}else if(e._input.disabled||e.config.inline)return;var f=e.isOpen;e.isOpen=!0,f||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),q("onOpen"),Qe(l)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(o===void 0||!e.timeContainer.contains(o.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function Ut(o){return function(l){var d=e.config["_"+o+"Date"]=e.parseDate(l,e.config.dateFormat),f=e.config["_"+(o==="min"?"max":"min")+"Date"];d!==void 0&&(e[o==="min"?"minDateHasTime":"maxDateHasTime"]=d.getHours()>0||d.getMinutes()>0||d.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(w){return De(w)}),!e.selectedDates.length&&o==="min"&&g(d),pe()),e.daysContainer&&(Jt(),d!==void 0?e.currentYearElement[o]=d.getFullYear().toString():e.currentYearElement.removeAttribute(o),e.currentYearElement.disabled=!!f&&d!==void 0&&f.getFullYear()===d.getFullYear())}}function tn(){var o=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],l=z(z({},JSON.parse(JSON.stringify(i.dataset||{}))),t),d={};e.config.parseDate=l.parseDate,e.config.formatDate=l.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(M){e.config._enable=Qt(M)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(M){e.config._disable=Qt(M)}});var f=l.mode==="time";if(!l.dateFormat&&(l.enableTime||f)){var w=H.defaultConfig.dateFormat||Pe.dateFormat;d.dateFormat=l.noCalendar||f?"H:i"+(l.enableSeconds?":S":""):w+" H:i"+(l.enableSeconds?":S":"")}if(l.altInput&&(l.enableTime||f)&&!l.altFormat){var E=H.defaultConfig.altFormat||Pe.altFormat;d.altFormat=l.noCalendar||f?"h:i"+(l.enableSeconds?":S K":" K"):E+(" h:i"+(l.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:Ut("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:Ut("max")});var I=function(M){return function(L){e.config[M==="min"?"_minTime":"_maxTime"]=e.parseDate(L,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:I("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:I("max")}),l.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,d,l);for(var D=0;D<o.length;D++)e.config[o[D]]=e.config[o[D]]===!0||e.config[o[D]]==="true";Dt.filter(function(M){return e.config[M]!==void 0}).forEach(function(M){e.config[M]=Mt(e.config[M]||[]).map(s)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var D=0;D<e.config.plugins.length;D++){var O=e.config.plugins[D](e)||{};for(var S in O)Dt.indexOf(S)>-1?e.config[S]=Mt(O[S]).map(s).concat(e.config[S]):typeof l[S]>"u"&&(e.config[S]=O[S])}l.altInputClass||(e.config.altInputClass=Wt().className+" "+e.config.altInputClass),q("onParseConfig")}function Wt(){return e.config.wrap?i.querySelector("[data-input]"):i}function Gt(){typeof e.config.locale!="object"&&typeof H.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=z(z({},H.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?H.l10ns[e.config.locale]:void 0),Ie.D="("+e.l10n.weekdays.shorthand.join("|")+")",Ie.l="("+e.l10n.weekdays.longhand.join("|")+")",Ie.M="("+e.l10n.months.shorthand.join("|")+")",Ie.F="("+e.l10n.months.longhand.join("|")+")",Ie.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var o=z(z({},t),JSON.parse(JSON.stringify(i.dataset||{})));o.time_24hr===void 0&&H.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=Vi(e),e.parseDate=qt({config:e.config,l10n:e.l10n})}function Qe(o){if(typeof e.config.position=="function")return void e.config.position(e,o);if(e.calendarContainer!==void 0){q("onPreCalendarPosition");var l=o||e._positionElement,d=Array.prototype.reduce.call(e.calendarContainer.children,(function(wn,Cn){return wn+Cn.offsetHeight}),0),f=e.calendarContainer.offsetWidth,w=e.config.position.split(" "),E=w[0],I=w.length>1?w[1]:null,D=l.getBoundingClientRect(),O=window.innerHeight-D.bottom,S=E==="above"||E!=="below"&&O<d&&D.top>d,M=window.pageYOffset+D.top+(S?-d-2:l.offsetHeight+2);if(W(e.calendarContainer,"arrowTop",!S),W(e.calendarContainer,"arrowBottom",S),!e.config.inline){var L=window.pageXOffset+D.left,de=!1,te=!1;I==="center"?(L-=(f-D.width)/2,de=!0):I==="right"&&(L-=f-D.width,te=!0),W(e.calendarContainer,"arrowLeft",!de&&!te),W(e.calendarContainer,"arrowCenter",de),W(e.calendarContainer,"arrowRight",te);var He=window.document.body.offsetWidth-(window.pageXOffset+D.right),ke=L+f>window.document.body.offsetWidth,pn=He+f>window.document.body.offsetWidth;if(W(e.calendarContainer,"rightMost",ke),!e.config.static)if(e.calendarContainer.style.top=M+"px",!ke)e.calendarContainer.style.left=L+"px",e.calendarContainer.style.right="auto";else if(!pn)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=He+"px";else{var _t=nn();if(_t===void 0)return;var mn=window.document.body.offsetWidth,gn=Math.max(0,mn/2-f/2),vn=".flatpickr-calendar.centerMost:before",bn=".flatpickr-calendar.centerMost:after",_n=_t.cssRules.length,yn="{left:"+D.left+"px;right:auto;}";W(e.calendarContainer,"rightMost",!1),W(e.calendarContainer,"centerMost",!0),_t.insertRule(vn+","+bn+yn,_n),e.calendarContainer.style.left=gn+"px",e.calendarContainer.style.right="auto"}}}}function nn(){for(var o=null,l=0;l<document.styleSheets.length;l++){var d=document.styleSheets[l];if(d.cssRules){try{d.cssRules}catch{continue}o=d;break}}return o??rn()}function rn(){var o=document.createElement("style");return document.head.appendChild(o),o.sheet}function Jt(){e.config.noCalendar||e.isMobile||(Ee(),tt(),ce())}function mt(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function Xt(o){o.preventDefault(),o.stopPropagation();var l=function(M){return M.classList&&M.classList.contains("flatpickr-day")&&!M.classList.contains("flatpickr-disabled")&&!M.classList.contains("notAllowed")},d=Hi(ie(o),l);if(d!==void 0){var f=d,w=e.latestSelectedDateObj=new Date(f.dateObj.getTime()),E=(w.getMonth()<e.currentMonth||w.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=f,e.config.mode==="single")e.selectedDates=[w];else if(e.config.mode==="multiple"){var I=vt(w);I?e.selectedDates.splice(parseInt(I),1):e.selectedDates.push(w)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=w,e.selectedDates.push(w),ne(w,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(M,L){return M.getTime()-L.getTime()}));if(p(),E){var D=e.currentYear!==w.getFullYear();e.currentYear=w.getFullYear(),e.currentMonth=w.getMonth(),D&&(q("onYearChange"),Ee()),q("onMonthChange")}if(tt(),ce(),pe(),!E&&e.config.mode!=="range"&&e.config.showMonths===1?F(f):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var O=e.config.mode==="single"&&!e.config.enableTime,S=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(O||S)&&mt()}k()}}var et={locale:[Gt,Kt],showMonths:[Se,c,Yt],minDate:[P],maxDate:[P],positionElement:[ei],clickOpens:[function(){e.config.clickOpens===!0?(b(e._input,"focus",e.open),b(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function an(o,l){if(o!==null&&typeof o=="object"){Object.assign(e.config,o);for(var d in o)et[d]!==void 0&&et[d].forEach(function(f){return f()})}else e.config[o]=l,et[o]!==void 0?et[o].forEach(function(f){return f()}):Dt.indexOf(o)>-1&&(e.config[o]=Mt(l));e.redraw(),pe(!0)}function Zt(o,l){var d=[];if(o instanceof Array)d=o.map(function(f){return e.parseDate(f,l)});else if(o instanceof Date||typeof o=="number")d=[e.parseDate(o,l)];else if(typeof o=="string")switch(e.config.mode){case"single":case"time":d=[e.parseDate(o,l)];break;case"multiple":d=o.split(e.config.conjunction).map(function(f){return e.parseDate(f,l)});break;case"range":d=o.split(e.l10n.rangeSeparator).map(function(f){return e.parseDate(f,l)});break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(o)));e.selectedDates=e.config.allowInvalidPreload?d:d.filter(function(f){return f instanceof Date&&De(f,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(f,w){return f.getTime()-w.getTime()})}function sn(o,l,d){if(l===void 0&&(l=!1),d===void 0&&(d=e.config.dateFormat),o!==0&&!o||o instanceof Array&&o.length===0)return e.clear(l);Zt(o,d),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),P(void 0,l),g(),e.selectedDates.length===0&&e.clear(!1),pe(l),l&&q("onChange")}function Qt(o){return o.slice().map(function(l){return typeof l=="string"||typeof l=="number"||l instanceof Date?e.parseDate(l,void 0,!0):l&&typeof l=="object"&&l.from&&l.to?{from:e.parseDate(l.from,void 0),to:e.parseDate(l.to,void 0)}:l}).filter(function(l){return l})}function on(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var o=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);o&&Zt(o,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function ln(){if(e.input=Wt(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=N(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),ei()}function ei(){e._positionElement=e.config.positionElement||e._input}function cn(){var o=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=N("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=o,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=o==="datetime-local"?"Y-m-d\\TH:i:S":o==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}b(e.mobileInput,"change",function(l){e.setDate(ie(l).value,!1,e.mobileFormatStr),q("onChange"),q("onClose")})}function dn(o){if(e.isOpen===!0)return e.close();e.open(o)}function q(o,l){if(e.config!==void 0){var d=e.config[o];if(d!==void 0&&d.length>0)for(var f=0;d[f]&&f<d.length;f++)d[f](e.selectedDates,e.input.value,e,l);o==="onChange"&&(e.input.dispatchEvent(gt("change")),e.input.dispatchEvent(gt("input")))}}function gt(o){var l=document.createEvent("Event");return l.initEvent(o,!0,!0),l}function vt(o){for(var l=0;l<e.selectedDates.length;l++){var d=e.selectedDates[l];if(d instanceof Date&&ne(d,o)===0)return""+l}return!1}function un(o){return e.config.mode!=="range"||e.selectedDates.length<2?!1:ne(o,e.selectedDates[0])>=0&&ne(o,e.selectedDates[1])<=0}function tt(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(o,l){var d=new Date(e.currentYear,e.currentMonth,1);d.setMonth(e.currentMonth+l),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[l].textContent=ct(d.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=d.getMonth().toString(),o.value=d.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function bt(o){var l=o||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(d){return e.formatDate(d,l)}).filter(function(d,f,w){return e.config.mode!=="range"||e.config.enableTime||w.indexOf(d)===f}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function pe(o){o===void 0&&(o=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=bt(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=bt(e.config.altFormat)),o!==!1&&q("onValueUpdate")}function hn(o){var l=ie(o),d=e.prevMonthNav.contains(l),f=e.nextMonthNav.contains(l);d||f?ft(d?-1:1):e.yearElements.indexOf(l)>=0?l.select():l.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):l.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function fn(o){o.preventDefault();var l=o.type==="keydown",d=ie(o),f=d;e.amPM!==void 0&&d===e.amPM&&(e.amPM.textContent=e.l10n.amPM[oe(e.amPM.textContent===e.l10n.amPM[0])]);var w=parseFloat(f.getAttribute("min")),E=parseFloat(f.getAttribute("max")),I=parseFloat(f.getAttribute("step")),D=parseInt(f.value,10),O=o.delta||(l?o.which===38?1:-1:0),S=D+I*O;if(typeof f.value<"u"&&f.value.length===2){var M=f===e.hourElement,L=f===e.minuteElement;S<w?(S=E+S+oe(!M)+(oe(M)&&oe(!e.amPM)),L&&V(void 0,-1,e.hourElement)):S>E&&(S=f===e.hourElement?S-E-oe(!e.amPM):w,L&&V(void 0,1,e.hourElement)),e.amPM&&M&&(I===1?S+D===23:Math.abs(S-D)>I)&&(e.amPM.textContent=e.l10n.amPM[oe(e.amPM.textContent===e.l10n.amPM[0])]),f.value=Z(S)}}return r(),e}function Re(i,t){for(var e=Array.prototype.slice.call(i).filter(function(s){return s instanceof HTMLElement}),n=[],r=0;r<e.length;r++){var a=e[r];try{if(a.getAttribute("data-fp-omit")!==null)continue;a._flatpickr!==void 0&&(a._flatpickr.destroy(),a._flatpickr=void 0),a._flatpickr=pa(a,t||{}),n.push(a._flatpickr)}catch(s){console.error(s)}}return n.length===1?n[0]:n}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(i){return Re(this,i)},HTMLElement.prototype.flatpickr=function(i){return Re([this],i)});var H=function(i,t){return typeof i=="string"?Re(window.document.querySelectorAll(i),t):i instanceof Node?Re([i],t):Re(i,t)};H.defaultConfig={};H.l10ns={en:z({},We),default:z({},We)};H.localize=function(i){H.l10ns.default=z(z({},H.l10ns.default),i)};H.setDefaults=function(i){H.defaultConfig=z(z({},H.defaultConfig),i)};H.parseDate=qt({});H.formatDate=Vi({});H.compareDates=ne;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(i){return Re(this,i)});Date.prototype.fp_incr=function(i){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof i=="string"?parseInt(i,10):i))};typeof window<"u"&&(window.flatpickr=H);function ma(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Ke={exports:{}},ga=Ke.exports,Ei;function va(){return Ei||(Ei=1,(function(i,t){(function(e,n){n(t)})(ga,(function(e){var n=typeof window<"u"&&window.flatpickr!==void 0?window.flatpickr:{l10ns:{}},r={weekdays:{shorthand:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],longhand:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"]},months:{shorthand:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],longhand:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"]},ordinal:function(){return"º"},firstDayOfWeek:1,rangeSeparator:" a ",time_24hr:!0};n.l10ns.es=r;var a=n.l10ns;e.Spanish=r,e.default=a,Object.defineProperty(e,"__esModule",{value:!0})}))})(Ke,Ke.exports)),Ke.exports}var ba=va();const _a=ma(ba),ya={name:null,type:"text",info:void 0,label:void 0,placeholder:void 0,disabled:!1,readonly:!1,order:1,form:"inputText",grupo:1,target:-1,valor:"",event:void 0,data:void 0,datemax:"",searchType:!1,search:"",className:""};class wa extends Backbone.Model{constructor(t={}){super(t)}get idAttribute(){return"name"}get defaults(){return{...ya}}}class Ca{constructor(){}borrarArchivo(t={}){const{data:e,callback:n}=t;C.trigger("syncro",{url:C.url("borrarArchivo"),data:e,callback:r=>{if(r){if(r.success)return C.trigger("alert:success",{message:r.msj}),n(r);C.trigger("alert:error",{message:r.msj})}return n(!1)}})}processDocument(t={}){const{data:e,url:n,callback:r}=t;C.trigger("syncro",{url:n,data:e,callback:a=>{if(a){if(a.success)return r(a);C.trigger("alert:warning",{message:"No se puede generar el formulario"})}return r(!1)}})}guardarArchivo(t={}){const{target:e,id:n,coddoc:r,callback:a}=t,s=new FormData;s.append("archivo_"+n+"_"+r,$(e)[0].files[0]),s.append("id",n),s.append("coddoc",r),C.trigger("upload",{url:C.url("guardarArchivo"),data:s,callback:c=>{if(c){if(c.success)return a(c);C.trigger("alert:error",{message:c.msj})}return a(!1)}})}}class Ea extends le{constructor(t={}){super(t),this.template=_.template(`
			<select
				type="<%=type%>"
				class="form-control <%=className%>"
				toggle-entity="_entitie_form"
				toggle-event="<%=(event)? event : '' %>"
				id="<%=name%>"
				name="<%=name%>"
				target="<%= target%>"
				placeholder="<%=placeholder%>"
				value="<%= valor%>"
				<%=(readonly)? 'readonly': ''%>
				<%=(disabled)? 'disabled': ''%>>
				<option value="">Pendiente seleccionar...</option>
				<% data = (searchType == 'local')? this.collection[search]: new Array()
				if(_.size(data) > 0){
					_.each(data, function(row, index){ 	%>
					<% selected = (index == valor)? 'selected': '' %>
					<option <%=selected%> value="<%= index%>"><%= row%></option>
				<% })
				} else { %>
					<option value="">...</option>
				<% } %>
			</select>
			<label toggle-error="<%=name%>" id="<%=name%>-error" class="error" for="<%=name%>"></label>
		`)}}class Sa extends le{constructor(t={}){super(t),this.template=_.template(`
            <div class="form-check form-check-inline mt-2">
                <input
                    id="<%=name%>1"
                    name="<%=name%>"
                    toggle-entity="entitie_form"
                    target="<%= target%>"
                    class="form-check-input mt-0"
                    toggle-event="<%=(event)? event :'' %>"
                    type="radio"
                    value='S'
                    <%=(valor == 'S')? 'checked':''%>
                    <%=(readonly)? 'readonly': ''%>
                    <%=(disabled)? 'disabled': ''%>
                />
                <label class="form-check-label mt-0" for="flexRadioDefault1">
                    SI
                </label>
            </div>
            <div class="form-check form-check-inline">
                <input
                    id="<%=name%>2"
                    name="<%=name%>"
                    toggle-entity="entitie_form"
                    target="<%= target%>"
                    class="form-check-input mt-0"
                    toggle-event="<%=(event)? event.name:'' %>"
                    type="radio"
                    value='N'
                    <%=(valor != 'S')? 'checked':''%>
                    <%=(readonly)? 'readonly': ''%>
                    <%=(disabled)? 'disabled': ''%>
                />
                <label class="form-check-label mt-0" for="flexRadioDefault2">
                    NO
                </label>
            </div>
             <label toggle-error="<%=name%>" id="<%=name%>-error" class="error" for="<%=name%>"></label>
            `)}get className(){return"form-group"}}class Da extends le{constructor(t={}){super(t),this.template=`<input
            type="<%=type%>"
            class="form-control datepicker mt-2 ddate"
            toggle-entity="entitie_form"
            toggle-event="<%= (event)? event : '' %>"
            id="<%=name%>"
            name="<%=name%>"
            target="<%= target%>"
            placeholder="<%=(placeholder)? placeholder : label %>"
            value="<%= valor%>"
            for="<%= name%>"
            title="<%=(placeholder)? placeholder : label %>"
            <%=(disabled)? 'disabled': ''%>
            <%=(readonly)? 'readonly': ''%>
	    />`}get className(){return"form-group"}}class Ma extends le{constructor(t={}){super(t),this.template=`<textarea
		type="<%=type%>"
		toggle-entity="entitie_form"
		class="form-control  mt-2"
		toggle-event="<%=(event)? event : '' %>"
		id="<%=name%>"
		name="<%=name%>"
		target="<%= target%>"
		placeholder="<%=(placeholder)? placeholder : label %>"
		maxlength="<%= longitud %>"
		rows="<%=(rows)? rows : 1 %>"
		<%=(readonly)? 'readonly': ''%>
		<%=(disabled)? 'disabled': ''%>><%= valor%></textarea>
      <label toggle-error="<%=name%>" id="<%=name%>-error" class="error" for="<%=name%>"></label>
      `}get className(){return"form-group"}}class Ta extends le{constructor(t={}){super(t),this.template=_.template(`<div class="input-group  mt-2">
            <input
                type="text"
                toggle-entity="entitie_form"
                class="d-none"
                id="<%= name%>"
                name="<%= name%>"
                value="<%= valor%>"
                target="-1"
            />
            <% if(type === 'text'){ %>
                <input type="<%=type%>"
                placeholder="<%=(placeholder)? placeholder : label %>"
                ondblclick="document.querySelector('.search_<%=name%>').click()"
                id="<%= name%>_detalle"
                name="<%= name%>_detalle"
                class="form-control"
                value="<%= detalle%>"
                target="-1"
                readonly
            />
            <% } %>
            <% if(type === 'textarea'){ %>
                <textarea
                rows='1'
                placeholder="<%=(placeholder)? placeholder : label %>"
                ondblclick="document.querySelector('.search_<%=name%>').click()"
                id="<%= name%>_detalle"
                name="<%= name%>_detalle"
                class="form-control"
                target="-1"
                readonly ><%= detalle%></textarea>
            <% } %>

            <span class="input-group-text">
                <% if(searchType === "ajax"){ %>
                    <button type="button"
                    target= "<%= target%>"
                    data-search="<%=search%>"
                    data-tag="<%=name%>"
                    data-size="<%=(size)? size : 100 %>"
                    data-detalle="<%=name%>_detalle"
                    onclick="buscarDataAjax(this)"
                    class="btn btn-sm bg-gray search_<%=name%>"
                    <%=(disabled)? 'disabled': ''%>
                    >
                        <i class="fa fa-search"></i>
                </button>
                <% } else { %>
                    <button type="button"
                    target= "<%= target%>"
                    data-search="<%=search%>"
                    data-tag="<%=name%>"
                    data-size="<%=(size)? size : 100 %>"
                    data-detalle="<%=name%>_detalle"
                    onclick="buscarData(this, Colletions)"
                    class="btn btn-sm bg-gray search_<%=name%>"
                    <%=(disabled)? 'disabled': ''%>
                    >
                        <i class="fa fa-search"></i>
                </button>
                <% } %>
            </span>
        </div>
        <p id="<%=name%>_hp" class="d-none text-danger"></p>`)}get className(){return"form-group"}}class Si extends Backbone.View{constructor(t={}){super(t)}initialize(){this.Modal=new bootstrap.Modal(document.getElementById("modal_generic"),{keyboard:!0,backdrop:"static"})}render(){const t=_.template(document.getElementById("tmp_direction").innerHTML);return this.$el.html(t({adress:this.collection})),$("#size_modal_generic").addClass("modal-lg"),this.Modal.show(),document.getElementById("modal_generic").addEventListener("hidden.bs.modal",e=>{$(".modal:visible").length==0&&this.remove()}),this}get events(){return{'blur [data-toggle="valida_caracteres"]':"validaCaracteres","click #button_address_modal":"addressModal","change #address_zona":"addressZona","click #address_one":"addressOne",'click [data-dismiss="modal"]':"closeModal"}}closeModal(t){t.preventDefault(),this.Modal.hide()}validaCaracteres(t){let e=$(t.currentTarget);/[^a-zA-Z\ 0-9]/g.test(e.val())&&e.val("")}addressModal(t){t.preventDefault();let e="",n;this.$el.find("#address_five").val()!==""&&(e=" BRR "+$("#address_five").val()),this.$el.find("#address_one").val()==null&&$("#address_two").val()==""?n="BRR":n=this.$el.find("#address_one").val()+" "+this.$el.find("#address_two").val()+" "+this.$el.find("#address_four").val()+" "+e,document.getElementById(this.model.name).value=n,this.Modal.hide()}addressZona(t){t.preventDefault();const e=$(t.currentTarget).val();let n;e==="R"?(n=_.filter(this.collection,s=>s.tipo_rural==="S"||s.tipo_rural==="V"),this.$el.find("#address_barrio").fadeOut(),this.$el.find("#show_address_four").fadeOut(),this.$el.find("#address_nombre_optional").text("Nombre ubicación"),this.$el.find("#show_address_two").attr("class","col-md-4"),this.$el.find("#address_one").removeAttr("disabled"),new lt(this.$el.find("#address_one")[0])):e==="U"?(n=_.filter(this.collection,s=>s.tipo_rural==="N"),this.$el.find("#show_address_four").fadeIn(),this.$el.find("#address_barrio").fadeIn(),this.$el.find("#address_nombre_optional").text("Número "),this.$el.find("#show_address_two").attr("class","col-md-2"),this.$el.find("#address_one").removeAttr("disabled"),new lt(this.$el.find("#address_one")[0])):(n=[],$("#address_one").attr("disabled","true"));let r="";const a=_.template('<option value="<%=estado%>"><%=detalle%></option>');_.each(n,s=>{r+=a(s)}),this.$el.find("#address_one").html(r)}addressOne(t){t.preventDefault(),this.$el.find("#address_zona").val()==""&&(this.$el.find("#address_zona").focus(),this.$el.find("#address_one").val(""))}}class Ia extends le{constructor(t={}){super(t),this.template=_.template(`
			<input
				type="<%=type%>"
				class="form-control <%=className%>"
				toggle-entity="_entitie_form"
				toggle-event="<%=(event)? event : '' %>"
				id="<%=name%>"
				name="<%=name%>"
				target="<%= target%>"
				placeholder="<%=placeholder%>"
				value="<%= valor%>"
				<%=(readonly)? 'readonly': ''%>
				<%=(disabled)? 'disabled': ''%>
				/>
			<label toggle-error="<%=name%>" id="<%=name%>-error" class="error" for="<%=name%>"></label>
		`)}}class Bi extends Backbone.Model{constructor(t={}){super(t)}get idAttribute(){return"coddoc"}get defaults(){return{coddoc:null,puede_borrar:!1,tipopc:void 0,tipsoc:void 0,obliga:null,auto_generado:0,id:null,detalle:void 0,diponible:void 0,corrige:!1}}}class Yi extends Backbone.View{constructor(e={}){super(e);_e(this,"modelView");this.children=[]}initialize(){this.listenTo(this.collection,"add",this.modelAdded),this.listenTo(this.collection,"remove",this.modelRemoved),this.listenTo(this.collection,"reset",this.render)}modelAdded(e){const n=this.renderModel(e);this.$el.append(n.$el)}modelRemoved(e){if(!e)return;let n=this.children[e.cid];this.closeChildView(n)}render(){this.closeChildren();const e=this.collection.map(n=>this.renderModel(n).$el);return this.$el.html(e),this}renderModel(e){let n;if(this.modelView)n=new this.modelView({model:e});else throw new Error("Error no hay model view ha mostrar");return this.children[e.cid]=n,this.listenTo(n,"all",r=>{this.trigger("item:"+r,n,e)}),n.render(),n}remove(){Backbone.View.prototype.remove.call(this),this.closeChildren()}closeChildren(){const e=this.children||{};_.each(e,n=>this.closeChildView(n))}closeChildView(e){e&&(_.isFunction(e.remove)&&e.remove(),this.stopListening(e),e.model&&(this.children[e.model.cid]=void 0))}}class xa extends Yi{constructor(t={}){super(t),this.modelView=Aa}get tagName(){return"tbody"}remove(){this.stopListening(),Backbone.View.prototype.remove.call(this)}}class Aa extends le{constructor(t={}){super(t),this.template=_.template(document.getElementById("tmp_docurow").innerHTML)}initialize(){this.listenTo(this.model,"change",this.render)}get tagName(){return"tr"}}class ka extends Backbone.Collection{get model(){return Bi}}class Oa extends Backbone.View{constructor(t){super(t),this.documentosCollection=new ka,this.documentosView=null}get className(){return"card-body"}initialize(){this.template=$("#tmp_documentos").html()}get events(){return{'click [toggle-event="borrar"]':"borrarArchivo",'click [toggle-event="download"]':"descargaArchivo",'click [toggle-event="prodoc"]':"processDocument",'click [toggle-event="salvar"]':"guardarArchivo",'click [toggle-event="show"]':"verArchivo",'change input[toggle-event="change"]':"showNameFile"}}render(){const{archivos:t,path:e,puede_borrar:n,disponibles:r}=this.collection[0],a=_.template(this.template);return this.$el.html(a({archivos:t,path:e,puede_borrar:n,disponibles:r,model:this.model.toJSON()})),_.each(t,s=>{s.puede_borrar=n,this.documentosCollection.add(new Bi(s),{merge:!0})}),this.documentosView=new xa({collection:this.documentosCollection}),this.$el.find("#addArchivoRequeridos").append(this.documentosView.render().el),this}borrarArchivo(t){t.preventDefault();let e=$(t.currentTarget);const n=e.attr("data-coddoc"),r=e.attr("data-id");C.trigger("confirma",{message:"Esta seguro de borrar el Archivo?",callback:a=>{a&&this.trigger("file:trash",{data:{id:r,coddoc:n},callback:s=>{s&&this.trigger("file:reload")}})}})}descargaArchivo(t){t.preventDefault();const e=this.$el.find(t.currentTarget);C.trigger("down",{url:e.attr("data-url"),filename:e.attr("data-file")})}processDocument(t){t.preventDefault();let e=this.$el.find(t.currentTarget);const n=parseInt(e.attr("data-cid")),r=C.kumbiaURL(e.attr("data-url")+"/"+n);this.trigger("file:firma",a=>{a&&this.trigger("file:prodoc",{data:{id:n},url:r,callback:s=>{s&&(C.trigger("down",{url:s.url,filename:s.name}),this.trigger("file:reload"))}})})}guardarArchivo(t){t.preventDefault();let e=this.$el.find(t.currentTarget);const n=e.attr("data-coddoc"),r=parseInt(e.attr("data-id")),a=document.querySelector("#archivo_"+n);this.trigger("file:save",{target:a,id:r,coddoc:n,callback:s=>{C.trigger("alert:success",{message:s.msj}),this.trigger("file:reload")}})}showNameFile(t){let e=$(t.currentTarget),n=e.attr("data-coddoc"),r=document.getElementById(e.attr("id")).files;if(r.length==0)return;let a=r[0];this.$el.find('.toogle-show-name[data-code="'+n+'"]').html(a.name)}verArchivo(t){t.preventDefault();var e=$(t.currentTarget);const n=e.attr("data-href"),r=btoa("public/temp/"+n);C.trigger("syncro",{url:C.kumbiaURL("mercurio/principal/file_existe_global/"+r),callback:a=>{if(a)if(a.success){const s=("../public/temp/"+n).replace("//","/");window.open(C.kumbiaURL(s),n,"width=900,height=750,toobal=no,statusbar=no,scrollbars=yes menuvar=yes")}else Swal.fire({title:"Notificación",text:"El archivo no se logra localizar en el servidor",icon:"warning",showConfirmButton:!1,timer:1e4})}})}remove(){this.documentosView&&this.documentosView.remove(),this.stopListening(),Backbone.View.prototype.remove.call(this)}}class Na extends Backbone.View{constructor(t){super(t)}get events(){return{}}render(){const{campos_disponibles:t,estados_detalles:e,seguimientos:n}=this.collection[0],a=_.template(document.getElementById("tmp_seguimientos").innerHTML)({campos_disponibles:t,estados_detalles:e,seguimientos:n});return this.$el.html(a),this}}class La extends Backbone.View{constructor(t){super(t)}initialize(t={}){this.listenTo(t.model,"change",this.render)}render(){const t=_.template(document.getElementById("tmp_subheader").innerHTML);return this.$el.html(t({model:this.model.toJSON(),items:this.collection})),this}get className(){return"row align-content-between"}get events(){return{'show.bs.tab a[data-bs-toggle="pill"]':"actionSubHeader","click #closeForm":"closeForm"}}actionSubHeader(t){switch($(t.target).attr("aria-controls")){case"seguimiento":this.trigger("show:seguimiento");break;case"documentos_adjuntos":this.trigger("show:documentos");break;case"enviar_radicado":this.trigger("show:enviar");break}}closeForm(t){t.preventDefault(),C.trigger("confirma",{message:"¡Esta seguro que desea salir y volver a la lista principal!",callback:e=>{e&&C.router.navigate("list",{trigger:!0})}})}}var qe;class Di extends Backbone.View{constructor(e={}){super(e);Me(this,qe,null);_e(this,"App",null);this.children=new Array,this.gestionAdjuntoService=new Ca,this.region=e.region||null,this.isNew=e.isNew||!1,this.template="#tmp_create",this.form=null,this.selectores={},this.address=null,this.subHeader=null,this.viewDocuments=null,_.extend(this,e),wt(this,qe,e.onRender||null),this.App=e.App||C}render(){const e=this.__serializeData(),n=this.__compileTemplate();return this.$el.html(n(e)),this.form=this.$el.find(this.region.form),this.__initSubHeader(),ye(this,qe)&&ye(this,qe).call(this,this.$el),this}enviarRadicado(e){e.preventDefault(),this.__enviarCaja()}get className(){return"page-container"}__serializeData(){return _.isNull(this.model)||_.isUndefined(this.model)?this.model:this.model.toJSON()}__initSubHeader(){this.subHeader&&this.subHeader.remove(),this.subHeader=new La({model:this.model,collection:[{id:"closeForm",hidden:!1,label:"Salir",icon:"fa fa-times text-warning",active:!1,tab:""},{id:"seguimiento-tab",hidden:!(this.model.get("id")&&this.model.get("estado")!=="T"),label:"Seguimiento",icon:"fa fas fa-eye text-info",active:!1,tab:"seguimiento"},{id:"datos_solicitud_tab",hidden:!1,label:"Ficha Principal Registro",icon:"fa fas fa-edit text-yellow",active:!0,tab:"datos_solicitud"},{id:"documentos_adjuntos_tab",hidden:!this.model.get("id"),label:"Documentos Adjuntar",icon:"fa fas fa-file text-purple",active:!1,tab:"documentos_adjuntos"},{id:"enviarCaja",hidden:!(this.model.get("id")&&(this.model.get("estado")==="D"||this.model.get("estado")==="T")),label:"Enviar Radicado",icon:"fa fas fa-upload text-success",active:!1,tab:"enviar_radicado"}]}),this.listenTo(this.subHeader,"show:documentos",this.__renderDocumentos),this.listenTo(this.subHeader,"show:seguimiento",this.__renderSeguimiento),this.listenTo(this.subHeader,"show:enviar",this.__enviarCaja),this.App.layout.getRegion("subheader").show(this.subHeader)}isNumber(e){if($(e.currentTarget).val()!=""&&!Pn($(e.currentTarget).val()))return $(e.currentTarget).val("")}__compileTemplate(){return _.template($(this.template).html())}getInput(e){return this.$el.find(e).val()}setInput(e,n){return this.$el.find(`[name='${e}']`).val(n)}serializeModel(e){const n=this.form.serializeArray();return _.each(n,r=>e.set(r.name,r.value)),e}addComponent(e={}){const n=this.App.Collections.formParams;let r;if(_.size(this.children)>0&&_.indexOf(this.children,e.get("cid"))!=-1&&(r=this.children[e.get("cid")]),!r){switch(e.get("type")){case"select":r=new Ea({model:e,collection:n});break;case"input":r=new Ia({model:e});break;case"radio":r=new Sa({model:e});break;case"date":r=new Da({model:e});break;case"text":r=new Ma({model:e});break;case"dialog":r=new Ta({model:e,collection:n});break}this.children[e.get("cid")]=r}return r.render(),r}openAddress(e){const r=this.$el.find(e.currentTarget).attr("data-name");if(this.address){const a=new Si({collection:this.address,model:{name:r}});$("#show_modal_generic").html(a.render().el)}else this.App.trigger("syncro",{url:this.App.kumbiaURL("mercurio/principal/listaAdress"),data:{},silent:!0,callback:a=>{if(a&&a.success){this.address=a.data;const s=new Si({collection:a.data,model:{name:r}});$("#show_modal_generic").html(s.render().el)}}})}__renderDocumentos(){this.App.trigger("syncro",{url:this.App.url("mercurio/consultaDocumentos/"+this.model.get("id")),data:{},callback:e=>{e.success?(this.viewDocuments!=null&&this.viewDocuments.remove(),this.viewDocuments=new Oa({model:this.model,collection:[e.data]}),this.listenTo(this.viewDocuments,"file:trash",this.gestionAdjuntoService.borrarArchivo),this.listenTo(this.viewDocuments,"file:save",this.gestionAdjuntoService.guardarArchivo),this.listenTo(this.viewDocuments,"file:prodoc",this.gestionAdjuntoService.processDocument),this.listenTo(this.viewDocuments,"file:reload",this.__renderDocumentos),this.$el.find("#documentos_adjuntos").html(this.viewDocuments.render().el)):this.App.trigger("alert:error",{message:e.msj})}})}__renderSeguimiento(){this.App.trigger("syncro",{url:this.App.url("mercurio/seguimiento/"+this.model.get("id")),data:{},callback:e=>{if(e.success){const n=new Na({model:this.model,collection:[{campos_disponibles:e.data.campos_disponibles,estados_detalles:e.data.estados_detalles,seguimientos:e.data.seguimientos}]});this.$el.find("#seguimiento").html(n.render().el)}else this.App.trigger("alert:error",{message:e.msj})}})}__enviarCaja(){this.App.trigger("confirma",{message:"¿Está seguro de envíar para verificación.?",callback:e=>{e&&this.trigger("form:send",{model:this.model,callback:n=>{n.success&&(this.remove(),this.App.router.navigate("list",{trigger:!0}))}})}})}cancel(e){e.preventDefault(),this.App.router.navigate("list",{trigger:!0})}actualizaForm(e=void 0){_.each(this.model.toJSON(),(n,r)=>{if(!(_.isEmpty(n)==!0||_.isUndefined(n)==!0)){let a=this.$el.find(`[name='${r}']`).attr("type");a==="radio"||a==="checkbox"||(this.setInput(r,n),this.$el.find(`[for="${r}"]`).addClass("top"))}}),this.selectores.trigger("change"),this.form.valid(),e==null&&setTimeout(()=>{this.App.trigger("noty:info","El formulario se actualizo de forma correcta")},700)}remove(){this.subHeader&&this.subHeader.remove(),this.viewDocuments&&this.viewDocuments.remove(),this.stopListening(),Backbone.View.prototype.remove.call(this)}}qe=new WeakMap;class Ki extends Backbone.Model{constructor(t={}){super(t)}get idAttribute(){return"cedtra"}get defaults(){return{cedtra:null,nomtra:"",apetra:"",saltra:"",fectra:"",cartra:"",request:""}}validate(t={}){let e=new Array,n;return(n=X.vacio({attr:t.cedtra,target:"cedtra",label:"cedula trabajador"}))&&e.push(n),(n=X.vacio({attr:t.nomtra,target:"nomtra",label:"nombres trabajador"}))&&e.push(n),(n=X.vacio({attr:t.apetra,target:"apetra",label:"apellidos trabajador"}))&&e.push(n),(n=X.vacio({attr:t.saltra,target:"saltra",label:"salario trabajador"}))&&e.push(n),((n=X.vacio({attr:t.fectra,target:"fectra",label:"fecha inicio laboral"}))||(n=X.date({attr:t.fectra,target:"fectra",label:"fecha inicio laboral"})))&&e.push(n),(n=X.vacio({attr:t.cartra,target:"cartra",label:"cargo del trabajador"}))&&e.push(n),_.isEmpty(e)===!0?null:e}}const Ne=class Ne extends Backbone.Model{constructor(t={}){super(t)}get idAttribute(){return"id"}get defaults(){return{id:null,nit:0,razsoc:"",cedtra:void 0,tipdoc:void 0,priape:"",prinom:"",fecnac:"",ciunac:"",sexo:"",estciv:"",cabhog:"",direccion:"",dirlab:"",telefono:"",celular:"",email:void 0,fecing:void 0,salario:0,captra:"",tipdis:"",nivedu:"",rural:"",horas:0,tipcon:"",vivienda:"",tipafi:"",cargo:"",autoriza:"",trasin:"",tipjor:"",comision:"",ruralt:"",orisex:"",facvul:"",peretn:"",codsuc:void 0,tippag:void 0,otra_empresa:"",estado:void 0}}validate(t={}){return Mi(Ne.Rules.rules,t)}static changeRuleProperty(t={}){const{rule:e,prop:n,value:r}=t;Ne.Rules.rules[e][n]=r}static changeRulesProperty(t=[]){_.each(t,e=>Ne.changeRuleProperty(e))}};_e(Ne,"Rules",{rules:{nit:{required:!0,rangelength:[5,18]},razsoc:{required:!0,minlength:5},cedtra:{required:!0,rangelength:[5,18]},tipdoc:{required:!0},priape:{required:!0,minlength:4},prinom:{required:!0,minlength:4},fecnac:{required:!0},ciunac:{required:!0,minlength:4},sexo:{required:!0},estciv:{required:!0},cabhog:{required:!0},direccion:{required:!0,minlength:4},dirlab:{required:!0},telefono:{required:!0,minlength:7,rangelength:[7,10]},celular:{required:!0,minlength:10,number:!0},email:{required:!0,email:!0},fecing:{required:!0,date:!0},salario:{required:!0},captra:{required:!0},tipdis:{required:!0},nivedu:{required:!0},rural:{required:!0,minlength:1},horas:{required:!0,minlength:2},tipcon:{required:!0},vivienda:{required:!0,minlength:1},tipafi:{required:!0,minlength:1},cargo:{required:!0,minlength:1},autoriza:{required:!0,minlength:1},trasin:{required:!0},tipjor:{required:!0,minlength:1},comision:{required:!0},ruralt:{required:!0},orisex:{required:!0,minlength:1},facvul:{required:!0,minlength:1},peretn:{required:!0,minlength:1},codsuc:{required:!0,minlength:1},otra_empresa:{required:!1}},messages:{nit:{required:"Se requiere de nit"},razsoc:{required:"Se requiere de razon social"},cedtra:{required:"Se requiere cedula trabajador"},tipdoc:{required:"Se requiere de tipo documento"},priape:{required:"Se requiere de primer apellido"},prinom:{required:"Se requiere de primer nombre"},fecnac:{required:"Se requiere de fecha nacimiento"},ciunac:{required:"Se requiere de ciunac"},sexo:{required:"Se requiere de sexo"},estciv:{required:"Se requiere de estado civil"},cabhog:{required:"Se requiere de cabeza de hogar"},direccion:{required:"Se requiere de dirección"},dirlab:{required:"Se requiere de dirección laboral"},telefono:{required:"Se requiere de télefono"},celular:{required:"Se requiere de celular"},email:{required:"Se requiere de email"},fecing:{required:"Se requiere de fecha ingreso"},salario:{required:"Se requiere de salario"},captra:{required:"Se requiere de capacidad trabajar"},tipdis:{required:"Se requiere de tipo discapacidad"},nivedu:{required:"Se requiere de nivel educativo"},rural:{required:"Se requiere de rural"},horas:{required:"Se requiere de horas"},tipcon:{required:"Se requiere de tipo contrato"},vivienda:{required:"Se requiere de vivienda"},tipafi:{required:"Se requiere de tipo afiliación"},cargo:{required:"Se requiere de cargo"},autoriza:{required:"Se requiere de autoriza"},trasin:{required:"Se requiere de trasin"},tipjor:{required:"Se requiere de tipo jornada"},comision:{required:"Se requiere de comision"},ruralt:{required:"Se requiere de rural"},orisex:{required:"Se requiere de orientación sexual"},facvul:{required:"Se requiere de factor vulnerabilidad"},peretn:{required:"Se requiere de pertenencia etnica"},codsuc:{required:"Se requiere de código sucursal"},otra_empresa:{required:"Se requiere de otra empresa"}}});let Ft=Ne;class Va extends Backbone.Collection{constructor(){super()}get url(){return"/Mercurio/trajadores/list"}get model(){return Ft}}class Pa extends Backbone.Collection{constructor(){super()}get model(){return Ki}}class Ra extends Yi{constructor(t){super(t),this.modelView=qa}get tagName(){return"tbody"}remove(){this.stopListening(),Backbone.View.prototype.remove.call(this)}get events(){return{'click [data-toggle="delete-tra"]':"removeTrabaj"}}removeTrabaj(t){t.preventDefault();var e=this.$el.find(t.currentTarget);const n=e.attr("data-cid");this.collection.remove(n)}}class qa extends le{constructor(t){super(t),this.template=_.template(document.getElementById("tmp_tranom").innerHTML)}initialize(){this.listenTo(this.model,"change",this.render)}get tagName(){return"tr"}}var ge,dt,zi;class Fa extends Di{constructor(e={}){super({...e,onRender:(n={})=>ii(this,dt,zi).call(this,n)});Me(this,dt);Me(this,ge,null);this.trabajadoresNomina=new Pa,this.viewTranom=null,this.viewComponents=[],wt(this,ge,[])}get events(){return{"click #guardar_ficha":"saveFormData","click #cancel":"cancel","focusout #telefono, #digver":"isNumber","focusout #nit":"valideNitkey","change #tipdoc":"changeTipoDocumento",'click [data-toggle="address"]':"openAddress","change #tipper":"changeTipoPer","focusout #sigla":"changeSigla","focusout #razsoc":"traerRazsoc","focusout #prinom, #segnom, #priape, #segape":"changeRepleg","click #add_trabajador":"addTrabajador","click #clean_formtra":"cleanFormTra","click #btEnviarRadicado":"enviarRadicado"}}beforeRender(){const e=this.model.get("tranoms");this.trabajadoresNomina.add(e),this.viewTranom=new Ra({collection:this.trabajadoresNomina}),this.$el.find("#tableTranomRow").append(this.viewTranom.render().el)}changeRepleg(e){e.preventDefault();let n=this.nameRepleg();this.$el.find("#repleg").val(n),this.$el.find("#repleg").siblings(".control-label").addClass("top")}changeTipoPer(e){e.preventDefault(),this.$el.find("#tipper").val()=="N"?this.$el.find("#tipdoc").val(1):this.$el.find("#tipdoc").val(3),this.selectores.trigger("change")}changeTipoDocumento(e){let n=$(e.currentTarget).val(),r=Le.changeTipdoc(n);this.$el.find("#coddocrepleg").val(r)}saveFormData(e){e.preventDefault();var n=this.$el.find(e.currentTarget);n.attr("disabled",!0);let r=0;if(this.form.valid()==!1&&r++,r>0)return n.removeAttr("disabled"),C.trigger("alert:warning",{message:"Se requiere de resolver los campos requeridos para continuar."}),!1;this.$el.find("#nit").removeAttr("disabled");const a=this.serializeModel(new Le);if(a.isValid()!==!0)return n.removeAttr("disabled"),C.trigger("alert:warning",{message:a.validationError.join(" ")}),setTimeout(()=>$("label.error").text(""),6e3),!1;if(_.size(this.trabajadoresNomina)==0)return n.removeAttr("disabled"),C.trigger("alert:warning",{message:'Error, se requiere de tener minimo un trabajador en nomina. Adicionalo en la sección inferior de "Relaciona trabajadores en nomina"'}),!1;a.set("repleg",this.nameRepleg()),this.$el.find("#repleg").val(a.get("repleg")),a.set({tranoms:this.trabajadoresNomina.toJSON()}),C.trigger("confirma",{message:"Confirma que desea guardar los datos del formulario.",callback:s=>{s?this.trigger("form:save",{entity:a,callback:c=>{n.removeAttr("disabled"),this.$el.find("#nit").attr("disabled",!0),c&&(c.success?(C.trigger("alert:success",{message:c.msj}),this.model.set({id:parseInt(c.data.id)}),this.isNew===!0?C.router.navigate("proceso/"+this.model.get("id"),{trigger:!0,replace:!0}):new bootstrap.Tab('a[href="#documentos_adjuntos"]').show()):C.trigger("alert:error",{message:c.msj}))}}):n.removeAttr("disabled")}})}nameRepleg(){return this.getInput("#priape")+" "+this.getInput("#segape")+" "+this.getInput("#prinom")+" "+this.getInput("#segnom")}changeSigla(e){e.preventDefault();let n=$("#razsoc").val();if(_.isUndefined(n)||_.isEmpty(n))return!1;{let r=_.map(n.split(/\s/g),function(a){return _.first(a)}).join("");this.$el.find("#sigla").val(r.toUpperCase())}return!1}valideNitkey(e){if(e.preventDefault(),!this.isNew)return!1;let n=this.$el.find(e.currentTarget).val();if(n===""||_.isUndefined(n))return!1;this.trigger("form:digit",{nit:n,callback:r=>{this.$el.find("#digver").val(r.digver),this.$el.find("#digver").siblings(".control-label").addClass("top")}}),this.trigger("form:find",{data:{nit:n},callback:r=>{r&&C.trigger("confirma",{message:"El sistema identifica datos de la empresa en su sistema principal. ¿Desea que se actualice el presente formulario con los datos existentes?.",callback:a=>{a&&(r.estado="T",r.fecsol=null,this.model.set(r),this.actualizaForm(),$("#nit").attr("disabled",!0),$.each(this.selectores,(s,c)=>{const u=this.model.get(c.name);u&&ye(this,ge)[c.name].setChoiceByValue(u)}))}})}})}traerRazsoc(e){e.preventDefault();let n=this.$el.find("#razsoc").val();if(n.length>0){let r=_.map(n.split(/\s/g),function(a){return _.first(a)}).join("");this.$el.find("#sigla").val(r.toUpperCase()),this.$el.find("#sigla").siblings(".control-label").addClass("top")}return!1}setModelUseEmpresa(e){let n;e.priaperepleg==null?n=e.priaperepleg+" "+e.segaperepleg+" "+e.prinomrepleg+" "+e.segnomrepleg:n=e.priape+" "+e.segape+" "+e.prinom+" "+e.segnom,this.model.set({nit:e.nit,cedrep:e.nit,tipdoc:e.coddoc,digver:e.digver,razsoc:n,priape:e.priape,segape:e.segape,prinom:e.priape,segnom:e.segape,nomemp:n,repleg:n,direccion:e.direccion,codciu:e.codciu,telefono:e.telefono,email:e.email,codzon:e.codzon,codase:e.codase,calemp:e.calemp,tipemp:e.tipemp,tipsoc:e.tipsoc,tipapo:e.tipapo,estado:"T",celuar:e.telr,coddocrepleg:"CC",codcat:"B"})}addTrabajador(e){e.preventDefault();const n=new Ki({cedtra:this.getInput("#cedtra"),nomtra:this.getInput("#nomtra"),apetra:this.getInput("#apetra"),saltra:this.getInput("#saltra"),fectra:this.getInput("#fectra"),cartra:this.getInput("#cartra"),request:this.model.get("id")});if(!n.isValid())return $("label.error").fadeIn(),C.trigger("alert:warning",{message:n.validationError.join(", ")}),setTimeout(()=>$("label.error").fadeOut(),6e3),!1;this.trabajadoresNomina.add(n,{merge:!0}),this.setInput("cedtra",""),this.setInput("nomtra",""),this.setInput("apetra",""),this.setInput("saltra",""),this.setInput("fectra",""),this.setInput("cartra","")}cleanFormTra(e){e.preventDefault(),this.setInput("cedtra",""),this.setInput("nomtra",""),this.setInput("apetra",""),this.setInput("saltra",""),this.setInput("fectra",""),this.setInput("cartra","")}remove(){_.size(this.viewComponents)>0&&_.each(this.viewComponents,e=>e.remove()),$.each(ye(this,ge),e=>e.destroy()),Di.prototype.remove.call(this,{})}}ge=new WeakMap,dt=new WeakSet,zi=function(e={}){_.each(this.collection,n=>{n.name=="autoriza"&&(n.type="radio");const r=this.addComponent(new wa({disabled:!1,readonly:!1,order:0,target:1,searchType:"local",...n,valor:this.model.get(n.name)}),n.type);e.find("#component_"+n.name).html(r.$el)}),this.form.validate({...Le.Rules,highlight:function(n){$(n).removeClass("is-valid").addClass("is-invalid")},unhighlight:function(n){$(n).removeClass("is-invalid").addClass("is-valid")}}),this.selectores=e.find("#tipdoc, #tipsoc, #ciupri, #codzon, #codciu, #codact, #coddocrepleg"),this.model.get("id")!==null?($.each(this.model.toJSON(),(n,r)=>{_.isEmpty(r)==!0||_.isUndefined(r)==!0||e.find(`[name="${n}"]`).val(r)}),this.selectores.trigger("change"),e.find("#nit, #cedrep").attr("readonly",!0),setTimeout(()=>this.form.valid(),200),$.each(this.selectores,(n,r)=>{ye(this,ge)[r.name]=new lt(r);const a=this.model.get(r.name);a&&ye(this,ge)[r.name].setChoiceByValue(a)})):$.each(this.selectores,(n,r)=>ye(this,ge)[r.name]=new lt(r)),H(this.$el.find("#fecini, #fectra"),{enableTime:!1,dateFormat:"Y-m-d",locale:_a}),qn(e),this.beforeRender()};class ja extends kn{constructor(t){super({...t,EntityModel:Le,TableView:Fn,FormRequest:Fa,tipo:"E",headerOptions:{estado:"",tipo:"E",url_nueva:C.url("nueva"),breadcrumb_menu:"Crear solicitud",titulo:"Afiliación empresa",url_masivo:null,isNew:null,create:"enabled"}}),this.services&&_.extend(this,this.services),this.on("form:cancel",this.destroy),this.on("params",this.afiService.paramsServer),C.Collections.formParams=null,C.Collections.firmas=null}}class $a extends Mn{constructor(t){super({...t,controller:C.startSubApplication(ja,{name:"afiService",inyectar:In},{form:"#formRequest",content:"#boneLayout"})})}}$(()=>{se.show(!1,{addClass:"loader-white"}),C.startApp($a,"list","#boneLayout")});
//# sourceMappingURL=Empresas.js.map
